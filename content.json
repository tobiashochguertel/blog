{"pages":[{"title":"All categories","path":"categories/index.html","permalink":"https://tobiashochguertel.github.io/blog/categories/index.html","content":""},{"title":"All tags","path":"tags/index.html","permalink":"https://tobiashochguertel.github.io/blog/tags/index.html","content":""},{"title":"Impressum","path":"impressum/index.html","permalink":"https://tobiashochguertel.github.io/blog/impressum/index.html","content":"<h1 id=\"Angaben-gemas-§-5-TMG\"><a href=\"#Angaben-gemas-§-5-TMG\" class=\"headerlink\" title=\"Angaben gemäß § 5 TMG\"></a>Angaben gemäß § 5 TMG</h1><p>Tobias Hochgürtel<br>Gewerbestraße 9<br>38550 Isenbüttel</p><h1 id=\"Kontakt\"><a href=\"#Kontakt\" class=\"headerlink\" title=\"Kontakt\"></a>Kontakt</h1><p>E-Mail: <a href=\"&#x6d;&#97;&#x69;&#x6c;&#116;&#x6f;&#58;&#116;&#111;&#x62;&#x69;&#x61;&#x73;&#46;&#x68;&#x6f;&#99;&#104;&#x67;&#117;&#x65;&#x72;&#x74;&#x65;&#x6c;&#x40;&#x67;&#x6f;&#111;&#103;&#x6c;&#x65;&#109;&#x61;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;\">&#116;&#111;&#x62;&#x69;&#x61;&#x73;&#46;&#x68;&#x6f;&#99;&#104;&#x67;&#117;&#x65;&#x72;&#x74;&#x65;&#x6c;&#x40;&#x67;&#x6f;&#111;&#103;&#x6c;&#x65;&#109;&#x61;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;</a><br><small>Quelle: <a rel=\"external\" href=\"http://www.anwalt.de\" target=\"_blank\">Impressum-Generator von anwalt.de</a></small></p><h1 id=\"Cookie-Use\"><a href=\"#Cookie-Use\" class=\"headerlink\" title=\"Cookie Use\"></a>Cookie Use</h1><p>Wir verwenden Cookies, um Inhalte und Anzeigen zu personalisieren, Funktionen für soziale Medien anbieten zu können und die Zugriffe auf unsere Website zu analysieren. Außerdem geben wir Informationen zu Ihrer Verwendung unserer Website an unsere Partner für soziale Medien, Werbung und Analysen weiter. Unsere Partner führen diese Informationen möglicherweise mit weiteren Daten zusammen, die Sie ihnen bereitgestellt haben oder die sie im Rahmen Ihrer Nutzung der Dienste gesammelt haben. <a href=\"/blog/impressum/cookie-use\">Details ansehen</a></p>"},{"title":"Cookie-Use","path":"impressum/cookie-use/index.html","permalink":"https://tobiashochguertel.github.io/blog/impressum/cookie-use/index.html","content":"<h1 id=\"Google-Analytics\"><a href=\"#Google-Analytics\" class=\"headerlink\" title=\"Google Analytics\"></a>Google Analytics</h1><p><a href=\"https://www.google.com/intl/de/policies/privacy/partners/\" target=\"_blank\" rel=\"external\">Google.com - Datennutzung durch Google bei Ihrer Nutzung von Websites oder Apps unserer Partner</a></p>"}],"posts":[{"title":"Wake-On-Lan","path":"2017/06/25/Wake-On-Lan/","permalink":"https://tobiashochguertel.github.io/blog/2017/06/25/Wake-On-Lan/","content":"<h1 id=\"Wake-On-Lan\"><a href=\"#Wake-On-Lan\" class=\"headerlink\" title=\"Wake-On-Lan\"></a>Wake-On-Lan</h1><p>Notes about power-on an machine from power-off or power-safing state via the network link. Checking current mode of the network device, setting temporary wake-on-lan mode on the network-device, which is usefully when the machine is already power-on and went to an power-safe state.</p><a id=\"more\"></a><h2 id=\"Check-if-network-device-is-configured-for-Wake-On-Lan\"><a href=\"#Check-if-network-device-is-configured-for-Wake-On-Lan\" class=\"headerlink\" title=\"Check if network device is configured for Wake-On-Lan\"></a>Check if network device is configured for Wake-On-Lan</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ethtool enp0s25 | grep Wake-on</div></pre></td></tr></table></figure><table><thead><tr><th>key</th><th>description</th></tr></thead><tbody><tr><td><code>d</code></td><td>disabled</td></tr><tr><td><code>p</code></td><td>PHY activity</td></tr><tr><td><code>u</code></td><td>unicast activity</td></tr><tr><td><code>m</code></td><td>multicast activity</td></tr><tr><td><code>b</code></td><td>broadcast activity</td></tr><tr><td><code>a</code></td><td>ARP activity</td></tr><tr><td><code>g</code></td><td>magic packet activity</td></tr></tbody></table><ul><li>The value of <code>g</code> is required for WOL to work.</li></ul><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@icentos ~]# ethtool enp0s25 | grep Wake-on</div><div class=\"line\">        Supports Wake-on: pumbg</div><div class=\"line\">        Wake-on: g</div></pre></td></tr></table></figure><p></p><h2 id=\"Configure-Wake-On-Lan-Mode-for-network-device\"><a href=\"#Configure-Wake-On-Lan-Mode-for-network-device\" class=\"headerlink\" title=\"Configure Wake-On-Lan Mode for network device\"></a>Configure Wake-On-Lan Mode for network device</h2><p>It’s recommended to set Wake-On-Lan Mode in the computer bios, if you want to wake the machine from power-off state. The following command does not persistent when the machine goes in power-off mode. It might be usefull when the machine goes to an power-safe mode like S3/S5 etc.</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ethtool -s enp0s25 wol g</div></pre></td></tr></table></figure>"},{"title":"OpenShift Host","path":"2017/06/14/OpenShift-Host/","permalink":"https://tobiashochguertel.github.io/blog/2017/06/14/OpenShift-Host/","content":"<h1 id=\"OPENSHIFT-HOST\"><a href=\"#OPENSHIFT-HOST\" class=\"headerlink\" title=\"OPENSHIFT HOST\"></a>OPENSHIFT HOST</h1><p>Konfiguration von Virtuellen Maschinen mit OpenShift Service auf dem KVM Host. (<em>Notizen der Umsetzung, keine Tutorial.</em>)</p><a id=\"more\"></a><h2 id=\"Network-Configuration\"><a href=\"#Network-Configuration\" class=\"headerlink\" title=\"Network Configuration\"></a>Network Configuration</h2><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-br0</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=br0</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">TYPE</span>=Bridge</div><div class=\"line\"><span class=\"attr\">BOOTPROTO</span>=dhcp</div><div class=\"line\"><span class=\"attr\">PEERDNS</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6INIT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_AUTOCONF</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">DHCPV6C</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">STP</span>=<span class=\"literal\">on</span></div><div class=\"line\"><span class=\"attr\">DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV4_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6_DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">DNS1</span>=<span class=\"number\">192.168</span>.<span class=\"number\">0.103</span></div><div class=\"line\"><span class=\"attr\">DNS2</span>=<span class=\"number\">192.168</span>.<span class=\"number\">0.103</span></div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-enp6s0</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=enp6s0</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">BRIDGE</span>=br0</div></pre></td></tr></table></figure><p></p><p><a href=\"https://access.redhat.com/solutions/7412\" target=\"_blank\" rel=\"external\">https://access.redhat.com/solutions/7412</a><br><strong>PEERDNS=no</strong> -&gt; to ensure that the DHCP-Server DNS Value is not added to <code>/etc/resolv.conf</code>.</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">reboot</div></pre></td></tr></table></figure><p><strong>File: <code>/etc/resolv.conf</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># ...</div><div class=\"line\">nameserver 192.168.0.103</div></pre></td></tr></table></figure><p></p><h2 id=\"Htop\"><a href=\"#Htop\" class=\"headerlink\" title=\"Htop\"></a>Htop</h2><ul><li><a href=\"http://www.tecmint.com/install-htop-linux-process-monitoring-for-rhel-centos-fedora/\" target=\"_blank\" rel=\"external\">http://www.tecmint.com/install-htop-linux-process-monitoring-for-rhel-centos-fedora/</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-8.noarch.rpm</div><div class=\"line\">rpm -ihv epel-release-7-8.noarch.rpm</div><div class=\"line\">yum install htop</div></pre></td></tr></table></figure><h2 id=\"Date-and-Time\"><a href=\"#Date-and-Time\" class=\"headerlink\" title=\"Date and Time\"></a>Date and Time</h2><ul><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sect-Date_and_Time_Configuration-Command_Line_Configuration-Network_Time_Protocol.html\" target=\"_blank\" rel=\"external\">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sect-Date_and_Time_Configuration-Command_Line_Configuration-Network_Time_Protocol.html</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install -y ntp ntpdate</div><div class=\"line\">systemctl enable ntpd</div><div class=\"line\">systemctl start ntpd</div></pre></td></tr></table></figure><h2 id=\"OpenShift-Service-Docker-Container\"><a href=\"#OpenShift-Service-Docker-Container\" class=\"headerlink\" title=\"OpenShift Service (Docker Container)\"></a>OpenShift Service (Docker Container)</h2><p>Dokumentation: <a href=\"https://docs.openshift.org/latest/getting_started/administrators.html#running-in-a-docker-container\" target=\"_blank\" rel=\"external\">https://docs.openshift.org/latest/getting_started/administrators.html#running-in-a-docker-container</a></p><p><strong>The following command does,</strong></p><ul><li>starts OpenShift Origin listening on all interfaces on your host (0.0.0.0:8443),</li><li>starts the web console listening on all interfaces at /console (0.0.0.0:8443),</li><li>launches an etcd server to store persistent data, and</li><li>launches the Kubernetes system components.</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker \\</div><div class=\"line\"> run -d \\</div><div class=\"line\"> --name \"origin\" \\</div><div class=\"line\"> --privileged \\</div><div class=\"line\"> --pid=host \\</div><div class=\"line\"> --net=host \\</div><div class=\"line\"> -v /:/rootfs:ro \\</div><div class=\"line\"> -v /var/run:/var/run:rw \\</div><div class=\"line\"> -v /sys:/sys \\</div><div class=\"line\"> -v /var/lib/docker:/var/lib/docker:rw \\</div><div class=\"line\"> -v /var/lib/origin/openshift.local.volumes:/var/lib/origin/openshift.local.volumes:rslave \\</div><div class=\"line\"> -v /var/log:/var/log \\</div><div class=\"line\"> openshift/origin start</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --zone=public \\</div><div class=\"line\"> --add-port=8443/tcp \\</div><div class=\"line\"> --permanent</div><div class=\"line\"></div><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --zone=public \\</div><div class=\"line\"> --add-port=7001/tcp \\</div><div class=\"line\"> --permanent</div><div class=\"line\"></div><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --zone=public \\</div><div class=\"line\"> --add-port=53/tcp \\</div><div class=\"line\"> --permanent</div><div class=\"line\"></div><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --zone=trusted \\</div><div class=\"line\"> --change-interface=docker0</div><div class=\"line\"></div><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --reload</div></pre></td></tr></table></figure><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker \\</div><div class=\"line\"> login \\</div><div class=\"line\"> -u &lt;username&gt; \\</div><div class=\"line\"> -e &lt;any_email_address&gt; \\</div><div class=\"line\"> -p &lt;token_value&gt; \\</div><div class=\"line\"> &lt;registry_service_host:port&gt;</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker \\</div><div class=\"line\"> exec \\</div><div class=\"line\"> -it origin \\</div><div class=\"line\"> bash</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> login</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> new-project hochguertel-biz</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> new-app centos/ruby-22-centos7~https://github.com/openshift/ruby-ex.git</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> project hochguertel-biz</div></pre></td></tr></table></figure><h3 id=\"Get-Access-Token\"><a href=\"#Get-Access-Token\" class=\"headerlink\" title=\"Get Access Token:\"></a>Get Access Token:</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> whoami \\</div><div class=\"line\"> -t</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">GOicBd6Udbl-M1qY1dOk-rPJvm-tMmceI0LiWc8XXXX</div></pre></td></tr></table></figure><p></p><h1 id=\"NEW-APPROACH\"><a href=\"#NEW-APPROACH\" class=\"headerlink\" title=\"NEW APPROACH\"></a>NEW APPROACH</h1><p>Dokumentation:</p><ul><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/sect-Virtualization_Host_Configuration_and_Guest_Installation_Guide-Host_Installation-Installing_KVM_packages_on_an_existing_Red_Hat_Enterprise_Linux_system.html\" target=\"_blank\" rel=\"external\">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/sect-Virtualization_Host_Configuration_and_Guest_Installation_Guide-Host_Installation-Installing_KVM_packages_on_an_existing_Red_Hat_Enterprise_Linux_system.html</a></li><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Virtualization/sect-Virtualization-Installing_the_virtualization_packages-Installing_KVM_packages_on_an_existing_Red_Hat_Enterprise_Linux_system.html\" target=\"_blank\" rel=\"external\">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Virtualization/sect-Virtualization-Installing_the_virtualization_packages-Installing_KVM_packages_on_an_existing_Red_Hat_Enterprise_Linux_system.html</a></li><li><a href=\"https://linux.dell.com/files/whitepapers/KVM_Virtualization_in_RHEL_7_Made_Easy.pdf\" target=\"_blank\" rel=\"external\">https://linux.dell.com/files/whitepapers/KVM_Virtualization_in_RHEL_7_Made_Easy.pdf</a></li><li><a href=\"http://jensd.be/207/linux/install-and-use-centos-7-as-kvm-virtualization-host\" target=\"_blank\" rel=\"external\">http://jensd.be/207/linux/install-and-use-centos-7-as-kvm-virtualization-host</a></li><li><a href=\"https://access.redhat.com/articles/1344173\" target=\"_blank\" rel=\"external\">https://access.redhat.com/articles/1344173</a></li></ul><h2 id=\"Creating-VMs\"><a href=\"#Creating-VMs\" class=\"headerlink\" title=\"Creating VMs\"></a>Creating VMs</h2><p>Installation of VMs using the virt-install tool is very straight-forward. This tool can run in interactive or<br>non-interactive mode. Let’s use virt-install in non-interactive mode to create a RHEL 7 x64 VM named<br>vm1 with one virtual CPU, 1 GB memory and 20 GB of disk space:</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install \\</div><div class=\"line\"> --network bridge:br0 \\</div><div class=\"line\"> --name vm1 \\</div><div class=\"line\"> --ram=2048 \\</div><div class=\"line\"> --vcpus=2 \\</div><div class=\"line\"> --disk path=/vm-images/vm1.img,size=20 \\</div><div class=\"line\"> --os-type  linux \\</div><div class=\"line\"> --os-variant rhel7 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"> --cdrom /media/storage/installation_media/rhel-server-7.2-x86_64-dvd.iso</div></pre></td></tr></table></figure><h2 id=\"Enable-VNC-Screening\"><a href=\"#Enable-VNC-Screening\" class=\"headerlink\" title=\"Enable VNC Screening\"></a>Enable VNC Screening</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --zone=public \\</div><div class=\"line\"> --add-port=5900/tcp \\</div><div class=\"line\"> --permanent</div><div class=\"line\"></div><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --reload</div></pre></td></tr></table></figure><h2 id=\"Clone-VMs\"><a href=\"#Clone-VMs\" class=\"headerlink\" title=\"Clone VMs\"></a>Clone VMs</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> suspend vm1</div><div class=\"line\"></div><div class=\"line\">virt-clone \\</div><div class=\"line\"> --connect qemu:///system \\</div><div class=\"line\"> --original vm1 \\</div><div class=\"line\"> --name vm1-clone \\</div><div class=\"line\"> --file /vm-images/vm1-clone.img</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> resume vm1</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> start vm1-clone</div></pre></td></tr></table></figure><h2 id=\"Delete-VMs\"><a href=\"#Delete-VMs\" class=\"headerlink\" title=\"Delete VMs\"></a>Delete VMs</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> undefine vm1</div></pre></td></tr></table></figure><h2 id=\"Find-out-the-VNC-Display-Port\"><a href=\"#Find-out-the-VNC-Display-Port\" class=\"headerlink\" title=\"Find-out the VNC-Display Port:\"></a>Find-out the VNC-Display Port:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> vncdisplay vm2-clone</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> dumpxml vm2-clone \\</div><div class=\"line\"> | grep vnc</div></pre></td></tr></table></figure><h2 id=\"Zwistand-der-VM-sichern-gt-Clone-VMs-Script-virsh-save-vm\"><a href=\"#Zwistand-der-VM-sichern-gt-Clone-VMs-Script-virsh-save-vm\" class=\"headerlink\" title=\"Zwistand der VM sichern -&gt; Clone VMs (Script: virsh-save-vm)\"></a>Zwistand der VM sichern -&gt; Clone VMs (Script: <code>virsh-save-vm</code>)</h2><p><strong>File: <code>/usr/local/bin/virsh-save-vm</code></strong><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">howto</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"</span></div><div class=\"line\">    Saves the current state of an running Virtual-Machine.</div><div class=\"line\"></div><div class=\"line\">    Usage : <span class=\"variable\">$0</span> [ -n &lt;virtual-machine name&gt; ] [ -h ]</div><div class=\"line\"></div><div class=\"line\">    &lt;virtual-machine name&gt;   Selects the Virtual-Machine which is to save.</div><div class=\"line\">                             ... &lt;virtual-machine name&gt; has to be more than 1 character.</div><div class=\"line\">    \"</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">VM=</div><div class=\"line\">DATETIME=$(date +%d.%m.%Y-time-%H-%M)</div><div class=\"line\">SAVE_NAME=</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> == <span class=\"string\">\"\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        howto</div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#getopts, config</span></div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"built_in\">getopts</span> <span class=\"string\">\"n:h\"</span> OPTION</div><div class=\"line\"><span class=\"keyword\">do</span></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"variable\">$OPTION</span> <span class=\"keyword\">in</span></div><div class=\"line\">    n)</div><div class=\"line\">        VM=<span class=\"variable\">$OPTARG</span></div><div class=\"line\">        ;;</div><div class=\"line\">    h)</div><div class=\"line\">        howto</div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\">        ;;</div><div class=\"line\">    ?)</div><div class=\"line\">        howto</div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\">        ;;</div><div class=\"line\">    <span class=\"keyword\">esac</span></div><div class=\"line\"><span class=\"keyword\">done</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>\"</span> == <span class=\"string\">\"\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        howto</div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$&#123;#VM&#125;</span>\"</span> -le <span class=\"string\">\"1\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        howto</div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\">CHECK_IS_VM_PRESENT=$(virsh domid <span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>\"</span>)</div><div class=\"line\">CHECK_IS_VM_RUNNING=$(virsh list | grep -w <span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>\"</span> | grep <span class=\"string\">\"laufend\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$&#123;#CHECK_IS_VM_PRESENT&#125;</span>\"</span> -eq <span class=\"string\">\"0\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        <span class=\"comment\">#echo \"Fehler: Die Virtuelle Maschine '$&#123;VM&#125;' wurde nicht gefunden.\"</span></div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$&#123;CHECK_IS_VM_PRESENT&#125;</span>\"</span> == <span class=\"string\">\"-\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"Fehler: Die Virtuelle Maschine '<span class=\"variable\">$&#123;VM&#125;</span>' ist nicht gestartet.\"</span></div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$&#123;#CHECK_IS_VM_RUNNING&#125;</span>\"</span> -eq <span class=\"string\">\"0\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"Fehler: Die Virtuelle Maschine '<span class=\"variable\">$&#123;VM&#125;</span>' ist nicht gestartet.\"</span></div><div class=\"line\">        <span class=\"built_in\">exit</span></div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#---</span></div><div class=\"line\"></div><div class=\"line\">SAVE_NAME=<span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>-save-<span class=\"variable\">$&#123;DATETIME&#125;</span>\"</span></div><div class=\"line\"><span class=\"comment\"># vm1-clone-add-001.img</span></div><div class=\"line\">SAVE_NAME_DISK_VDB=<span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>-add-001-save-<span class=\"variable\">$&#123;DATETIME&#125;</span>\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># <span class=\"doctag\">TODO:</span></span></div><div class=\"line\"><span class=\"comment\"># - Check for Mutliple Disks, then create per disk and --file row.</span></div><div class=\"line\"><span class=\"comment\">#   (https://linux.die.net/man/1/virt-clone);</span></div><div class=\"line\"><span class=\"comment\"># - Additional disk file names: vm1-clone-add-001.img</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\">virsh <span class=\"built_in\">suspend</span> <span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>\"</span></div><div class=\"line\">virt-clone \\</div><div class=\"line\"> --connect qemu:///system \\</div><div class=\"line\"> --original <span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>\"</span> \\</div><div class=\"line\"> --name <span class=\"string\">\"<span class=\"variable\">$&#123;SAVE_NAME&#125;</span>\"</span> \\</div><div class=\"line\"> --file <span class=\"string\">\"/vm-images/<span class=\"variable\">$&#123;SAVE_NAME&#125;</span>.img\"</span> \\</div><div class=\"line\"> --file <span class=\"string\">\"/vm-images/<span class=\"variable\">$&#123;SAVE_NAME_DISK_VDB&#125;</span>.img\"</span></div><div class=\"line\">virsh resume <span class=\"string\">\"<span class=\"variable\">$&#123;VM&#125;</span>\"</span></div><div class=\"line\">virsh list</div><div class=\"line\">ls -lha <span class=\"string\">\"/vm-images/<span class=\"variable\">$&#123;SAVE_NAME&#125;</span>.img\"</span></div><div class=\"line\">ls -lha <span class=\"string\">\"/vm-images/<span class=\"variable\">$&#123;SAVE_NAME_DISK_VDB&#125;</span>.img\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\" \"</span></div><div class=\"line\">df -h /vm-images/</div><div class=\"line\"><span class=\"comment\">#echo \" \"</span></div><div class=\"line\"><span class=\"comment\">#virsh list --all</span></div></pre></td></tr></table></figure><p></p><h3 id=\"Usage\"><a href=\"#Usage\" class=\"headerlink\" title=\"Usage\"></a>Usage</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Saves the current state of an running Virtual-Machine.</div><div class=\"line\"></div><div class=\"line\">Usage : virsh-save-vm [ -n &lt;virtual-machine name&gt; ] [ -h ]</div><div class=\"line\"></div><div class=\"line\">&lt;virtual-machine name&gt;   Selects the Virtual-Machine which is to save.</div><div class=\"line\">                         ... &lt;virtual-machine name&gt; has to be more than 1 character.</div></pre></td></tr></table></figure><p><strong>Example</strong></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh-save-vm \\</div><div class=\"line\"> -n vm1-clone</div></pre></td></tr></table></figure><h1 id=\"ERSTELLEN-EINES-PRIVATEN-NETWERKES-FUR-DIE-GUEST-VM’S-VM’S-MIT-OPENSHIFT-SERVICES-openshift-hochguertel-local\"><a href=\"#ERSTELLEN-EINES-PRIVATEN-NETWERKES-FUR-DIE-GUEST-VM’S-VM’S-MIT-OPENSHIFT-SERVICES-openshift-hochguertel-local\" class=\"headerlink\" title=\"ERSTELLEN EINES PRIVATEN NETWERKES FÜR DIE GUEST-VM’S (VM’S MIT OPENSHIFT SERVICES) (openshift.hochguertel.local)\"></a>ERSTELLEN EINES PRIVATEN NETWERKES FÜR DIE GUEST-VM’S (VM’S MIT OPENSHIFT SERVICES) (<code>openshift.hochguertel.local</code>)</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">brctl \\</div><div class=\"line\"> addbr openshift-vms</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">brctl \\</div><div class=\"line\"> show</div><div class=\"line\"></div><div class=\"line\">ip \\</div><div class=\"line\"> link \\</div><div class=\"line\"> show openshift-vms</div></pre></td></tr></table></figure><h2 id=\"Create-a-tap-device-named-vm-vnic\"><a href=\"#Create-a-tap-device-named-vm-vnic\" class=\"headerlink\" title=\"Create a tap device named vm-vnic:\"></a>Create a tap device named <code>vm-vnic</code>:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">ip \\</div><div class=\"line\"> tuntap \\</div><div class=\"line\"> add \\</div><div class=\"line\"> dev vm-vnic \\</div><div class=\"line\"> mode tap</div><div class=\"line\"></div><div class=\"line\">ip \\</div><div class=\"line\"> link \\</div><div class=\"line\"> show vm-vnic</div></pre></td></tr></table></figure><h2 id=\"Let’s-add-vm-vnic-to-openshift-vms\"><a href=\"#Let’s-add-vm-vnic-to-openshift-vms\" class=\"headerlink\" title=\"Let’s add vm-vnic to openshift-vms:\"></a>Let’s add <code>vm-vnic</code> to <code>openshift-vms</code>:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">brctl \\</div><div class=\"line\"> addif openshift-vms \\</div><div class=\"line\"> vm-vnic</div><div class=\"line\"></div><div class=\"line\">brctl \\</div><div class=\"line\"> show</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">brctl \\</div><div class=\"line\"> showmacs openshift-vms</div></pre></td></tr></table></figure><h2 id=\"Remove-vm-vnic-and-openshift-vms\"><a href=\"#Remove-vm-vnic-and-openshift-vms\" class=\"headerlink\" title=\"Remove vm-vnic and openshift-vms:\"></a>Remove <code>vm-vnic</code> and <code>openshift-vms</code>:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">brctl \\</div><div class=\"line\"> delif openshift-vms \\</div><div class=\"line\"> vm-vnic</div><div class=\"line\"></div><div class=\"line\">brctl \\</div><div class=\"line\"> show openshift-vms</div><div class=\"line\"></div><div class=\"line\">ip \\</div><div class=\"line\"> tuntap \\</div><div class=\"line\"> del \\</div><div class=\"line\"> dev vm-vnic \\</div><div class=\"line\"> mode tap</div><div class=\"line\"></div><div class=\"line\">brctl \\</div><div class=\"line\"> delbr \\</div><div class=\"line\"> openshift-vms; echo $?</div></pre></td></tr></table></figure><h2 id=\"Create-Virtual-Isolated-Network-for-OpenShift-VM’s\"><a href=\"#Create-Virtual-Isolated-Network-for-OpenShift-VM’s\" class=\"headerlink\" title=\"Create Virtual Isolated Network for OpenShift VM’s:\"></a>Create Virtual Isolated Network for OpenShift VM’s:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \\</div><div class=\"line\"> \"&lt;network&gt;\" \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\"> openshift-vm-isolated.xml</span></div><div class=\"line\"></div><div class=\"line\">echo \\</div><div class=\"line\"> \"&lt;name&gt;openshift-vm-isolated&lt;/name&gt;\" \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\">&gt; openshift-vm-isolated.xml</span></div><div class=\"line\"></div><div class=\"line\">echo \\</div><div class=\"line\"> \"&lt;/network&gt;\" \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\">&gt; openshift-vm-isolated.xml</span></div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> net-define openshift-vm-isolated.xml</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> net-list --all</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> net-dumpxml openshift-vm-isolated</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> net-start openshift-vm-isolated</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> net-autostart openshift-vm-isolated</div><div class=\"line\"></div><div class=\"line\">virsh \\net-list \\</div><div class=\"line\"> --all</div></pre></td></tr></table></figure><h2 id=\"Add-Second-Network-Interace-to-OpenShift-VM’s\"><a href=\"#Add-Second-Network-Interace-to-OpenShift-VM’s\" class=\"headerlink\" title=\"Add Second Network Interace to OpenShift VM’s:\"></a>Add Second Network Interace to OpenShift VM’s:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> domiflist vm1-clone</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> domiflist vm2-clone</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> attach-interface \\</div><div class=\"line\"> --domain vm1-clone \\</div><div class=\"line\"> --source openshift-vm-isolated \\</div><div class=\"line\"> --type network \\</div><div class=\"line\"> --model virtio \\</div><div class=\"line\"> --config \\</div><div class=\"line\"> --live</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> domiflist vm1-clone</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> attach-interface \\</div><div class=\"line\"> --domain vm2-clone \\</div><div class=\"line\"> --source openshift-vm-isolated \\</div><div class=\"line\"> --type network \\</div><div class=\"line\"> --model virtio \\</div><div class=\"line\"> --config \\</div><div class=\"line\"> --live</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> domiflist vm2-clone</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> net-dumpxml openshift-vm-isolated \\</div><div class=\"line\"> | grep \"name=\"</div><div class=\"line\"></div><div class=\"line\">brctl \\</div><div class=\"line\"> show virbr4</div></pre></td></tr></table></figure><h3 id=\"Set-IP-Address-on-vm1-openshift-hochguertel-local\"><a href=\"#Set-IP-Address-on-vm1-openshift-hochguertel-local\" class=\"headerlink\" title=\"Set IP Address on vm1.openshift.hochguertel.local\"></a>Set IP Address on <code>vm1.openshift.hochguertel.local</code></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ifconfig eth1 172.47.0.1</div></pre></td></tr></table></figure><h3 id=\"Set-IP-Address-on-vm2-openshift-hochguertel-local\"><a href=\"#Set-IP-Address-on-vm2-openshift-hochguertel-local\" class=\"headerlink\" title=\"Set IP Address on vm2.openshift.hochguertel.local\"></a>Set IP Address on <code>vm2.openshift.hochguertel.local</code></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ifconfig eth1 172.47.0.2</div></pre></td></tr></table></figure><h3 id=\"Test-the-new-created-isolated-VM-network-openshift-vm-isolated\"><a href=\"#Test-the-new-created-isolated-VM-network-openshift-vm-isolated\" class=\"headerlink\" title=\"Test the new created isolated VM network openshift-vm-isolated\"></a>Test the new created isolated VM network <code>openshift-vm-isolated</code></h3><p><strong>From: <code>vm1.openshift.hochguertel.local</code></strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ping 172.47.0.1</div></pre></td></tr></table></figure><p></p><p><strong>From: <code>vm2.openshift.hochguertel.local</code></strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ping 172.47.0.1</div></pre></td></tr></table></figure><p></p><h1 id=\"VIRTUAL-MACHINE-vm1-clone\"><a href=\"#VIRTUAL-MACHINE-vm1-clone\" class=\"headerlink\" title=\"VIRTUAL-MACHINE (vm1-clone)\"></a>VIRTUAL-MACHINE (<code>vm1-clone</code>)</h1><p>Wir richten die Virtuellen Machine <code>vm1-clone</code> als OpenShift-Origin Service ein.</p><ul><li>Wir registrieren den neue Host <code>vm1.openshift.hochguertel.local</code> im Netzwerk.</li><li>Installieren den OpenShift-Origin Service Software auf dem Host <code>vm1.openshift.hochguertel.local</code>.</li><li>Konfigurieren den OpenShift-Origin Service so das er mit unserer Docker-Registrierung zusammenarbeitet.</li><li>Abschließend zeigen wir, wie wir ein paar Beispiel Anwendungen als Container auf dem OpenShift Service ausführen.</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssh \\</div><div class=\"line\"> -l root \\</div><div class=\"line\"> 192.168.0.104</div></pre></td></tr></table></figure><h2 id=\"Wir-registrieren-den-neue-Host-vm1-openshift-hochguertel-local-im-Netzwerk\"><a href=\"#Wir-registrieren-den-neue-Host-vm1-openshift-hochguertel-local-im-Netzwerk\" class=\"headerlink\" title=\"Wir registrieren den neue Host vm1.openshift.hochguertel.local im Netzwerk.\"></a>Wir registrieren den neue Host <code>vm1.openshift.hochguertel.local</code> im Netzwerk.</h2><ul><li>Setzen des Hostnamen’s der Virtuellen Maschine.</li><li>Wir registrieren den Hostnamen beim DNS Server des Netzwerks.</li><li>Überprüfen der DNS Registrierung ob die DNS Einträge korrekt aufgelöst werden.</li></ul><h3 id=\"Setzen-des-Hostnamen’s-der-Virtuellen-Maschine-vm1-clone\"><a href=\"#Setzen-des-Hostnamen’s-der-Virtuellen-Maschine-vm1-clone\" class=\"headerlink\" title=\"Setzen des Hostnamen’s der Virtuellen Maschine vm1-clone.\"></a>Setzen des Hostnamen’s der Virtuellen Maschine <code>vm1-clone</code>.</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"vm1.openshift.hochguertel.local\" &gt; /etc/hostname</div></pre></td></tr></table></figure><h3 id=\"Wir-registrieren-den-Hostnamen-beim-DNS-Server-atomic-hochguertel-local-des-Netzwerks\"><a href=\"#Wir-registrieren-den-Hostnamen-beim-DNS-Server-atomic-hochguertel-local-des-Netzwerks\" class=\"headerlink\" title=\"Wir registrieren den Hostnamen beim DNS Server (atomic.hochguertel.local) des Netzwerks.\"></a>Wir registrieren den Hostnamen beim DNS Server (<code>atomic.hochguertel.local</code>) des Netzwerks.</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"host-record=vm1.openshift,192.168.0.104\" &gt; /root/sym/dnsmasq.d/enp2s0-dnsmasq.d/0host_vm1.openshift</div><div class=\"line\">echo \"host-record=vm1.openshift.hochguertel.local,192.168.0.104\" &gt;&gt; /root/sym/dnsmasq.d/enp2s0-dnsmasq.d/0host_vm1.openshift</div><div class=\"line\">systemctl restart enp2s0-dnsmasq.service</div><div class=\"line\"></div><div class=\"line\">echo \"host-record=vm1.openshift,192.168.0.104\" &gt; /root/sym/dnsmasq.d/docker0-dnsmasq.d/0host_vm1.openshift</div><div class=\"line\">echo \"host-record=vm1.openshift.hochguertel.local,192.168.0.104\" &gt;&gt; /root/sym/dnsmasq.d/docker0-dnsmasq.d/0host_vm1.openshift</div><div class=\"line\">systemctl restart docker0-dnsmasq.service</div><div class=\"line\"></div><div class=\"line\">systemctl status docker0-dnsmasq.service enp2s0-dnsmasq.service</div></pre></td></tr></table></figure><h3 id=\"Uberprufen-der-DNS-Registrierung-ob-die-DNS-Eintrage-korrekt-aufgelost-werden\"><a href=\"#Uberprufen-der-DNS-Registrierung-ob-die-DNS-Eintrage-korrekt-aufgelost-werden\" class=\"headerlink\" title=\"Überprüfen der DNS Registrierung ob die DNS Einträge korrekt aufgelöst werden.\"></a>Überprüfen der DNS Registrierung ob die DNS Einträge korrekt aufgelöst werden.</h3><ul><li>Von mehreren Netzwerk Clients aus z.B. <code>openshift.hochguertel.local</code> o. <code>T430-1.hochguertel.local</code>.</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">ping vm1.openshift</div><div class=\"line\">ping vm1.openshift.hochguertel.local</div></pre></td></tr></table></figure><h2 id=\"Wir-installieren-den-OpenShift-Origin-Service\"><a href=\"#Wir-installieren-den-OpenShift-Origin-Service\" class=\"headerlink\" title=\"Wir installieren den OpenShift-Origin Service.\"></a>Wir installieren den OpenShift-Origin Service.</h2><h3 id=\"Subscription-Management\"><a href=\"#Subscription-Management\" class=\"headerlink\" title=\"Subscription Management\"></a>Subscription Management</h3><ul><li><a href=\"https://access.redhat.com/\" target=\"_blank\" rel=\"external\">RedHat.com - Subscription Manager</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">subscription-manager register</div><div class=\"line\">subscription-manager attach</div><div class=\"line\">subscription-manager refresh</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install nano</div></pre></td></tr></table></figure><h3 id=\"Network-Configuration-1\"><a href=\"#Network-Configuration-1\" class=\"headerlink\" title=\"Network Configuration\"></a>Network Configuration</h3><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-eth0</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">TYPE</span>=Ethernet</div><div class=\"line\"><span class=\"attr\">BOOTPROTO</span>=dhcp</div><div class=\"line\"><span class=\"attr\">DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERDNS</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV4_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6INIT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_AUTOCONF</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">NAME</span>=eth0</div><div class=\"line\"><span class=\"attr\">UUID</span>=<span class=\"number\">15192</span>a7a-<span class=\"number\">6968</span>-<span class=\"number\">44</span>de-b35f-aad885e1ae7e</div><div class=\"line\"><span class=\"attr\">DEVICE</span>=eth0</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">DNS1</span>=<span class=\"number\">192.168</span>.<span class=\"number\">0.103</span></div><div class=\"line\"><span class=\"attr\">DNS2</span>=<span class=\"number\">192.168</span>.<span class=\"number\">0.103</span></div></pre></td></tr></table></figure><p></p><p><strong><code>PEERDNS=no</code></strong> -&gt; to ensure that the DHCP-Server DNS Value is not added to <code>/etc/resolv.conf</code>. <a href=\"https://access.redhat.com/solutions/7412\" target=\"_blank\" rel=\"external\">RedHat.com - Solution #7412</a></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">reboot</div></pre></td></tr></table></figure><p><strong>File: <code>/etc/resolv.conf</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># ...</div><div class=\"line\">nameserver 192.168.0.103</div></pre></td></tr></table></figure><p></p><p><strong>Ausgangs Situation:</strong></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Generated by NetworkManager</div><div class=\"line\">search hochguertel.local openshift.hochguertel.local</div><div class=\"line\">nameserver 192.168.0.1</div></pre></td></tr></table></figure><h3 id=\"Wir-installieren-die-OpenShift-Origin-Service-Software\"><a href=\"#Wir-installieren-die-OpenShift-Origin-Service-Software\" class=\"headerlink\" title=\"Wir installieren die OpenShift-Origin Service Software.\"></a>Wir installieren die OpenShift-Origin Service Software.</h3><ul><li><a href=\"https://docs.openshift.org/latest/install_config/install/prerequisites.html\" target=\"_blank\" rel=\"external\">OpenShift.com - Prerequisites</a></li><li><a href=\"https://docs.openshift.org/latest/install_config/install/planning.html\" target=\"_blank\" rel=\"external\">OpenSHift.com - Planning</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">subscription-manager repos \\</div><div class=\"line\">    --enable=\"rhel-7-server-rpms\" \\</div><div class=\"line\">    --enable=\"rhel-7-server-extras-rpms\"</div><div class=\"line\"></div><div class=\"line\">yum install wget git net-tools bind-utils iptables-services bridge-utils bash-completion</div><div class=\"line\">yum update</div><div class=\"line\">yum install docker</div><div class=\"line\">sed -i '/OPTIONS=.*/c\\OPTIONS=\"--selinux-enabled --insecure-registry 172.30.0.0/16\"' /etc/sysconfig/docker</div><div class=\"line\">systemctl is-active docker</div><div class=\"line\">systemctl enable docker &amp;&amp; systemctl start docker &amp;&amp; systemctl status docker -l</div><div class=\"line\">systemctl is-active docker</div><div class=\"line\"></div><div class=\"line\">firewall-cmd --zone=public --add-port=8443/tcp --permanent</div><div class=\"line\">firewall-cmd --zone=public --add-port=8080/tcp --permanent</div><div class=\"line\">firewall-cmd --zone=trusted --change-interface=docker0</div><div class=\"line\">firewall-cmd --reload</div><div class=\"line\"></div><div class=\"line\">cd /usr/src/</div><div class=\"line\">wget https://github.com/openshift/origin/releases/download/v1.3.2/openshift-origin-server-v1.3.2-ac1d579-linux-64bit.tar.gz</div><div class=\"line\">tar xfvz openshift-origin-server-v1.3.2-ac1d579-linux-64bit.tar.gz</div><div class=\"line\">cd openshift-origin-server-v1.3.2-ac1d579-linux-64bit</div><div class=\"line\"></div><div class=\"line\">export PATH=\"$(pwd)\":$PATH</div><div class=\"line\">export KUBECONFIG=\"$(pwd)\"/openshift.local.config/master/admin.kubeconfig</div><div class=\"line\">export CURL_CA_BUNDLE=\"$(pwd)\"/openshift.local.config/master/ca.crt</div><div class=\"line\">chmod +r \"$(pwd)\"/openshift.local.config/master/admin.kubeconfig</div><div class=\"line\"></div><div class=\"line\">openshift start</div></pre></td></tr></table></figure><h3 id=\"Wir-registrieren-fur-den-OpenShift-Service-eine-Wildcard-Subdomaine-Wildcard-Hostnamen-beim-DNS-Server-des-Netzwerks-atomic-hochguertel-local\"><a href=\"#Wir-registrieren-fur-den-OpenShift-Service-eine-Wildcard-Subdomaine-Wildcard-Hostnamen-beim-DNS-Server-des-Netzwerks-atomic-hochguertel-local\" class=\"headerlink\" title=\"Wir registrieren für den OpenShift Service eine Wildcard-Subdomaine Wildcard.Hostnamen beim DNS Server des Netzwerks atomic.hochguertel.local.\"></a>Wir registrieren für den OpenShift Service eine Wildcard-Subdomaine <code>Wildcard.Hostnamen</code> beim DNS Server des Netzwerks <code>atomic.hochguertel.local</code>.</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"address=/vm1.openshift/192.168.0.104\" &gt; /root/sym/dnsmasq.d/enp2s0-dnsmasq.d/0host_wildcard.vm1.openshift</div><div class=\"line\">echo \"address=/vm1.openshift.hochguertel.local/192.168.0.104\" &gt;&gt; /root/sym/dnsmasq.d/enp2s0-dnsmasq.d/0host_wildcard.vm1.openshift</div><div class=\"line\">systemctl restart enp2s0-dnsmasq.service; systemctl status enp2s0-dnsmasq.service</div><div class=\"line\"></div><div class=\"line\">echo \"address=/vm1.openshift/192.168.0.104\" &gt; /root/sym/dnsmasq.d/docker0-dnsmasq.d/0host_wildcard.vm1.openshift</div><div class=\"line\">echo \"address=/vm1.openshift.hochguertel.local/192.168.0.104\" &gt;&gt; /root/sym/dnsmasq.d/docker0-dnsmasq.d/0host_wildcard.vm1.openshift</div><div class=\"line\">systemctl restart docker0-dnsmasq.service; systemctl status docker0-dnsmasq.service</div><div class=\"line\"></div><div class=\"line\">systemctl status docker0-dnsmasq.service enp2s0-dnsmasq.service</div></pre></td></tr></table></figure><h2 id=\"Openshift-Origin-Router-einrichten\"><a href=\"#Openshift-Origin-Router-einrichten\" class=\"headerlink\" title=\"Openshift-Origin Router einrichten\"></a>Openshift-Origin Router einrichten</h2><ul><li><a href=\"http://sudhaker.com/10/install-the-latest-openshift-v3-on-centos-7-1\" target=\"_blank\" rel=\"external\">sudhaker.com - Installation von OpenShift v3 on CentOS 7.1</a></li></ul><p><strong>to create an admin user for management</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">oadm \\</div><div class=\"line\"> policy \\</div><div class=\"line\"> add-cluster-role-to-user cluster-admin admin</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">oadm \\</div><div class=\"line\"> policy \\</div><div class=\"line\"> add-scc-to-user hostnetwork -z router</div><div class=\"line\"></div><div class=\"line\">oadm \\</div><div class=\"line\"> router \\</div><div class=\"line\"> router \\</div><div class=\"line\"> --replicas=1 \\</div><div class=\"line\"> --service-account=router</div></pre></td></tr></table></figure><h2 id=\"Verify\"><a href=\"#Verify\" class=\"headerlink\" title=\"Verify\"></a>Verify</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> status</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 ~]# oc status</div><div class=\"line\">In project default on server https://192.168.0.104:8443</div><div class=\"line\"></div><div class=\"line\">svc/kubernetes - 172.30.0.1 ports 443, 53-&gt;8053, 53-&gt;8053</div><div class=\"line\"></div><div class=\"line\">svc/router - 172.30.32.87 ports 80, 443, 1936</div><div class=\"line\">  dc/router deploys docker.io/openshift/origin-haproxy-router:v1.3.2</div><div class=\"line\">    deployment #1 running for 20 seconds - 1 pod</div><div class=\"line\"></div><div class=\"line\">View details with 'oc describe &lt;resource&gt;/&lt;name&gt;' or list everything with 'oc get all'.</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 ~]# oadm policy add-cluster-role-to-user cluster-admin admin</div><div class=\"line\">[root@openshift1 ~]# oadm policy add-scc-to-user hostnetwork -z router</div><div class=\"line\">[root@openshift1 ~]# oadm router router --replicas=1 --service-account=router</div><div class=\"line\">info: password for stats user admin has been set to uudBGre8uF</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Creating router router ...</span></div><div class=\"line\">    serviceaccount \"router\" created</div><div class=\"line\">    clusterrolebinding \"router-router-role\" created</div><div class=\"line\">    deploymentconfig \"router\" created</div><div class=\"line\">    service \"router\" created</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Success</span></div><div class=\"line\">[root@openshift1 ~]#</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 ~]# oc status</div><div class=\"line\">In project default on server https://openshift1.kvm.hochguertel.local:8443</div><div class=\"line\"></div><div class=\"line\">svc/kubernetes - 172.30.0.1 ports 443, 53-&gt;8053, 53-&gt;8053</div><div class=\"line\"></div><div class=\"line\">svc/router - 172.30.34.251 ports 80, 443, 1936</div><div class=\"line\">  dc/router deploys docker.io/openshift/origin-haproxy-router:v1.3.2</div><div class=\"line\">    deployment #1 deployed 53 seconds ago - 1 pod</div><div class=\"line\"></div><div class=\"line\">View details with 'oc describe &lt;resource&gt;/&lt;name&gt;' or list everything with 'oc get all'.</div><div class=\"line\">[root@openshift1 ~]#</div></pre></td></tr></table></figure><h2 id=\"Zweite-Festplatte-anlegen-openshift-hochguertel-local\"><a href=\"#Zweite-Festplatte-anlegen-openshift-hochguertel-local\" class=\"headerlink\" title=\"Zweite Festplatte anlegen openshift.hochguertel.local\"></a>Zweite Festplatte anlegen <code>openshift.hochguertel.local</code></h2><p>Eine zweite Fesplatte der VM: vm1.openshift.hochguertel.local hinzufügen, mit 50GB Speicherplatz.</p><h3 id=\"Create-a-50-GB-non-sparse-file\"><a href=\"#Create-a-50-GB-non-sparse-file\" class=\"headerlink\" title=\"Create a 50-GB non-sparse file:\"></a>Create a 50-GB non-sparse file:</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dd if=/dev/zero of=/vm-images/vm1-clone-add-001.img bs=1M count=51200</div></pre></td></tr></table></figure><h3 id=\"Shutdown-the-VM\"><a href=\"#Shutdown-the-VM\" class=\"headerlink\" title=\"Shutdown the VM:\"></a>Shutdown the VM:</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> shutdown vm1-clone</div></pre></td></tr></table></figure><h3 id=\"Zweite-Festplatte-hinzufugen\"><a href=\"#Zweite-Festplatte-hinzufugen\" class=\"headerlink\" title=\"Zweite Festplatte hinzufügen\"></a>Zweite Festplatte hinzufügen</h3><p>Add an extra entry for <code>disk</code> in the VM’s XML (<code>vm1-clone.xml</code>) file in <code>/etc/libvirt/qemu</code>.<br>You can look copy &amp; paste the entry for your mail storage device and just change the target and address tags.<br>For example:</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> edit vm1-clone</div></pre></td></tr></table></figure><p><strong>Examples:</strong><br></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span> <span class=\"attr\">cache</span>=<span class=\"string\">'none'</span> <span class=\"attr\">io</span>=<span class=\"string\">'threads'</span>/&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm1.img'</span>/&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x04'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div></pre></td></tr></table></figure><p></p><p><strong>Make sure that:</strong></p><ul><li>the name of the device (i.e. vdb) follows the first one in sequential order in the address tag, -&gt; <strong>dev=’vda’</strong></li><li>use a <em><strong>unique slot</strong></em> address <strong>(check the address tag of ALL devices, not just storage devices)</strong> -&gt; <strong>slot=’0x04’</strong></li></ul><p><strong>Or:</strong></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'qcow2'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm1-clone.img'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x06'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div></pre></td></tr></table></figure><p><strong>make sure that:</strong></p><ul><li>the name of the device (i.e. vdb) follows the first one in sequential order in the address tag, -&gt; <strong>dev=’vda’</strong></li><li>use a <em><strong>unique slot</strong></em> address <strong>(check the address tag of ALL devices, not just storage devices)</strong> -&gt; <strong>slot=’0x06’</strong></li></ul><p><strong>Add:</strong></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span> <span class=\"attr\">cache</span>=<span class=\"string\">'none'</span> <span class=\"attr\">io</span>=<span class=\"string\">'threads'</span>/&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm1-clone-add-001.img'</span>/&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vdb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x08'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div></pre></td></tr></table></figure><p><strong>make sure that:</strong></p><ul><li>the name of the device (i.e. vdb) follows the first one in sequential order in the address tag, -&gt; <strong>dev=’vdb’</strong></li><li>use a <em><strong>unique slot</strong></em> address <strong>(check the address tag of ALL devices, not just storage devices)</strong> -&gt; <strong>slot=’0x08’</strong></li></ul><h3 id=\"Full-Content-of-Qemue-Guest-VM-XML-File-with-second-harddisk-added\"><a href=\"#Full-Content-of-Qemue-Guest-VM-XML-File-with-second-harddisk-added\" class=\"headerlink\" title=\"Full Content of Qemue Guest-VM XML-File with second harddisk added:\"></a>Full Content of Qemue Guest-VM XML-File with second harddisk added:</h3><p><strong>File: <code>/etc/libvirt/qemu/vm1-clone.xml</code></strong><br></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">domain</span> <span class=\"attr\">type</span>=<span class=\"string\">'kvm'</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>vm1-clone<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">uuid</span>&gt;</span>f199b841-1b6d-4ed9-9208-e758b93700c4<span class=\"tag\">&lt;/<span class=\"name\">uuid</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">memory</span> <span class=\"attr\">unit</span>=<span class=\"string\">'KiB'</span>&gt;</span>2097152<span class=\"tag\">&lt;/<span class=\"name\">memory</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">currentMemory</span> <span class=\"attr\">unit</span>=<span class=\"string\">'KiB'</span>&gt;</span>1048576<span class=\"tag\">&lt;/<span class=\"name\">currentMemory</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">vcpu</span> <span class=\"attr\">placement</span>=<span class=\"string\">'static'</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">vcpu</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">os</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">type</span> <span class=\"attr\">arch</span>=<span class=\"string\">'x86_64'</span> <span class=\"attr\">machine</span>=<span class=\"string\">'pc-i440fx-rhel7.0.0'</span>&gt;</span>hvm<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boot</span> <span class=\"attr\">dev</span>=<span class=\"string\">'hd'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">os</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">features</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">acpi</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">apic</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">features</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">cpu</span> <span class=\"attr\">mode</span>=<span class=\"string\">'custom'</span> <span class=\"attr\">match</span>=<span class=\"string\">'exact'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">fallback</span>=<span class=\"string\">'allow'</span>&gt;</span>Nehalem<span class=\"tag\">&lt;/<span class=\"name\">model</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">cpu</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">clock</span> <span class=\"attr\">offset</span>=<span class=\"string\">'utc'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'rtc'</span> <span class=\"attr\">tickpolicy</span>=<span class=\"string\">'catchup'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'pit'</span> <span class=\"attr\">tickpolicy</span>=<span class=\"string\">'delay'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'hpet'</span> <span class=\"attr\">present</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">clock</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_poweroff</span>&gt;</span>destroy<span class=\"tag\">&lt;/<span class=\"name\">on_poweroff</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_reboot</span>&gt;</span>restart<span class=\"tag\">&lt;/<span class=\"name\">on_reboot</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_crash</span>&gt;</span>restart<span class=\"tag\">&lt;/<span class=\"name\">on_crash</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">pm</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">suspend-to-mem</span> <span class=\"attr\">enabled</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">suspend-to-disk</span> <span class=\"attr\">enabled</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">pm</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">devices</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">emulator</span>&gt;</span>/usr/libexec/qemu-kvm<span class=\"tag\">&lt;/<span class=\"name\">emulator</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'qcow2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm1-clone.img'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x06'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span> <span class=\"attr\">cache</span>=<span class=\"string\">'none'</span> <span class=\"attr\">io</span>=<span class=\"string\">'threads'</span>/&gt;</span></div><div class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm1-clone-add-001.img'</span>/&gt;</span></div><div class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vdb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x08'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'cdrom'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'hda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ide'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">readonly</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'drive'</span> <span class=\"attr\">controller</span>=<span class=\"string\">'0'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">target</span>=<span class=\"string\">'0'</span> <span class=\"attr\">unit</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-ehci1'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x7'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci1'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span> <span class=\"attr\">multifunction</span>=<span class=\"string\">'on'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci2'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci3'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'4'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'pci-root'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'ide'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x01'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio-serial'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x04'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'bridge'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:04:3e:1f'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">bridge</span>=<span class=\"string\">'br0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x03'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serial</span> <span class=\"attr\">type</span>=<span class=\"string\">'pty'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">port</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">serial</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">console</span> <span class=\"attr\">type</span>=<span class=\"string\">'pty'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">type</span>=<span class=\"string\">'serial'</span> <span class=\"attr\">port</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">console</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">channel</span> <span class=\"attr\">type</span>=<span class=\"string\">'unix'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span> <span class=\"attr\">name</span>=<span class=\"string\">'org.qemu.guest_agent.0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio-serial'</span> <span class=\"attr\">controller</span>=<span class=\"string\">'0'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">port</span>=<span class=\"string\">'1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">channel</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'tablet'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'usb'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">port</span>=<span class=\"string\">'1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'mouse'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ps2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'keyboard'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ps2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">graphics</span> <span class=\"attr\">type</span>=<span class=\"string\">'vnc'</span> <span class=\"attr\">port</span>=<span class=\"string\">'-1'</span> <span class=\"attr\">autoport</span>=<span class=\"string\">'yes'</span> <span class=\"attr\">listen</span>=<span class=\"string\">'0.0.0.0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">listen</span> <span class=\"attr\">type</span>=<span class=\"string\">'address'</span> <span class=\"attr\">address</span>=<span class=\"string\">'0.0.0.0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">graphics</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'cirrus'</span> <span class=\"attr\">vram</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">heads</span>=<span class=\"string\">'1'</span> <span class=\"attr\">primary</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x02'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">memballoon</span> <span class=\"attr\">model</span>=<span class=\"string\">'virtio'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x07'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">memballoon</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">devices</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">domain</span>&gt;</span></div></pre></td></tr></table></figure><p></p><h3 id=\"Restart-the-VM-from-the-updated-XML-configuration-file\"><a href=\"#Restart-the-VM-from-the-updated-XML-configuration-file\" class=\"headerlink\" title=\"Restart the VM from the updated XML configuration file:\"></a>Restart the VM from the updated XML configuration file:</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> create /etc/libvirt/qemu/vm1-clone.xml</div></pre></td></tr></table></figure><h3 id=\"Docker-Storage\"><a href=\"#Docker-Storage\" class=\"headerlink\" title=\"Docker Storage\"></a>Docker Storage</h3><ul><li><a href=\"https://docs.openshift.org/latest/install_config/install/host_preparation.html\" target=\"_blank\" rel=\"external\">Openshift.com - Host Preparations</a></li></ul><p><strong>File: <code>/etc/sysconfig/docker-storage-setup</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVS</span>=/dev/vdb</div><div class=\"line\"><span class=\"attr\">VG</span>=docker-vg</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl \\</div><div class=\"line\"> stop docker</div><div class=\"line\"></div><div class=\"line\">rm -rf /var/lib/docker</div><div class=\"line\"></div><div class=\"line\">docker-storage-setup</div><div class=\"line\"></div><div class=\"line\">systemctl \\</div><div class=\"line\"> start docker</div><div class=\"line\"> &amp;&amp; \\</div><div class=\"line\"> systemctl \\</div><div class=\"line\">  status docker</div></pre></td></tr></table></figure><h2 id=\"Konfigurieren-der-Zusammenarbeit-von-Openshift-mit-unserer-Nexus3-Docker-Registrierung\"><a href=\"#Konfigurieren-der-Zusammenarbeit-von-Openshift-mit-unserer-Nexus3-Docker-Registrierung\" class=\"headerlink\" title=\"Konfigurieren der Zusammenarbeit von Openshift mit unserer Nexus3 Docker-Registrierung.\"></a>Konfigurieren der Zusammenarbeit von Openshift mit unserer Nexus3 Docker-Registrierung.</h2><p>Auf der <code>vm1-clone</code> wird der Docker Service konfiguriert um mit unserer privaten (Nexus3) Docker-Registrierung zusammenarbeiten kann.</p><ul><li><p>Hinzufügen der Docker Registrierung</p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">ADD_REGISTRY</span>=<span class=\"string\">' --add-registry registry.hochguertel.local '</span></div><div class=\"line\"><span class=\"attr\">INSECURE_REGISTRY</span>=<span class=\"string\">' --insecure-registry registry.hochguertel.local --insecure-registry internal-registry.hochguertel.local --insecure-registry 172.30.0.0/16 '</span></div></pre></td></tr></table></figure></li><li><p>Neustarten des Docker Dienstes</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl \\</div><div class=\"line\"> restart \\</div><div class=\"line\"> docker</div></pre></td></tr></table></figure></li><li><p>Status des Docker Dienstes abrufen</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl \\</div><div class=\"line\"> status \\</div><div class=\"line\"> docker</div></pre></td></tr></table></figure></li><li><p>Anmelden an der Registrierung</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker login registry.hochguertel.local</div><div class=\"line\"><span class=\"meta\">-&gt;</span><span class=\"bash\"> admin</span></div><div class=\"line\"><span class=\"meta\">-&gt;</span><span class=\"bash\"> &lt;SECRET&gt;</span></div><div class=\"line\"><span class=\"meta\">-&gt;</span><span class=\"bash\"> e-Mail sollte nicht gefragt werden!</span></div></pre></td></tr></table></figure></li><li><p>Testen der privaten Registrierung</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker \\</div><div class=\"line\"> search \\</div><div class=\"line\"> registry.hochguertel.local/hochguertel-local/openshift/springboot-maven3-centos7</div></pre></td></tr></table></figure></li></ul><p><strong>File: <code>/etc/sysconfig/docker</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"># /etc/sysconfig/docker</div><div class=\"line\"></div><div class=\"line\"># Modify these options if you want to change the way the docker daemon runs</div><div class=\"line\">#OPTIONS='--selinux-enabled --log-driver=journald'</div><div class=\"line\">OPTIONS=' --log-driver=journald '</div><div class=\"line\"></div><div class=\"line\">if [ -z \"$&#123;DOCKER_CERT_PATH&#125;\" ]; then</div><div class=\"line\">    DOCKER_CERT_PATH=/etc/docker</div><div class=\"line\">fi</div><div class=\"line\"></div><div class=\"line\"># If you want to add your own registry to be used for docker search and docker</div><div class=\"line\"># pull use the ADD_REGISTRY option to list a set of registries, each prepended</div><div class=\"line\"># with --add-registry flag. The first registry added will be the first registry</div><div class=\"line\"># searched.</div><div class=\"line\">ADD_REGISTRY=' --add-registry registry.hochguertel.local --add-registry registry.access.redhat.com '</div><div class=\"line\"></div><div class=\"line\"># If you want to block registries from being used, uncomment the BLOCK_REGISTRY</div><div class=\"line\"># option and give it a set of registries, each prepended with --block-registry</div><div class=\"line\"># flag. For example adding docker.io will stop users from downloading images</div><div class=\"line\"># from docker.io</div><div class=\"line\">#BLOCK_REGISTRY=' --block-registry=all '</div><div class=\"line\"></div><div class=\"line\"># If you have a registry secured with https but do not have proper certs</div><div class=\"line\"># distributed, you can tell docker to not look for full authorization by</div><div class=\"line\"># adding the registry to the INSECURE_REGISTRY line and uncommenting it.</div><div class=\"line\"># INSECURE_REGISTRY='--insecure-registry'</div><div class=\"line\">INSECURE_REGISTRY=' --insecure-registry registry.hochguertel.local --insecure-registry internal-registry.hochguertel.local --insecure-registry 172.30.0.0/16 '</div><div class=\"line\"></div><div class=\"line\"># On an SELinux system, if you remove the --selinux-enabled option, you</div><div class=\"line\"># also need to turn on the docker_transition_unconfined boolean.</div><div class=\"line\"># setsebool -P docker_transition_unconfined 1</div><div class=\"line\"></div><div class=\"line\"># Location used for temporary files, such as those created by</div><div class=\"line\"># docker load and build operations. Default is /var/lib/docker/tmp</div><div class=\"line\"># Can be overriden by setting the following environment variable.</div><div class=\"line\"># DOCKER_TMPDIR=/var/tmp</div><div class=\"line\"></div><div class=\"line\"># Controls the /etc/cron.daily/docker-logrotate cron job status.</div><div class=\"line\"># To disable, uncomment the line below.</div><div class=\"line\"># LOGROTATE=false</div><div class=\"line\">#</div><div class=\"line\"></div><div class=\"line\"># docker-latest daemon can be used by starting the docker-latest unitfile.</div><div class=\"line\"># To use docker-latest client, uncomment below line</div><div class=\"line\">#DOCKERBINARY=/usr/bin/docker-latest</div></pre></td></tr></table></figure><p></p><h2 id=\"Einrichten-der-OpenShift-Internal-Docker-Registry\"><a href=\"#Einrichten-der-OpenShift-Internal-Docker-Registry\" class=\"headerlink\" title=\"Einrichten der OpenShift Internal Docker-Registry\"></a>Einrichten der OpenShift Internal Docker-Registry</h2><p>Der OpenShift Servie nutzt die interne Docker Registerung für den Build-Vorgang. Die Artefakte die beim Build entstehen bleiben im Build Server, können bei bedarf zu einer externen Registrierung (nexus3 o. docker.io) deployed werden.</p><ul><li><a href=\"https://docs.openshift.org/latest/install_config/registry/index.html\" target=\"_blank\" rel=\"external\">OpenShift.com - Configuration, (Docker-)Registry</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">find \\</div><div class=\"line\"> -iname \\</div><div class=\"line\"> \"admin.kubeconfig\"</div><div class=\"line\"></div><div class=\"line\">find \\</div><div class=\"line\"> /usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit \\</div><div class=\"line\"> -iname \\</div><div class=\"line\"> \"admin.kubeconfig\"</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">oadm \\</div><div class=\"line\"> registry \\</div><div class=\"line\"> --config=./openshift.local.config/master/admin.kubeconfig \\</div><div class=\"line\"> --service-account=registry</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@vm1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oadm registry --config=./openshift.local.config/master/admin.kubeconfig --service-account=registry</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Creating registry registry ...</span></div><div class=\"line\">    serviceaccount \"registry\" created</div><div class=\"line\">    clusterrolebinding \"registry-registry-role\" created</div><div class=\"line\">    deploymentconfig \"docker-registry\" created</div><div class=\"line\">    service \"docker-registry\" created</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Success</span></div></pre></td></tr></table></figure><p></p><h2 id=\"Workaround-Um-Openshift-Anwendungen-von-Container-Images-aus-der-externem-privaten-Nexus3-Docker-Registrierung-zu-erstellen\"><a href=\"#Workaround-Um-Openshift-Anwendungen-von-Container-Images-aus-der-externem-privaten-Nexus3-Docker-Registrierung-zu-erstellen\" class=\"headerlink\" title=\"Workaround: Um Openshift-Anwendungen von Container-Images aus der (externem, privaten) Nexus3 Docker-Registrierung zu erstellen:\"></a>Workaround: Um Openshift-Anwendungen von Container-Images aus der (externem, privaten) Nexus3 Docker-Registrierung zu erstellen:</h2><ul><li><a href=\"http://stackoverflow.com/questions/36655281/openshift-origin-run-app-against-insecure-registry-yields-stuck-pod-with-error\" target=\"_blank\" rel=\"external\">Stackoverflow.com - Yield&amp;Pod Error: Run a App in OpenShift against an insecure registry</a></li></ul><ol><li>Importieren des Containers Images aus der Privaten Registrierung</li><li>Erstellen der Anwendung mit dem Importierten Container Image</li></ol><p>This are the steps I performed to use an image from another Docker registry (even outside my cluster).</p><p>My registry:</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">https://ec2-xx-xx-xx-xx.eu-central-1.compute.amazonaws.com:5000</div></pre></td></tr></table></figure><p>I create the project (in OS) to where I want to push.</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> new-project test</div></pre></td></tr></table></figure><p>I’m inside the project and I’ll create a secret so that my openshift is able to access my registry:</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> new-dockercfg mysecret \\</div><div class=\"line\"> --docker-server=https://ec2-xx-xx-xx-xx.eu-central-1.compute.amazonaws.com:5000 \\</div><div class=\"line\"> --docker-username=testuser \\</div><div class=\"line\"> --docker-password=testpassword \\</div><div class=\"line\"> --docker-email=any@mail.com</div></pre></td></tr></table></figure><p>Add secret to service accounts</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> add serviceaccount/default \\</div><div class=\"line\"> secrets/mysecret \\</div><div class=\"line\"> --for=pull</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> add serviceaccount/builder \\</div><div class=\"line\"> secrets/mysecret</div></pre></td></tr></table></figure><p>import image stream</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc import-image \\</div><div class=\"line\"> --insecure ec2-xx-xx-xx-xx.eu-central-1.compute.amazonaws.com:5000/test/name-of-image:1 \\</div><div class=\"line\"> --confirm</div></pre></td></tr></table></figure><p>Now you’re able to create a</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc new-app \\</div><div class=\"line\"> --insecure-registry &lt;image-stream-name&gt;:tag</div></pre></td></tr></table></figure><ul><li>A better way is to push your images to the OpenShift registry.</li><li>Than it isn’t necessary to create a secret and to perform the oc import.</li><li>You’re able to expose a registry (secure registry) so you can access the registry from outside your cluster to push images.</li></ul><h2 id=\"OpenShift-mit-dem-System-starten\"><a href=\"#OpenShift-mit-dem-System-starten\" class=\"headerlink\" title=\"OpenShift mit dem System starten:\"></a>OpenShift mit dem System starten:</h2><p><strong>File: <code>/etc/profile.d/openshift.sh</code></strong><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat &gt; /etc/profile.d/openshift.sh &lt;&lt; <span class=\"string\">'__EOF__'</span></div><div class=\"line\"><span class=\"built_in\">export</span> OPENSHIFT=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit</div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$OPENSHIFT</span>:<span class=\"variable\">$PATH</span></div><div class=\"line\"><span class=\"built_in\">export</span> KUBECONFIG=<span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/openshift.local.config/master/admin.kubeconfig</div><div class=\"line\"><span class=\"built_in\">export</span> CURL_CA_BUNDLE=<span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/openshift.local.config/master/ca.crt</div><div class=\"line\">sudo chmod +r <span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/openshift.local.config/master/admin.kubeconfig</div><div class=\"line\">__EOF__</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">chmod 755 /etc/profile.d/openshift.sh</div></pre></td></tr></table></figure><p><strong>File: <code>/usr/lib/systemd/system/openshift‐origin.service</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat &gt; /usr/lib/systemd/system/openshift‐origin.service &lt;&lt; '__EOF__'</div><div class=\"line\">[Unit]</div><div class=\"line\">Description=Origin Master Service</div><div class=\"line\">After=docker.service</div><div class=\"line\">Wants=docker.service</div><div class=\"line\">Requires=docker.service</div><div class=\"line\"></div><div class=\"line\">[Service]</div><div class=\"line\">Type=notify</div><div class=\"line\">NotifyAccess=all</div><div class=\"line\">Restart=always</div><div class=\"line\">RestartSec=10s</div><div class=\"line\">ExecStart=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/openshift start</div><div class=\"line\">WorkingDirectory=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/</div><div class=\"line\"></div><div class=\"line\">[Install]</div><div class=\"line\">WantedBy=multi-user.target</div><div class=\"line\">__EOF__</div></pre></td></tr></table></figure><p></p><h2 id=\"Abschliesend-ein-paar-Beispiele-Anwendung-auf-dem-OpenShift-Service-ausrollen\"><a href=\"#Abschliesend-ein-paar-Beispiele-Anwendung-auf-dem-OpenShift-Service-ausrollen\" class=\"headerlink\" title=\"Abschließend ein paar Beispiele Anwendung auf dem OpenShift Service ausrollen.\"></a>Abschließend ein paar Beispiele Anwendung auf dem OpenShift Service ausrollen.</h2><h3 id=\"Add-Image-Stream-Tag-demo-hochguertel-biz-openshift-springboot-maven3-centos7-latest\"><a href=\"#Add-Image-Stream-Tag-demo-hochguertel-biz-openshift-springboot-maven3-centos7-latest\" class=\"headerlink\" title=\"Add Image-Stream Tag: demo-hochguertel-biz/openshift-springboot-maven3-centos7:latest\"></a>Add Image-Stream Tag: demo-hochguertel-biz/openshift-springboot-maven3-centos7:latest</h3><ul><li>import docker image from external private registry</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> tag \\</div><div class=\"line\"> --insecure=true \\</div><div class=\"line\"> --source=docker \\</div><div class=\"line\"> registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest \\</div><div class=\"line\"> demo-hochguertel-biz/openshift-springboot-maven3-centos7:latest</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@ostree docker-springboot-maven3-centos]# oc tag --insecure=true --source=docker registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest demo-hochguertel-biz/openshift-springboot-maven3-centos7:latest</div><div class=\"line\">Tag openshift-springboot-maven3-centos7:latest set to registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest.</div></pre></td></tr></table></figure><p></p><h3 id=\"Spring-Boot-Anwendung-als-Container-Anwendung-mittels-des-S2I-fahigen-Container-Images-erstellen\"><a href=\"#Spring-Boot-Anwendung-als-Container-Anwendung-mittels-des-S2I-fahigen-Container-Images-erstellen\" class=\"headerlink\" title=\"Spring Boot Anwendung als Container Anwendung mittels des S2I-fähigen Container-Images erstellen\"></a>Spring Boot Anwendung als Container Anwendung mittels des S2I-fähigen Container-Images erstellen</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">s2i \\</div><div class=\"line\"> build \\</div><div class=\"line\"> git://git@gogs.hochguertel.local:hochguertelto/openshift-demo-boot-project.git \\</div><div class=\"line\"> registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest \\</div><div class=\"line\"> demo-boot-project</div></pre></td></tr></table></figure><ul><li>Docker Container aus einer privaten docker-registrierung in die OpenShift Docker-Image registrierung importieren. (* ist nötig,…)<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> new-dockercfg mysecret \\</div><div class=\"line\"> --docker-server=https://registry.hochguertel.local \\</div><div class=\"line\"> --docker-username=admin \\</div><div class=\"line\"> --docker-password=&lt;SECRET&gt; \\</div><div class=\"line\"> --docker-email=any@mail.com</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> add serviceaccount/default \\</div><div class=\"line\"> secrets/mysecret \\</div><div class=\"line\"> --for=pull</div><div class=\"line\"></div><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> add serviceaccount/builder \\</div><div class=\"line\"> secrets/mysecret</div></pre></td></tr></table></figure></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> import-image \\</div><div class=\"line\"> --insecure=true</div><div class=\"line\"> registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest \\</div><div class=\"line\"> --confirm=true</div></pre></td></tr></table></figure><ul><li>Spring Boot Anwendung als Container Anwendung mittels des S2I-fähigen Container-Images als OpenShift Projke erstellen<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> new-app \\</div><div class=\"line\"> registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest~http://gogs.hochguertel.local/hochguertelto/openshift-demo-boot-project.git</div></pre></td></tr></table></figure></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> new-app \\</div><div class=\"line\"> registry.hochguertel.local/hochguertel-local/openshift-springboot-maven3-centos7:latest~http://gogs.hochguertel.local/hochguertelto/learning-spring-boot-video.git</div></pre></td></tr></table></figure><ul><li>Delete Build</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> delete \\</div><div class=\"line\"> bc openshift-demo-boot-project \\</div><div class=\"line\"> -n demo-hochguertel-biz</div></pre></td></tr></table></figure><h1 id=\"VIRTUAL-MACHINE-vm2-clone\"><a href=\"#VIRTUAL-MACHINE-vm2-clone\" class=\"headerlink\" title=\"VIRTUAL-MACHINE (vm2-clone)\"></a>VIRTUAL-MACHINE (<code>vm2-clone</code>)</h1><p>Wir richten die Virtuellen Machine <code>vm2-clone</code> als OpenShift-Origin Service ein, nutzen die <code>vm1-clone</code> als Vorlage.</p><ul><li>Erstellen eines Kopie von <code>vm1-clone</code>.</li><li>Geben der Kopie den neuen Namen <code>vm2-clome</code>.</li><li>Wir registrieren den neue Host <code>vm2.openshift.hochguertel.local</code> im Netzwerk.</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh-save-vm \\</div><div class=\"line\"> -n vm1-clone</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> dumpxml \\</div><div class=\"line\"> vm1-clone-save-25.12.2016-time-03-39 \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\"> vm2-clone.xml</span></div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nano vm2-clone.xml</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">mv \\</div><div class=\"line\"> /vm-images/vm1-clone-save-25.12.2016-time-03-39.img</div><div class=\"line\"> /vm-images/vm2-clone.img</div><div class=\"line\"></div><div class=\"line\">mv \\</div><div class=\"line\"> /vm-images/vm1-clone-add-001-save-25.12.2016-time-03-39.img</div><div class=\"line\"> /vm-images/vm2-clone-add-001.img</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> undefine vm1-clone-save-25.12.2016-time-03-39</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> define vm2-clone.xml</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> list \\</div><div class=\"line\"> --all</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> start vm2-clone</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> list</div></pre></td></tr></table></figure><h2 id=\"Full-Content-of-my-Qemu-VM-XML-File\"><a href=\"#Full-Content-of-my-Qemu-VM-XML-File\" class=\"headerlink\" title=\"Full Content of my Qemu VM-XML-File:\"></a>Full Content of my Qemu VM-XML-File:</h2><p>Copy of <code>vm1-clone.xml</code>, modified to renamed as <code>vm2-clone.xml</code> (VM-Name: <code>vm2-clone</code>)</p><p><strong>File: <code>/root/vm2-clone.xml</code></strong><br></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">domain</span> <span class=\"attr\">type</span>=<span class=\"string\">'kvm'</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>vm2-clone<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">uuid</span>&gt;</span>6ac6bb29-8e77-4787-846d-2f6148d16516<span class=\"tag\">&lt;/<span class=\"name\">uuid</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">memory</span> <span class=\"attr\">unit</span>=<span class=\"string\">'KiB'</span>&gt;</span>2097152<span class=\"tag\">&lt;/<span class=\"name\">memory</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">currentMemory</span> <span class=\"attr\">unit</span>=<span class=\"string\">'KiB'</span>&gt;</span>1048576<span class=\"tag\">&lt;/<span class=\"name\">currentMemory</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">vcpu</span> <span class=\"attr\">placement</span>=<span class=\"string\">'static'</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">vcpu</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">partition</span>&gt;</span>/machine<span class=\"tag\">&lt;/<span class=\"name\">partition</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">os</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">type</span> <span class=\"attr\">arch</span>=<span class=\"string\">'x86_64'</span> <span class=\"attr\">machine</span>=<span class=\"string\">'pc-i440fx-rhel7.0.0'</span>&gt;</span>hvm<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boot</span> <span class=\"attr\">dev</span>=<span class=\"string\">'hd'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">os</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">features</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">acpi</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">apic</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">features</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">cpu</span> <span class=\"attr\">mode</span>=<span class=\"string\">'custom'</span> <span class=\"attr\">match</span>=<span class=\"string\">'exact'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">fallback</span>=<span class=\"string\">'allow'</span>&gt;</span>Nehalem<span class=\"tag\">&lt;/<span class=\"name\">model</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">cpu</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">clock</span> <span class=\"attr\">offset</span>=<span class=\"string\">'utc'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'rtc'</span> <span class=\"attr\">tickpolicy</span>=<span class=\"string\">'catchup'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'pit'</span> <span class=\"attr\">tickpolicy</span>=<span class=\"string\">'delay'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'hpet'</span> <span class=\"attr\">present</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">clock</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_poweroff</span>&gt;</span>destroy<span class=\"tag\">&lt;/<span class=\"name\">on_poweroff</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_reboot</span>&gt;</span>restart<span class=\"tag\">&lt;/<span class=\"name\">on_reboot</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_crash</span>&gt;</span>restart<span class=\"tag\">&lt;/<span class=\"name\">on_crash</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">pm</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">suspend-to-mem</span> <span class=\"attr\">enabled</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">suspend-to-disk</span> <span class=\"attr\">enabled</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">pm</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">devices</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">emulator</span>&gt;</span>/usr/libexec/qemu-kvm<span class=\"tag\">&lt;/<span class=\"name\">emulator</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'qcow2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm2-clone.img'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x06'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span> <span class=\"attr\">cache</span>=<span class=\"string\">'none'</span> <span class=\"attr\">io</span>=<span class=\"string\">'threads'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/vm2-clone-add-001.img'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vdb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x08'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'cdrom'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'hda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ide'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">readonly</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'drive'</span> <span class=\"attr\">controller</span>=<span class=\"string\">'0'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">target</span>=<span class=\"string\">'0'</span> <span class=\"attr\">unit</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-ehci1'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x7'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci1'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span> <span class=\"attr\">multifunction</span>=<span class=\"string\">'on'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci2'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci3'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'4'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'pci-root'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'ide'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x01'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio-serial'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x04'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'bridge'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:e8:1d:b8'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">bridge</span>=<span class=\"string\">'br0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x03'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serial</span> <span class=\"attr\">type</span>=<span class=\"string\">'pty'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">port</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">serial</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">console</span> <span class=\"attr\">type</span>=<span class=\"string\">'pty'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">type</span>=<span class=\"string\">'serial'</span> <span class=\"attr\">port</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">console</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">channel</span> <span class=\"attr\">type</span>=<span class=\"string\">'unix'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span> <span class=\"attr\">name</span>=<span class=\"string\">'org.qemu.guest_agent.0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio-serial'</span> <span class=\"attr\">controller</span>=<span class=\"string\">'0'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">port</span>=<span class=\"string\">'1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">channel</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'tablet'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'usb'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">port</span>=<span class=\"string\">'1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'mouse'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ps2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'keyboard'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ps2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">graphics</span> <span class=\"attr\">type</span>=<span class=\"string\">'vnc'</span> <span class=\"attr\">port</span>=<span class=\"string\">'-1'</span> <span class=\"attr\">autoport</span>=<span class=\"string\">'yes'</span> <span class=\"attr\">listen</span>=<span class=\"string\">'0.0.0.0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">listen</span> <span class=\"attr\">type</span>=<span class=\"string\">'address'</span> <span class=\"attr\">address</span>=<span class=\"string\">'0.0.0.0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">graphics</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'cirrus'</span> <span class=\"attr\">vram</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">heads</span>=<span class=\"string\">'1'</span> <span class=\"attr\">primary</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x02'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">memballoon</span> <span class=\"attr\">model</span>=<span class=\"string\">'virtio'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x07'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">memballoon</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">devices</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">seclabel</span> <span class=\"attr\">type</span>=<span class=\"string\">'dynamic'</span> <span class=\"attr\">model</span>=<span class=\"string\">'selinux'</span> <span class=\"attr\">relabel</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">seclabel</span> <span class=\"attr\">type</span>=<span class=\"string\">'dynamic'</span> <span class=\"attr\">model</span>=<span class=\"string\">'dac'</span> <span class=\"attr\">relabel</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">domain</span>&gt;</span></div></pre></td></tr></table></figure><p></p><h2 id=\"Check-VNC-Display-Port\"><a href=\"#Check-VNC-Display-Port\" class=\"headerlink\" title=\"Check VNC Display Port\"></a>Check VNC Display Port</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> vncdisplay vm2-clone</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> dumpxml vm2-clone \\</div><div class=\"line\"> | grep vnc</div></pre></td></tr></table></figure><h2 id=\"Make-VNC-Display-port-accesible-through-the-firewall\"><a href=\"#Make-VNC-Display-port-accesible-through-the-firewall\" class=\"headerlink\" title=\"Make VNC-Display port accesible through the firewall\"></a>Make VNC-Display port accesible through the firewall</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --zone=public \\</div><div class=\"line\"> --add-port=5901/tcp \\</div><div class=\"line\"> --permanent</div><div class=\"line\"></div><div class=\"line\">firewall-cmd \\</div><div class=\"line\"> --reload</div></pre></td></tr></table></figure><h2 id=\"Wir-registrieren-den-neue-Host-vm2-openshift-hochguertel-local-im-Netzwerk-und-installieren-die-OpenShift-Origin-Service\"><a href=\"#Wir-registrieren-den-neue-Host-vm2-openshift-hochguertel-local-im-Netzwerk-und-installieren-die-OpenShift-Origin-Service\" class=\"headerlink\" title=\"Wir registrieren den neue Host vm2.openshift.hochguertel.local im Netzwerk und installieren die OpenShift Origin Service.\"></a>Wir registrieren den neue Host <code>vm2.openshift.hochguertel.local</code> im Netzwerk und installieren die OpenShift Origin Service.</h2><ul><li>Setzen des Hostnamen’s der Virtuellen Maschine.</li><li>Wir registrieren den Hostnamen beim DNS Server des Netzwerks.</li><li>Überprüfen der DNS Registrierung ob die DNS Einträge korrekt aufgelöst werden.</li></ul><h3 id=\"Setzen-des-Hostnamen’s-der-Virtuellen-Maschine-vm2-clone\"><a href=\"#Setzen-des-Hostnamen’s-der-Virtuellen-Maschine-vm2-clone\" class=\"headerlink\" title=\"Setzen des Hostnamen’s der Virtuellen Maschine vm2-clone.\"></a>Setzen des Hostnamen’s der Virtuellen Maschine <code>vm2-clone</code>.</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"vm2.openshift.hochguertel.local\" &gt; /etc/hostname</div></pre></td></tr></table></figure><h3 id=\"Wir-registrieren-den-Hostnamen-beim-DNS-Server-atomic-hochguertel-local-des-Netzwerks-1\"><a href=\"#Wir-registrieren-den-Hostnamen-beim-DNS-Server-atomic-hochguertel-local-des-Netzwerks-1\" class=\"headerlink\" title=\"Wir registrieren den Hostnamen beim DNS Server (atomic.hochguertel.local) des Netzwerks.\"></a>Wir registrieren den Hostnamen beim DNS Server (<code>atomic.hochguertel.local</code>) des Netzwerks.</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"host-record=vm2.openshift,192.168.0.108\" &gt; /root/sym/dnsmasq.d/enp2s0-dnsmasq.d/0host_vm2.openshift</div><div class=\"line\">echo \"host-record=vm2.openshift.hochguertel.local,192.168.0.108\" &gt;&gt; /root/sym/dnsmasq.d/enp2s0-dnsmasq.d/0host_vm2.openshift</div><div class=\"line\">systemctl restart enp2s0-dnsmasq.service</div><div class=\"line\"></div><div class=\"line\">echo \"host-record=vm2.openshift,192.168.0.108\" &gt; /root/sym/dnsmasq.d/docker0-dnsmasq.d/0host_vm2.openshift</div><div class=\"line\">echo \"host-record=vm2.openshift.hochguertel.local,192.168.0.108\" &gt;&gt; /root/sym/dnsmasq.d/docker0-dnsmasq.d/0host_vm2.openshift</div><div class=\"line\">systemctl restart docker0-dnsmasq.service</div><div class=\"line\"></div><div class=\"line\">systemctl status docker0-dnsmasq.service enp2s0-dnsmasq.service</div></pre></td></tr></table></figure><h3 id=\"Uberprufen-der-DNS-Registrierung-ob-die-DNS-Eintrage-korrekt-aufgelost-werden-1\"><a href=\"#Uberprufen-der-DNS-Registrierung-ob-die-DNS-Eintrage-korrekt-aufgelost-werden-1\" class=\"headerlink\" title=\"Überprüfen der DNS Registrierung ob die DNS Einträge korrekt aufgelöst werden.\"></a>Überprüfen der DNS Registrierung ob die DNS Einträge korrekt aufgelöst werden.</h3><ul><li>Von mehreren Netzwerk Clients aus z.B. <code>openshift.hochguertel.local</code> o. <code>T430-1.hochguertel.local</code>.</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">ping vm2.openshift</div><div class=\"line\">ping vm2.openshift.hochguertel.local</div></pre></td></tr></table></figure><h3 id=\"Neustarten-der-VM2…-vm2-openshift-hochguertel-local\"><a href=\"#Neustarten-der-VM2…-vm2-openshift-hochguertel-local\" class=\"headerlink\" title=\"Neustarten der VM2… vm2.openshift.hochguertel.local\"></a>Neustarten der VM2… <code>vm2.openshift.hochguertel.local</code></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">reboot</div></pre></td></tr></table></figure><h3 id=\"Subscription-Management-vm2-openshift-hochguertel-local\"><a href=\"#Subscription-Management-vm2-openshift-hochguertel-local\" class=\"headerlink\" title=\"Subscription Management vm2.openshift.hochguertel.local\"></a>Subscription Management <code>vm2.openshift.hochguertel.local</code></h3><h3 id=\"Subscription-Management-1\"><a href=\"#Subscription-Management-1\" class=\"headerlink\" title=\"Subscription Management\"></a>Subscription Management</h3><ul><li><a href=\"https://access.redhat.com/\" target=\"_blank\" rel=\"external\">RedHat.com - Subscription Manager</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">subscription-manager register</div><div class=\"line\">subscription-manager attach</div><div class=\"line\">subscription-manager refresh</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install nano</div></pre></td></tr></table></figure><h1 id=\"NetworkManager-deaktiviert\"><a href=\"#NetworkManager-deaktiviert\" class=\"headerlink\" title=\"NetworkManager deaktiviert.\"></a>NetworkManager deaktiviert.</h1><p>Deaktivieren des NetworkManager, dieser hat sich vermutlich nach einem <code>yum update</code> wieder aktiviert hat?!</p><ul><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/sect-Virtualization_Host_Configuration_and_Guest_Installation_Guide-Network_Configuration-Network_Configuration-Bridged_networking_with_libvirt.html\" target=\"_blank\" rel=\"external\">RedHat Doc: Virtualization Host Configuration and Guest Installation Guide-Network - Configuration-Bridged networking with libvirt</a></li></ul><p><strong>Important!</strong> NetworkManager does not support bridging. NetworkManager must be disabled to use networking with the network scripts (located in the <code>/etc/sysconfig/network-scripts/ directory</code>).</p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">chkconfig NetworkManager off</div><div class=\"line\">chkconfig network on</div><div class=\"line\">service NetworkManager stop</div><div class=\"line\">service network start</div></pre></td></tr></table></figure><p>If you do not want to disable NetworkManager entirely, add <code>NM_CONTROLLED=no</code> to the <code>ifcfg-*</code> network script being used for the bridge.</p><p><code>NM_CONTROLLED=</code> where answer is one of the following:</p><ul><li><code>yes</code> — NetworkManager is permitted to configure this device. This is the default behavior and can be omitted.</li><li><code>no</code> — NetworkManager is not permitted to configure this device.</li></ul><p><code>LINKDELAY=time</code> where time is the number of seconds to wait for link negotiation before configuring the device. The default is 5 secs. Delays in link negotiation, caused by <code>STP</code> for example, can be overcome by increasing this value.</p><ul><li><a href=\"http://www.microhowto.info/howto/persistently_bridge_traffic_between_two_or_more_ethernet_interfaces_on_redhat.html\" target=\"_blank\" rel=\"external\">STP - What is STP?!</a></li></ul><p>The bridge should now be ready for use, however there may be a delay before traffic starts to flow (typically about 30 seconds if STP is enabled or half that if not). The STP option specifies whether or not the Spanning Tree Protocol should be enabled. This is essential if there is any possibility of the bridge creating a loop in the network. It is safe in other cases, but it will increase the delay between a new link being added and it being able to pass traffic. For this reason you may want to leave STP disabled in simple cases (such as when bridging a set of virtual machines to a single physical interface).</p><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-br0</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=br0</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">TYPE</span>=Bridge</div><div class=\"line\"><span class=\"attr\">BOOTPROTO</span>=dhcp</div><div class=\"line\"><span class=\"attr\">PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6INIT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_AUTOCONF</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">DHCPV6C</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">STP</span>=<span class=\"literal\">on</span></div><div class=\"line\"><span class=\"attr\">DELAY</span>=<span class=\"number\">10</span></div><div class=\"line\"><span class=\"comment\">#LINKDELAY=30</span></div><div class=\"line\"><span class=\"attr\">DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV4_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6_DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">NM_CONTROLLED</span>=<span class=\"literal\">no</span></div></pre></td></tr></table></figure><p></p><ul><li><strong><code>STP=on</code></strong> it is important that <code>STP</code> is set to <code>on</code>, because without STP (Spanning Tree Protocol) kvm network for guest VM’s doesn not work. <em>So <code>STP</code> must be enabled!</em></li><li>With STP On, we must ensure that the Link is available - we have to wait.</li><li><strong>AND</strong> <code>DELAY</code> is set to <code>10</code> to wait 10 seconds until this network device is available?!, otherwise no IP is received via DHCP for <code>br0</code>.</li><li><strong>AND</strong> <code>LINKDELAY</code> is set to <code>30</code> to wait 30 seconds to send the DHCP Request to receive an IP, otherwise no IP is received via DHCP for <code>br0</code>.</li><li>a link-delay time (<code>LINKDELAY</code>) less than <code>30</code> seconds is not working, because the time is to short to get the link ready and send packages to the network.</li></ul><h1 id=\"OpenShift-Rechner-per-Wake-On-Lan-startbar\"><a href=\"#OpenShift-Rechner-per-Wake-On-Lan-startbar\" class=\"headerlink\" title=\"OpenShift Rechner per Wake-On-Lan startbar:\"></a>OpenShift Rechner per Wake-On-Lan startbar:</h1><ul><li>Entsprechende WOL Scripte und Befehle wurden auf verschiedenen System hinterlegt.</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> WOL_OPENSHIFT</span></div><div class=\"line\">Sending magic packet to 255.255.255.255 with broadcast 255.255.255.255 MAC 00:26:18:79:B5:BE port 9</div></pre></td></tr></table></figure><h1 id=\"OpenShift-Standalone-vm1-clone-mit-Master-und-Node-Konfiguration-ausstatten\"><a href=\"#OpenShift-Standalone-vm1-clone-mit-Master-und-Node-Konfiguration-ausstatten\" class=\"headerlink\" title=\"OpenShift Standalone (vm1-clone) mit Master und Node Konfiguration ausstatten.\"></a>OpenShift Standalone (<code>vm1-clone</code>) mit Master und Node Konfiguration ausstatten.</h1><p>OpneShift Service nutzte bis jetzt die Standard Konfiguration die ihm impliziert zur Verfügung steht. Mit einer ausgelagerten Konfiguration für Master und Client kann der OpenSHift Service vollständig konfiguriert werden.</p><ul><li>Wir können in der Master Konfiguration den DNS Namen (<code>Wildcard-Subdomaine</code>) setzen, so das die UI z.b. beim erstellen einer Route automatisch die zuverwendene Sub-Domain einträgt.</li><li>Vermutlich lässt sich so ein Bug mit der Container Registry beheben, (dem manuellen importieren von Images.)</li></ul><p><strong>File: <code>/etc/profile.d/openshift.sh</code></strong><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">config=<span class=\"string\">\"openshift1.kvm.hochguertel.local.config\"</span></div><div class=\"line\"><span class=\"built_in\">export</span> OPENSHIFT=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit</div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$OPENSHIFT</span>:<span class=\"variable\">$PATH</span></div><div class=\"line\"><span class=\"built_in\">export</span> KUBECONFIG=<span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/<span class=\"variable\">$&#123;config&#125;</span>/master/admin.kubeconfig</div><div class=\"line\"><span class=\"built_in\">export</span> CURL_CA_BUNDLE=<span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/<span class=\"variable\">$&#123;config&#125;</span>/master/ca.crt</div><div class=\"line\">sudo chmod +r <span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/<span class=\"variable\">$&#123;config&#125;</span>/master/admin.kubeconfig</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/profile.d/openshift.sh</code></strong><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">config=<span class=\"string\">\"openshift1.kvm.hochguertel.local.config\"</span></div><div class=\"line\"><span class=\"built_in\">export</span> OPENSHIFT=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit</div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$OPENSHIFT</span>:<span class=\"variable\">$PATH</span></div><div class=\"line\"><span class=\"built_in\">export</span> KUBECONFIG=<span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/<span class=\"variable\">$&#123;config&#125;</span>/master/admin.kubeconfig</div><div class=\"line\"><span class=\"built_in\">export</span> CURL_CA_BUNDLE=<span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/<span class=\"variable\">$&#123;config&#125;</span>/master/ca.crt</div><div class=\"line\">sudo chmod +r <span class=\"string\">\"<span class=\"variable\">$OPENSHIFT</span>\"</span>/<span class=\"variable\">$&#123;config&#125;</span>/master/admin.kubeconfig</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/usr/lib/systemd/system/openshift.service</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Unit]</div><div class=\"line\">Description=Origin Master Service</div><div class=\"line\">After=docker.service</div><div class=\"line\">Wants=docker.service</div><div class=\"line\">Requires=docker.service</div><div class=\"line\"></div><div class=\"line\">[Service]</div><div class=\"line\">Type=notify</div><div class=\"line\">NotifyAccess=all</div><div class=\"line\">Restart=always</div><div class=\"line\">RestartSec=10s</div><div class=\"line\">ExecStart=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/openshift \\</div><div class=\"line\"> start \\</div><div class=\"line\"> --master-config=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/%H.kvm.hochguertel.local.config/master/master-config.yaml \\</div><div class=\"line\"> --node-config=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/%H.kvm.hochguertel.local.config/node-openshift1/node-config.yaml</div><div class=\"line\">WorkingDirectory=/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/</div><div class=\"line\"></div><div class=\"line\">[Install]</div><div class=\"line\">WantedBy=multi-user.target</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/hostname</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">openshift1</div></pre></td></tr></table></figure><p></p><ul><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/s1-networkscripts-interfaces.html\" target=\"_blank\" rel=\"external\">RedHat.com - Interface Configuration Files (ifcfg)</a></li><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/s1-networkscripts-interfaces.html#s2-networkscripts-interfaces-eth0\" target=\"_blank\" rel=\"external\">RedHat.com - Ethernet Interfaces</a></li></ul><p><code>NM_CONTROLLED=</code> where answer is one of the following:</p><ul><li><code>yes</code> — NetworkManager is permitted to configure this device. This is the default behavior and can be omitted.</li><li><code>no</code> — NetworkManager is not permitted to configure this device.</li></ul><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-eth0</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">TYPE</span>=Ethernet</div><div class=\"line\"><span class=\"attr\">BOOTPROTO</span>=dhcp</div><div class=\"line\"><span class=\"attr\">DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV4_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6INIT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_AUTOCONF</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">NAME</span>=eth0</div><div class=\"line\"><span class=\"attr\">UUID</span>=<span class=\"number\">15192</span>a7a-<span class=\"number\">6968</span>-<span class=\"number\">44</span>de-b35f-aad885e1ae7e</div><div class=\"line\"><span class=\"attr\">DEVICE</span>=eth0</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">NM_CONTROLLED</span>=<span class=\"literal\">no</span></div></pre></td></tr></table></figure><p></p><ul><li><strong><code>NM_CONTROLLED=no</code></strong> it is important to set <code>NM_CONTROLLED</code> to <code>no</code>, otherwise the bridge doesn’t work and guest VM can’t receive IP’s from DHCP and either a connection.</li></ul><p><strong>File: <code>/etc/sysconfig/network</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Created by anaconda</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># If the synchronization with the time server at boot time keeps failing, i.e., you find a relevant error message in the /var/log/boot.log system log, try to add the following line to /etc/sysconfig/network:</span></div><div class=\"line\"><span class=\"attr\">NETWORKWAIT</span>=<span class=\"number\">1</span></div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/hosts</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</div><div class=\"line\">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/nsswitch.conf</code></strong><br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">#</div><div class=\"line\"># /etc/nsswitch.conf</div><div class=\"line\">#</div><div class=\"line\"># An example Name Service Switch config file. This file should be</div><div class=\"line\"># sorted with the most-used services at the beginning.</div><div class=\"line\">#</div><div class=\"line\"># The entry '[NOTFOUND=return]' means that the search for an</div><div class=\"line\"># entry should stop if the search in the previous entry turned</div><div class=\"line\"># up nothing. Note that if the search failed due to some other reason</div><div class=\"line\"># (like no NIS server responding) then the search continues with the</div><div class=\"line\"># next entry.</div><div class=\"line\">#</div><div class=\"line\"># Valid entries include:</div><div class=\"line\">#</div><div class=\"line\">#       nisplus                 Use NIS+ (NIS version 3)</div><div class=\"line\">#       nis                     Use NIS (NIS version 2), also called YP</div><div class=\"line\">#       dns                     Use DNS (Domain Name Service)</div><div class=\"line\">#       files                   Use the local files</div><div class=\"line\">#       db                      Use the local database (.db) files</div><div class=\"line\">#       compat                  Use NIS on compat mode</div><div class=\"line\">#       hesiod                  Use Hesiod for user lookups</div><div class=\"line\">#       [NOTFOUND=return]       Stop searching if not found so far</div><div class=\"line\">#</div><div class=\"line\"></div><div class=\"line\"># To use db, put the \"db\" in front of \"files\" for entries you want to be</div><div class=\"line\"># looked up first in the databases</div><div class=\"line\">#</div><div class=\"line\"># Example:</div><div class=\"line\">#passwd:    db files nisplus nis</div><div class=\"line\">#shadow:    db files nisplus nis</div><div class=\"line\">#group:     db files nisplus nis</div><div class=\"line\"></div><div class=\"line\">passwd:     files sss</div><div class=\"line\">shadow:     files sss</div><div class=\"line\">group:      files sss</div><div class=\"line\">#initgroups: files</div><div class=\"line\"></div><div class=\"line\">#hosts:     db files nisplus nis dns</div><div class=\"line\">hosts:      files dns myhostname</div><div class=\"line\"></div><div class=\"line\"># Example - obey only what nisplus tells us...</div><div class=\"line\">#services:   nisplus [NOTFOUND=return] files</div><div class=\"line\">#networks:   nisplus [NOTFOUND=return] files</div><div class=\"line\">#protocols:  nisplus [NOTFOUND=return] files</div><div class=\"line\">#rpc:        nisplus [NOTFOUND=return] files</div><div class=\"line\">#ethers:     nisplus [NOTFOUND=return] files</div><div class=\"line\">#netmasks:   nisplus [NOTFOUND=return] files</div><div class=\"line\"></div><div class=\"line\">bootparams: nisplus [NOTFOUND=return] files</div><div class=\"line\"></div><div class=\"line\">ethers:     files</div><div class=\"line\">netmasks:   files</div><div class=\"line\">networks:   files</div><div class=\"line\">protocols:  files</div><div class=\"line\">rpc:        files</div><div class=\"line\">services:   files sss</div><div class=\"line\"></div><div class=\"line\">netgroup:   files sss</div><div class=\"line\"></div><div class=\"line\">publickey:  nisplus</div><div class=\"line\"></div><div class=\"line\">automount:  files</div><div class=\"line\">aliases:    files nisplus</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/bash_completion.d/virsh_bash_completion</code></strong><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># bash completion for virsh</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_contain_cmd</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">local</span> e f</div><div class=\"line\">    <span class=\"built_in\">local</span> array1=(<span class=\"variable\">$1</span>) array2=(<span class=\"variable\">$2</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> <span class=\"string\">\"<span class=\"variable\">$&#123;array1[@]&#125;</span>\"</span></div><div class=\"line\">    <span class=\"keyword\">do</span></div><div class=\"line\">        <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> <span class=\"string\">\"<span class=\"variable\">$&#123;array2[@]&#125;</span>\"</span></div><div class=\"line\">        <span class=\"keyword\">do</span></div><div class=\"line\">            <span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$e</span>\"</span> == <span class=\"string\">\"<span class=\"variable\">$f</span>\"</span> ]] ; <span class=\"keyword\">then</span></div><div class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$e</span></div><div class=\"line\">                <span class=\"built_in\">return</span></div><div class=\"line\">            <span class=\"keyword\">fi</span></div><div class=\"line\">        <span class=\"keyword\">done</span></div><div class=\"line\">    <span class=\"keyword\">done</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"notfound\"</span></div><div class=\"line\">    <span class=\"built_in\">return</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_virsh_list_networks</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">local</span> flag_all=<span class=\"variable\">$1</span> flags</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span> -eq 1 ]; <span class=\"keyword\">then</span></div><div class=\"line\">        flags=<span class=\"string\">\"--all\"</span></div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        flags=<span class=\"string\">\"--inactive\"</span></div><div class=\"line\">    <span class=\"keyword\">fi</span></div><div class=\"line\">    virsh -q net-list <span class=\"variable\">$flags</span> | cut -d\\  -f2 | awk <span class=\"string\">'&#123;print $1&#125;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_virsh_list_domains</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">local</span> flag_all=<span class=\"variable\">$1</span> flags</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span> -eq 1 ]; <span class=\"keyword\">then</span></div><div class=\"line\">        flags=<span class=\"string\">\"--all\"</span></div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        flags=<span class=\"string\">\"--inactive\"</span></div><div class=\"line\">    <span class=\"keyword\">fi</span></div><div class=\"line\">    virsh -q list <span class=\"variable\">$flags</span> | cut -d\\  -f7 | awk <span class=\"string\">'&#123;print $1&#125;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_virsh_list_pools</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">local</span> flag_all=<span class=\"variable\">$1</span> flags</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span> -eq 1 ]; <span class=\"keyword\">then</span></div><div class=\"line\">        flags=<span class=\"string\">\"--all\"</span></div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        flags=<span class=\"string\">\"--inactive\"</span></div><div class=\"line\">    <span class=\"keyword\">fi</span></div><div class=\"line\">    virsh -q pool-list <span class=\"variable\">$flags</span> | cut -d\\  -f2 | awk <span class=\"string\">'&#123;print $1&#125;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_virsh_list_ifaces</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">local</span> flag_all=<span class=\"variable\">$1</span> flags</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span> -eq 1 ]; <span class=\"keyword\">then</span></div><div class=\"line\">        flags=<span class=\"string\">\"--all\"</span></div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        flags=<span class=\"string\">\"--inactive\"</span></div><div class=\"line\">    <span class=\"keyword\">fi</span></div><div class=\"line\">    virsh -q iface-list <span class=\"variable\">$flags</span> | cut -d\\  -f2 | awk <span class=\"string\">'&#123;print $1&#125;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_virsh_list_nwfilters</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\"></div><div class=\"line\">    virsh -q nwfilter-list | cut -d\\  -f4 | awk <span class=\"string\">'&#123;print $1&#125;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">_virsh</span></span>()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"built_in\">local</span> cur prev cmds doms options nets pools cmds_help</div><div class=\"line\">    <span class=\"built_in\">local</span> flag_all=1 array ret a b ifaces nwfilters files</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#   not must use bash-completion now :)</span></div><div class=\"line\"><span class=\"comment\">#    _init_completion -s || return</span></div><div class=\"line\">    COMPREPLY=()</div><div class=\"line\">    cur=<span class=\"string\">\"<span class=\"variable\">$&#123;COMP_WORDS[COMP_CWORD]&#125;</span>\"</span></div><div class=\"line\">    prev=<span class=\"string\">\"<span class=\"variable\">$&#123;COMP_WORDS[COMP_CWORD-1]&#125;</span>\"</span></div><div class=\"line\"></div><div class=\"line\">    cmds=$( <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$(virsh -h| grep '^    ' | cut -d\\  -f5)</span>\"</span> \\</div><div class=\"line\">            <span class=\"string\">\"<span class=\"variable\">$(virsh -h| grep '\\--' | cut -d\\  -f7 | cut -d= -f1)</span>\"</span>)</div><div class=\"line\">    cmds_help=$(virsh <span class=\"built_in\">help</span>| grep <span class=\"string\">'^    '</span> | cut -d\\  -f5)</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$prev</span>\"</span> <span class=\"keyword\">in</span></div><div class=\"line\">        --domain)</div><div class=\"line\">            doms=$(_virsh_list_domains <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span>)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$doms</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">        --network)</div><div class=\"line\">            nets=$(_virsh_list_networks <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span>)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$nets</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">        --pool)</div><div class=\"line\">            pools=$(_virsh_list_pools <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span>)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$pools</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">        --interface)</div><div class=\"line\">            ifaces=$(_virsh_list_ifaces <span class=\"string\">\"<span class=\"variable\">$flag_all</span>\"</span>)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$ifaces</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">        --nwfilter)</div><div class=\"line\">            nwfilters=$(_virsh_list_nwfilters)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$nwfilters</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">        --file|--xml)</div><div class=\"line\">            files=$(ls)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$files</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">    <span class=\"keyword\">esac</span></div><div class=\"line\"></div><div class=\"line\">    array=$(IFS=$<span class=\"string\">'\\n'</span>; <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;COMP_WORDS[*]&#125;</span>\"</span>)</div><div class=\"line\">    ret=$(_contain_cmd <span class=\"string\">\"<span class=\"variable\">$array</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$cmds_help</span>\"</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$ret</span>\"</span> != <span class=\"string\">\"notfound\"</span> &amp;&amp; <span class=\"string\">\"<span class=\"variable\">$ret</span>\"</span> != <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span> ]]; <span class=\"keyword\">then</span></div><div class=\"line\">        a=$(virsh <span class=\"built_in\">help</span> <span class=\"string\">\"<span class=\"variable\">$ret</span>\"</span> |grep <span class=\"string\">'^    --'</span>|cut -d\\  -f5)</div><div class=\"line\">        b=$(virsh <span class=\"built_in\">help</span> <span class=\"string\">\"<span class=\"variable\">$ret</span>\"</span> |grep <span class=\"string\">'^    \\[--'</span>|cut -d\\  -f5|cut -d[  -f2|cut -d]  -f1)</div><div class=\"line\">        options=$( <span class=\"built_in\">echo</span> <span class=\"variable\">$a</span> <span class=\"variable\">$b</span> )</div><div class=\"line\">        COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$options</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">        <span class=\"built_in\">return</span> 0</div><div class=\"line\">    <span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span> <span class=\"keyword\">in</span></div><div class=\"line\">        *)</div><div class=\"line\">            COMPREPLY=( $(compgen -W <span class=\"string\">\"<span class=\"variable\">$cmds</span>\"</span> -- <span class=\"string\">\"<span class=\"variable\">$cur</span>\"</span>) )</div><div class=\"line\">            <span class=\"built_in\">return</span> 0</div><div class=\"line\">            ;;</div><div class=\"line\">    <span class=\"keyword\">esac</span></div><div class=\"line\">&#125; &amp;&amp;</div><div class=\"line\">complete -o default -F _virsh virsh</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/root/.bashrc</code></strong><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># .bashrc</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># User specific aliases and functions</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">alias</span> rm=<span class=\"string\">'rm -i'</span></div><div class=\"line\"><span class=\"built_in\">alias</span> cp=<span class=\"string\">'cp -i'</span></div><div class=\"line\"><span class=\"built_in\">alias</span> mv=<span class=\"string\">'mv -i'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Source global definitions</span></div><div class=\"line\"><span class=\"keyword\">if</span> [ -f /etc/bashrc ]; <span class=\"keyword\">then</span></div><div class=\"line\">        . /etc/bashrc</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">alias</span> ll=<span class=\"string\">\"ls -lh\"</span></div></pre></td></tr></table></figure><p></p><h1 id=\"KVM-Gaste-Virtuelle-Maschinen-konnen-nicht-mehr-langer-mit-dem-bridged-network-sprechen…\"><a href=\"#KVM-Gaste-Virtuelle-Maschinen-konnen-nicht-mehr-langer-mit-dem-bridged-network-sprechen…\" class=\"headerlink\" title=\"KVM-Gäste (Virtuelle Maschinen) können nicht mehr länger mit dem bridged-network sprechen…\"></a>KVM-Gäste (Virtuelle Maschinen) können nicht mehr länger mit dem bridged-network <em>sprechen</em>…</h1><p>Auf dem HOST System, erneut die Netzwerkkarten inizialisieren, sobald alle Virtuellen Gäste <em>resumed</em> sind!<br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl restart network</div></pre></td></tr></table></figure><p></p><ul><li>Host Netzwerk, funktioniert jetzt einfachwandfrei wenn man <code>WOL_OPENSHIFT</code> oder. vgl. tut.</li><li>Die KVM VM’s stehen nach einem Neustart sehr schnell zur Verfügung.</li><li>Ich akzeptiere das mit dem <em>erneuten inizialisieren der Netzwerkkarten</em>, weil es wohl augenscheinlich erstmal keine bessere Lösung gibt.</li></ul><h1 id=\"Generating-a-KVM-MAC\"><a href=\"#Generating-a-KVM-MAC\" class=\"headerlink\" title=\"Generating a KVM MAC\"></a>Generating a KVM MAC</h1><p>If you are managing your guests via command line, the following script might be helpful to generate a randomized MAC using QEMU’s registered OUI (52:54:00):<br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">MACADDR=\"52:54:00:$(dd if=/dev/urandom bs=512 count=1 2&gt;/dev/null | md5sum | sed 's/^\\(..\\)\\(..\\)\\(..\\).*$/\\1:\\2:\\3/')\";</div><div class=\"line\">echo $MACADDR</div></pre></td></tr></table></figure><p></p><p>If you’re paranoid about assigning an in-use MAC then check for a match in the output of “ip neigh”. However, using this random method is relatively safe,<br>giving you an approximately n in 16.8 million chance of a collision (where n is the number of existing QEMU/KVM guests on the LAN).</p><ul><li><a href=\"https://help.ubuntu.com/community/KVM/Networking\" target=\"_blank\" rel=\"external\">source:ubuntu.com/community/KVM/Networking</a></li></ul><h1 id=\"OpenShift-Change-default-Route-prefixed-Domainname\"><a href=\"#OpenShift-Change-default-Route-prefixed-Domainname\" class=\"headerlink\" title=\"OpenShift: Change default Route prefixed Domainname\"></a>OpenShift: Change default Route prefixed Domainname</h1><p><strong>File: <code>/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/openshift1.kvm.hochguertel.local.config/master/master-config.yaml</code></strong><br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">...</span></div><div class=\"line\"><span class=\"attr\">routingConfig:</span></div><div class=\"line\"><span class=\"attr\">  subdomain:</span> <span class=\"string\">router.openshift1.kvm.hochguertel.local</span></div><div class=\"line\"><span class=\"string\">...</span></div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/openshift1.kvm.hochguertel.local.config/master/master-config.yaml</code></strong><br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">admissionConfig:</span></div><div class=\"line\"><span class=\"attr\">  pluginConfig:</span></div><div class=\"line\">    <span class=\"string\">openshift.io/ImagePolicy:</span></div><div class=\"line\"><span class=\"attr\">      configuration:</span></div><div class=\"line\"><span class=\"attr\">        apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">        executionRules:</span></div><div class=\"line\"><span class=\"attr\">        - matchImageAnnotations:</span></div><div class=\"line\"><span class=\"attr\">          - key:</span> <span class=\"string\">images.openshift.io/deny-execution</span></div><div class=\"line\"><span class=\"attr\">            value:</span> <span class=\"string\">\"true\"</span></div><div class=\"line\"><span class=\"attr\">          name:</span> <span class=\"string\">execution-denied</span></div><div class=\"line\"><span class=\"attr\">          onResources:</span></div><div class=\"line\"><span class=\"attr\">          - resource:</span> <span class=\"string\">pods</span></div><div class=\"line\"><span class=\"attr\">          - resource:</span> <span class=\"string\">builds</span></div><div class=\"line\"><span class=\"attr\">          reject:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">          skipOnResolutionFailure:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">        kind:</span> <span class=\"string\">ImagePolicyConfig</span></div><div class=\"line\"><span class=\"attr\">      location:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">apiLevels:</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">assetConfig:</span></div><div class=\"line\"><span class=\"attr\">  extensionDevelopment:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  extensionProperties:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  extensionScripts:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  extensionStylesheets:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  extensions:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  loggingPublicURL:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  logoutURL:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  masterPublicURL:</span> <span class=\"attr\">https://openshift1.kvm.hochguertel.local:8443</span></div><div class=\"line\"><span class=\"attr\">  metricsPublicURL:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  publicURL:</span> <span class=\"attr\">https://openshift1.kvm.hochguertel.local:8443/console/</span></div><div class=\"line\"><span class=\"attr\">  servingInfo:</span></div><div class=\"line\"><span class=\"attr\">    bindAddress:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:8443</span></div><div class=\"line\"><span class=\"attr\">    bindNetwork:</span> <span class=\"string\">tcp4</span></div><div class=\"line\"><span class=\"attr\">    certFile:</span> <span class=\"string\">master.server.crt</span></div><div class=\"line\"><span class=\"attr\">    clientCA:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">    keyFile:</span> <span class=\"string\">master.server.key</span></div><div class=\"line\"><span class=\"attr\">    maxRequestsInFlight:</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"attr\">    namedCertificates:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">    requestTimeoutSeconds:</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"attr\">auditConfig:</span></div><div class=\"line\"><span class=\"attr\">  enabled:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">controllerConfig:</span></div><div class=\"line\"><span class=\"attr\">  serviceServingCert:</span></div><div class=\"line\"><span class=\"attr\">    signer:</span></div><div class=\"line\"><span class=\"attr\">      certFile:</span> <span class=\"string\">service-signer.crt</span></div><div class=\"line\"><span class=\"attr\">      keyFile:</span> <span class=\"string\">service-signer.key</span></div><div class=\"line\"><span class=\"attr\">controllerLeaseTTL:</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"attr\">controllers:</span> <span class=\"string\">'*'</span></div><div class=\"line\"><span class=\"attr\">corsAllowedOrigins:</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">localhost</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">openshift1.kvm.hochguertel.local:8443</span></div><div class=\"line\"><span class=\"attr\">disabledFeatures:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">dnsConfig:</span></div><div class=\"line\"><span class=\"attr\">  allowRecursiveQueries:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  bindAddress:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:8053</span></div><div class=\"line\"><span class=\"attr\">  bindNetwork:</span> <span class=\"string\">tcp4</span></div><div class=\"line\"><span class=\"attr\">etcdClientInfo:</span></div><div class=\"line\"><span class=\"attr\">  ca:</span> <span class=\"string\">ca.crt</span></div><div class=\"line\"><span class=\"attr\">  certFile:</span> <span class=\"string\">master.etcd-client.crt</span></div><div class=\"line\"><span class=\"attr\">  keyFile:</span> <span class=\"string\">master.etcd-client.key</span></div><div class=\"line\"><span class=\"attr\">  urls:</span></div><div class=\"line\"><span class=\"attr\">  - https:</span><span class=\"string\">//openshift1.kvm.hochguertel.local:4001</span></div><div class=\"line\"><span class=\"attr\">etcdConfig:</span></div><div class=\"line\"><span class=\"attr\">  address:</span> <span class=\"string\">openshift1.kvm.hochguertel.local:4001</span></div><div class=\"line\"><span class=\"attr\">  peerAddress:</span> <span class=\"string\">openshift1.kvm.hochguertel.local:7001</span></div><div class=\"line\"><span class=\"attr\">  peerServingInfo:</span></div><div class=\"line\"><span class=\"attr\">    bindAddress:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:7001</span></div><div class=\"line\"><span class=\"attr\">    bindNetwork:</span> <span class=\"string\">tcp4</span></div><div class=\"line\"><span class=\"attr\">    certFile:</span> <span class=\"string\">etcd.server.crt</span></div><div class=\"line\"><span class=\"attr\">    clientCA:</span> <span class=\"string\">ca.crt</span></div><div class=\"line\"><span class=\"attr\">    keyFile:</span> <span class=\"string\">etcd.server.key</span></div><div class=\"line\"><span class=\"attr\">    namedCertificates:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  servingInfo:</span></div><div class=\"line\"><span class=\"attr\">    bindAddress:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:4001</span></div><div class=\"line\"><span class=\"attr\">    bindNetwork:</span> <span class=\"string\">tcp4</span></div><div class=\"line\"><span class=\"attr\">    certFile:</span> <span class=\"string\">etcd.server.crt</span></div><div class=\"line\"><span class=\"attr\">    clientCA:</span> <span class=\"string\">ca.crt</span></div><div class=\"line\"><span class=\"attr\">    keyFile:</span> <span class=\"string\">etcd.server.key</span></div><div class=\"line\"><span class=\"attr\">    namedCertificates:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  storageDirectory:</span> <span class=\"string\">/usr/src/openshift-origin-server-v1.3.2-ac1d579-linux-64bit/openshift.local.etcd</span></div><div class=\"line\"><span class=\"attr\">etcdStorageConfig:</span></div><div class=\"line\"><span class=\"attr\">  kubernetesStoragePrefix:</span> <span class=\"string\">kubernetes.io</span></div><div class=\"line\"><span class=\"attr\">  kubernetesStorageVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">  openShiftStoragePrefix:</span> <span class=\"string\">openshift.io</span></div><div class=\"line\"><span class=\"attr\">  openShiftStorageVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">imageConfig:</span></div><div class=\"line\"><span class=\"attr\">  format:</span> <span class=\"string\">openshift/origin-$&#123;component&#125;:$&#123;version&#125;</span></div><div class=\"line\"><span class=\"attr\">  latest:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">imagePolicyConfig:</span></div><div class=\"line\"><span class=\"attr\">  disableScheduledImport:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  maxImagesBulkImportedPerRepository:</span> <span class=\"number\">5</span></div><div class=\"line\"><span class=\"attr\">  maxScheduledImageImportsPerMinute:</span> <span class=\"number\">60</span></div><div class=\"line\"><span class=\"attr\">  scheduledImageImportMinimumIntervalSeconds:</span> <span class=\"number\">900</span></div><div class=\"line\"><span class=\"attr\">jenkinsPipelineConfig:</span></div><div class=\"line\"><span class=\"attr\">  autoProvisionEnabled:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  parameters:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  serviceName:</span> <span class=\"string\">jenkins</span></div><div class=\"line\"><span class=\"attr\">  templateName:</span> <span class=\"string\">jenkins-ephemeral</span></div><div class=\"line\"><span class=\"attr\">  templateNamespace:</span> <span class=\"string\">openshift</span></div><div class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">MasterConfig</span></div><div class=\"line\"><span class=\"attr\">kubeletClientInfo:</span></div><div class=\"line\"><span class=\"attr\">  ca:</span> <span class=\"string\">ca.crt</span></div><div class=\"line\"><span class=\"attr\">  certFile:</span> <span class=\"string\">master.kubelet-client.crt</span></div><div class=\"line\"><span class=\"attr\">  keyFile:</span> <span class=\"string\">master.kubelet-client.key</span></div><div class=\"line\"><span class=\"attr\">  port:</span> <span class=\"number\">10250</span></div><div class=\"line\"><span class=\"attr\">kubernetesMasterConfig:</span></div><div class=\"line\"><span class=\"attr\">  admissionConfig:</span></div><div class=\"line\"><span class=\"attr\">    pluginConfig:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  apiLevels:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  apiServerArguments:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  controllerArguments:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  disabledAPIGroupVersions:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  masterCount:</span> <span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">  masterIP:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  podEvictionTimeout:</span> <span class=\"number\">5</span><span class=\"string\">m</span></div><div class=\"line\"><span class=\"attr\">  proxyClientInfo:</span></div><div class=\"line\"><span class=\"attr\">    certFile:</span> <span class=\"string\">master.proxy-client.crt</span></div><div class=\"line\"><span class=\"attr\">    keyFile:</span> <span class=\"string\">master.proxy-client.key</span></div><div class=\"line\"><span class=\"attr\">  schedulerArguments:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  schedulerConfigFile:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  servicesNodePortRange:</span> <span class=\"number\">30000</span><span class=\"bullet\">-32767</span></div><div class=\"line\"><span class=\"attr\">  servicesSubnet:</span> <span class=\"number\">172.30</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/16</span></div><div class=\"line\"><span class=\"attr\">  staticNodeNames:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">masterClients:</span></div><div class=\"line\"><span class=\"attr\">  externalKubernetesClientConnectionOverrides:</span></div><div class=\"line\"><span class=\"attr\">    acceptContentTypes:</span> <span class=\"string\">application/vnd.kubernetes.protobuf,application/json</span></div><div class=\"line\"><span class=\"attr\">    burst:</span> <span class=\"number\">400</span></div><div class=\"line\"><span class=\"attr\">    contentType:</span> <span class=\"string\">application/vnd.kubernetes.protobuf</span></div><div class=\"line\"><span class=\"attr\">    qps:</span> <span class=\"number\">200</span></div><div class=\"line\"><span class=\"attr\">  externalKubernetesKubeConfig:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  openshiftLoopbackClientConnectionOverrides:</span></div><div class=\"line\"><span class=\"attr\">    acceptContentTypes:</span> <span class=\"string\">application/vnd.kubernetes.protobuf,application/json</span></div><div class=\"line\"><span class=\"attr\">    burst:</span> <span class=\"number\">600</span></div><div class=\"line\"><span class=\"attr\">    contentType:</span> <span class=\"string\">application/vnd.kubernetes.protobuf</span></div><div class=\"line\"><span class=\"attr\">    qps:</span> <span class=\"number\">300</span></div><div class=\"line\"><span class=\"attr\">  openshiftLoopbackKubeConfig:</span> <span class=\"string\">openshift-master.kubeconfig</span></div><div class=\"line\"><span class=\"attr\">masterPublicURL:</span> <span class=\"attr\">https://openshift1.kvm.hochguertel.local:8443</span></div><div class=\"line\"><span class=\"attr\">networkConfig:</span></div><div class=\"line\"><span class=\"attr\">  clusterNetworkCIDR:</span> <span class=\"number\">10.128</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/14</span></div><div class=\"line\"><span class=\"attr\">  externalIPNetworkCIDRs:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  hostSubnetLength:</span> <span class=\"number\">9</span></div><div class=\"line\"><span class=\"attr\">  ingressIPNetworkCIDR:</span> <span class=\"number\">172.46</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/16</span></div><div class=\"line\"><span class=\"attr\">  networkPluginName:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  serviceNetworkCIDR:</span> <span class=\"number\">172.30</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/16</span></div><div class=\"line\"><span class=\"attr\">oauthConfig:</span></div><div class=\"line\"><span class=\"attr\">  alwaysShowProviderSelection:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  assetPublicURL:</span> <span class=\"attr\">https://openshift1.kvm.hochguertel.local:8443/console/</span></div><div class=\"line\"><span class=\"attr\">  grantConfig:</span></div><div class=\"line\"><span class=\"attr\">    method:</span> <span class=\"string\">auto</span></div><div class=\"line\"><span class=\"attr\">    serviceAccountMethod:</span> <span class=\"string\">prompt</span></div><div class=\"line\"><span class=\"attr\">  identityProviders:</span></div><div class=\"line\"><span class=\"attr\">  - challenge:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    login:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    mappingMethod:</span> <span class=\"string\">claim</span></div><div class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">anypassword</span></div><div class=\"line\"><span class=\"attr\">    provider:</span></div><div class=\"line\"><span class=\"attr\">      apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">AllowAllPasswordIdentityProvider</span></div><div class=\"line\"><span class=\"attr\">  masterCA:</span> <span class=\"string\">ca-bundle.crt</span></div><div class=\"line\"><span class=\"attr\">  masterPublicURL:</span> <span class=\"attr\">https://openshift1.kvm.hochguertel.local:8443</span></div><div class=\"line\"><span class=\"attr\">  masterURL:</span> <span class=\"attr\">https://openshift1.kvm.hochguertel.local:8443</span></div><div class=\"line\"><span class=\"attr\">  sessionConfig:</span></div><div class=\"line\"><span class=\"attr\">    sessionMaxAgeSeconds:</span> <span class=\"number\">300</span></div><div class=\"line\"><span class=\"attr\">    sessionName:</span> <span class=\"string\">ssn</span></div><div class=\"line\"><span class=\"attr\">    sessionSecretsFile:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  templates:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  tokenConfig:</span></div><div class=\"line\"><span class=\"attr\">    accessTokenMaxAgeSeconds:</span> <span class=\"number\">86400</span></div><div class=\"line\"><span class=\"attr\">    authorizeTokenMaxAgeSeconds:</span> <span class=\"number\">300</span></div><div class=\"line\"><span class=\"attr\">pauseControllers:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">policyConfig:</span></div><div class=\"line\"><span class=\"attr\">  bootstrapPolicyFile:</span> <span class=\"string\">policy.json</span></div><div class=\"line\"><span class=\"attr\">  openshiftInfrastructureNamespace:</span> <span class=\"string\">openshift-infra</span></div><div class=\"line\"><span class=\"attr\">  openshiftSharedResourcesNamespace:</span> <span class=\"string\">openshift</span></div><div class=\"line\"><span class=\"attr\">  userAgentMatchingConfig:</span></div><div class=\"line\"><span class=\"attr\">    defaultRejectionMessage:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">    deniedClients:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">    requiredClients:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">projectConfig:</span></div><div class=\"line\"><span class=\"attr\">  defaultNodeSelector:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  projectRequestMessage:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  projectRequestTemplate:</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"attr\">  securityAllocator:</span></div><div class=\"line\"><span class=\"attr\">    mcsAllocatorRange:</span> <span class=\"attr\">s0:/2</span></div><div class=\"line\"><span class=\"attr\">    mcsLabelsPerProject:</span> <span class=\"number\">5</span></div><div class=\"line\"><span class=\"attr\">    uidAllocatorRange:</span> <span class=\"number\">1000000000</span><span class=\"bullet\">-1999999999</span><span class=\"string\">/10000</span></div><div class=\"line\"><span class=\"attr\">routingConfig:</span></div><div class=\"line\"><span class=\"attr\">  subdomain:</span> <span class=\"string\">router.openshift1.kvm.hochguertel.local</span></div><div class=\"line\"><span class=\"attr\">serviceAccountConfig:</span></div><div class=\"line\"><span class=\"attr\">  limitSecretReferences:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  managedNames:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">default</span></div><div class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">builder</span></div><div class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">deployer</span></div><div class=\"line\"><span class=\"attr\">  masterCA:</span> <span class=\"string\">ca-bundle.crt</span></div><div class=\"line\"><span class=\"attr\">  privateKeyFile:</span> <span class=\"string\">serviceaccounts.private.key</span></div><div class=\"line\"><span class=\"attr\">  publicKeyFiles:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">serviceaccounts.public.key</span></div><div class=\"line\"><span class=\"attr\">servingInfo:</span></div><div class=\"line\"><span class=\"attr\">  bindAddress:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:8443</span></div><div class=\"line\"><span class=\"attr\">  bindNetwork:</span> <span class=\"string\">tcp4</span></div><div class=\"line\"><span class=\"attr\">  certFile:</span> <span class=\"string\">master.server.crt</span></div><div class=\"line\"><span class=\"attr\">  clientCA:</span> <span class=\"string\">ca.crt</span></div><div class=\"line\"><span class=\"attr\">  keyFile:</span> <span class=\"string\">master.server.key</span></div><div class=\"line\"><span class=\"attr\">  maxRequestsInFlight:</span> <span class=\"number\">500</span></div><div class=\"line\"><span class=\"attr\">  namedCertificates:</span> <span class=\"literal\">null</span></div><div class=\"line\"><span class=\"attr\">  requestTimeoutSeconds:</span> <span class=\"number\">3600</span></div><div class=\"line\"><span class=\"attr\">volumeConfig:</span></div><div class=\"line\"><span class=\"attr\">  dynamicProvisioningEnabled:</span> <span class=\"literal\">true</span></div></pre></td></tr></table></figure><p></p><h1 id=\"KVM-Spice-instead-VNC-as-Guest-VM-remote-access\"><a href=\"#KVM-Spice-instead-VNC-as-Guest-VM-remote-access\" class=\"headerlink\" title=\"KVM Spice instead VNC as Guest-VM remote access\"></a>KVM Spice instead VNC as Guest-VM remote access</h1><ul><li>With VNC the keyboard language is not correctly auto-detected.</li><li>That’s annoying, also the previously announced trick with flipping the keyboard language (windows taskbar..)</li><li>not work very well, some characters are not available… like “pipe”…</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"EDITOR=nano\" \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\">&gt; ~/.bashrc</span></div><div class=\"line\"></div><div class=\"line\">echo \"VISUAL=nano\" \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\">&gt; ~/.bashrc</span></div><div class=\"line\"></div><div class=\"line\">echo \"export EDITOR VISUAL\" \\</div><div class=\"line\"><span class=\"meta\"> &gt;</span><span class=\"bash\">&gt; ~/.bashrc</span></div><div class=\"line\"></div><div class=\"line\">source ~/.bashrc</div></pre></td></tr></table></figure><ul><li><a href=\"https://wiki.centos.org/HowTos/Spice-libvirt\" target=\"_blank\" rel=\"external\">CentOS.org - Install Spice</a></li><li><a href=\"https://www.spice-space.org/docs/manual/#_configuration_6\" target=\"_blank\" rel=\"external\">Spice-space.org - Handbuch, KVM Configuration</a></li><li><a href=\"http://libvirt.org/formatdomain.html#elementsGraphics\" target=\"_blank\" rel=\"external\">Libvirt.org - Domain-Format, Graphics</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install spice-server spice-client spice-protocol</div></pre></td></tr></table></figure><p><strong>Note:</strong><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">You must remove the VNC Display and then add the Spice Display ... you can NOT change the VNC Display to a Spice Display as that does not add the extra devices necessary to use spice.</div></pre></td></tr></table></figure><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> edit openshift1</div></pre></td></tr></table></figure><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">graphics</span> <span class=\"attr\">type</span>=<span class=\"string\">'vnc'</span> <span class=\"attr\">port</span>=<span class=\"string\">'-1'</span> <span class=\"attr\">autoport</span>=<span class=\"string\">'yes'</span> <span class=\"attr\">listen</span>=<span class=\"string\">'0.0.0.0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">listen</span> <span class=\"attr\">type</span>=<span class=\"string\">'address'</span> <span class=\"attr\">address</span>=<span class=\"string\">'0.0.0.0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">graphics</span>&gt;</span></div><div class=\"line\">...</div></pre></td></tr></table></figure><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">graphics</span> <span class=\"attr\">type</span>=<span class=\"string\">'spice'</span> <span class=\"attr\">autoport</span>=<span class=\"string\">'yes'</span> <span class=\"attr\">listen</span>=<span class=\"string\">'0.0.0.0'</span> <span class=\"attr\">defaultMode</span>=<span class=\"string\">'insecure'</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">listen</span> <span class=\"attr\">type</span>=<span class=\"string\">'address'</span> <span class=\"attr\">address</span>=<span class=\"string\">'0.0.0.0'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">graphics</span>&gt;</span></div></pre></td></tr></table></figure><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'cirrus'</span> <span class=\"attr\">vram</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">heads</span>=<span class=\"string\">'1'</span> <span class=\"attr\">primary</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x02'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">...</div></pre></td></tr></table></figure><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'qxl'</span> <span class=\"attr\">ram</span>=<span class=\"string\">'65536'</span> <span class=\"attr\">vram</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">vgamem</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">heads</span>=<span class=\"string\">'1'</span> <span class=\"attr\">primary</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x02'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div></pre></td></tr></table></figure><p><strong>Spice Display URI abfragen:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh domdisplay --domain openshift1</div></pre></td></tr></table></figure><p></p><p><em>LOG</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvm repo]# virsh domdisplay --domain openshift1</div><div class=\"line\">spice://localhost:5900</div><div class=\"line\">[root@kvm repo]#</div></pre></td></tr></table></figure><p></p><p>It looks like, that the spice display server is not listing on <code>0.0.0.0</code>, but he does, we can connect via uri: <code>spice://kvm:5900</code> to our Guest VM.</p><ul><li>With Spice the keyboard language is fine. Every character is available and no flipping of windows keyboard language is needed.</li></ul><h1 id=\"Less-waiting-time-when-booting\"><a href=\"#Less-waiting-time-when-booting\" class=\"headerlink\" title=\"Less waiting time when booting\"></a>Less waiting time when booting</h1><p><strong>File: <code>/etc/sysconfig/grub</code></strong><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">GRUB_TIMEOUT=1</div><div class=\"line\">GRUB_DISTRIBUTOR=&quot;$(sed &apos;s, release .*$,,g&apos; /etc/system-release)&quot;</div><div class=\"line\">GRUB_DEFAULT=saved</div><div class=\"line\">GRUB_DISABLE_SUBMENU=true</div><div class=\"line\">GRUB_TERMINAL_OUTPUT=&quot;console&quot;</div><div class=\"line\">GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=rhel_openshift/root rd.lvm.lv=rhel_openshift/swap rhgb quiet&quot;</div><div class=\"line\">GRUB_DISABLE_RECOVERY=&quot;true&quot;</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">grub2-mkconfig -o /boot/grub2/grub.cfg</div></pre></td></tr></table></figure><p><em>LOG</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvm repo]# grub2-mkconfig -o /boot/grub2/grub.cfg</div><div class=\"line\">Generating grub configuration file ...</div><div class=\"line\">Found linux image: /boot/vmlinuz-3.10.0-514.2.2.el7.x86_64</div><div class=\"line\">Found initrd image: /boot/initramfs-3.10.0-514.2.2.el7.x86_64.img</div><div class=\"line\">Found linux image: /boot/vmlinuz-3.10.0-327.el7.x86_64</div><div class=\"line\">Found initrd image: /boot/initramfs-3.10.0-327.el7.x86_64.img</div><div class=\"line\">Found linux image: /boot/vmlinuz-0-rescue-71fa280cd69540d7b5a32d7123be8f55</div><div class=\"line\">Found initrd image: /boot/initramfs-0-rescue-71fa280cd69540d7b5a32d7123be8f55.img</div><div class=\"line\">done</div><div class=\"line\">[root@kvm repo]#</div></pre></td></tr></table></figure><p></p><h1 id=\"KVM-Netzwerk-Optimierung…\"><a href=\"#KVM-Netzwerk-Optimierung…\" class=\"headerlink\" title=\"KVM Netzwerk Optimierung…\"></a>KVM Netzwerk Optimierung…</h1><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'bridge'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:6c:9b:f9'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">bridge</span>=<span class=\"string\">'br0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x03'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'network'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:b2:04:ef'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">network</span>=<span class=\"string\">'openshift-vm-isolated'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x09'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'bridge'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:1a:cf:b8'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">bridge</span>=<span class=\"string\">'br0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x0a'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'network'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:f7:42:3b'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">network</span>=<span class=\"string\">'bridge-default'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x0b'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">...</div></pre></td></tr></table></figure><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- Einträge vollständig entfernt.. um das netzwerk nochmal neu aufzubauen! --&gt;</span></div></pre></td></tr></table></figure><ul><li><a href=\"M:\\Packt Pub - Mastering KVM Virtualization [eBook]\\Mastering KVM Virtualization.pdf#page=135\" target=\"_blank\" rel=\"external\">S.135, Mastering KVM Virtualization.pdf</a></li></ul><p><strong>File: <code>net_bridge-default.xml</code></strong><br></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">network</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>vbridge0<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">uuid</span>&gt;</span>0d524877-8197-478b-bfef-a0300c18d228<span class=\"tag\">&lt;/<span class=\"name\">uuid</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bridge</span> <span class=\"attr\">name</span>=<span class=\"string\">'vbridge0'</span> <span class=\"attr\">stp</span>=<span class=\"string\">'on'</span> <span class=\"attr\">delay</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">network</span>&gt;</span></div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> net-define \\</div><div class=\"line\"> --file net_bridge-default.xml</div><div class=\"line\"></div><div class=\"line\">virsh \\</div><div class=\"line\"> net-autostart vbridge0</div><div class=\"line\">virsh \\</div><div class=\"line\"> net-start vbridge0</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh \\</div><div class=\"line\"> attach-interface \\</div><div class=\"line\"> --domain openshift1 \\</div><div class=\"line\"> --source vbridge0 \\</div><div class=\"line\"> --type network \\</div><div class=\"line\"> --model virtio \\</div><div class=\"line\"> --config \\</div><div class=\"line\"> --live</div></pre></td></tr></table></figure><ul><li><a href=\"https://openvz.org/Differences_between_venet_and_veth\" target=\"_blank\" rel=\"external\">OpenVZ.org - Differences between venet and veth</a></li><li><img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host3.png\" alt=\"Stackoverflow.com - How to connect to virtual bridges together?\" title=\"Stackoverflow.com - How to connect to virtual bridges together?\"></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">ip link add veth0 type veth peer name veth1</div><div class=\"line\">ifconfig veth0 up</div><div class=\"line\">ifconfig veth1 up</div><div class=\"line\">brctl addif br0 veth0</div><div class=\"line\">brctl addif vbridge0 veth1</div></pre></td></tr></table></figure><ul><li>Anmerkung: Es gibt keine bemerkbaren Performance Engpässe mit der Lösung! Der Verdacht kam auf, als reposync (RedHat Repositories) zeitweise nur mit 40KB/s lief, zeitweise dann wieder mit 500 KB/s. Also alles in Ordnung!</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh dumpxml openshift1</div></pre></td></tr></table></figure><p><strong>File: <code>virsh dumpxml openshift1</code></strong><br></p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">domain</span> <span class=\"attr\">type</span>=<span class=\"string\">'kvm'</span> <span class=\"attr\">id</span>=<span class=\"string\">'12'</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>openshift1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">uuid</span>&gt;</span>33c4f33c-d77a-4990-8f81-0b3b7b110fae<span class=\"tag\">&lt;/<span class=\"name\">uuid</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">memory</span> <span class=\"attr\">unit</span>=<span class=\"string\">'KiB'</span>&gt;</span>2097152<span class=\"tag\">&lt;/<span class=\"name\">memory</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">currentMemory</span> <span class=\"attr\">unit</span>=<span class=\"string\">'KiB'</span>&gt;</span>2097152<span class=\"tag\">&lt;/<span class=\"name\">currentMemory</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">vcpu</span> <span class=\"attr\">placement</span>=<span class=\"string\">'static'</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">vcpu</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">partition</span>&gt;</span>/machine<span class=\"tag\">&lt;/<span class=\"name\">partition</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">os</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">type</span> <span class=\"attr\">arch</span>=<span class=\"string\">'x86_64'</span> <span class=\"attr\">machine</span>=<span class=\"string\">'pc-i440fx-rhel7.0.0'</span>&gt;</span>hvm<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boot</span> <span class=\"attr\">dev</span>=<span class=\"string\">'hd'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">os</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">features</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">acpi</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">apic</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">features</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">cpu</span> <span class=\"attr\">mode</span>=<span class=\"string\">'custom'</span> <span class=\"attr\">match</span>=<span class=\"string\">'exact'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">fallback</span>=<span class=\"string\">'allow'</span>&gt;</span>Nehalem<span class=\"tag\">&lt;/<span class=\"name\">model</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">cpu</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">clock</span> <span class=\"attr\">offset</span>=<span class=\"string\">'utc'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'rtc'</span> <span class=\"attr\">tickpolicy</span>=<span class=\"string\">'catchup'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'pit'</span> <span class=\"attr\">tickpolicy</span>=<span class=\"string\">'delay'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">timer</span> <span class=\"attr\">name</span>=<span class=\"string\">'hpet'</span> <span class=\"attr\">present</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">clock</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_poweroff</span>&gt;</span>destroy<span class=\"tag\">&lt;/<span class=\"name\">on_poweroff</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_reboot</span>&gt;</span>restart<span class=\"tag\">&lt;/<span class=\"name\">on_reboot</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">on_crash</span>&gt;</span>restart<span class=\"tag\">&lt;/<span class=\"name\">on_crash</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">pm</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">suspend-to-mem</span> <span class=\"attr\">enabled</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">suspend-to-disk</span> <span class=\"attr\">enabled</span>=<span class=\"string\">'no'</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">pm</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">devices</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">emulator</span>&gt;</span>/usr/libexec/qemu-kvm<span class=\"tag\">&lt;/<span class=\"name\">emulator</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'qcow2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/openshift1.img'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">backingStore</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'virtio-disk0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x06'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'disk'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span> <span class=\"attr\">cache</span>=<span class=\"string\">'none'</span> <span class=\"attr\">io</span>=<span class=\"string\">'threads'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">file</span>=<span class=\"string\">'/vm-images/openshift1-add-001.img'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">backingStore</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vdb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'virtio-disk1'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x08'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">disk</span> <span class=\"attr\">type</span>=<span class=\"string\">'file'</span> <span class=\"attr\">device</span>=<span class=\"string\">'cdrom'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">driver</span> <span class=\"attr\">name</span>=<span class=\"string\">'qemu'</span> <span class=\"attr\">type</span>=<span class=\"string\">'raw'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">backingStore</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'hda'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ide'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">readonly</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'ide0-0-0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'drive'</span> <span class=\"attr\">controller</span>=<span class=\"string\">'0'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">target</span>=<span class=\"string\">'0'</span> <span class=\"attr\">unit</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">disk</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-ehci1'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'usb'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x7'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci1'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'usb'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span> <span class=\"attr\">multifunction</span>=<span class=\"string\">'on'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci2'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'usb'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'ich9-uhci3'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'usb'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">master</span> <span class=\"attr\">startport</span>=<span class=\"string\">'4'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x05'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'ide'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'ide'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x01'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio-serial'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'virtio-serial0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x04'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">controller</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">index</span>=<span class=\"string\">'0'</span> <span class=\"attr\">model</span>=<span class=\"string\">'pci-root'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'pci.0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">controller</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">interface</span> <span class=\"attr\">type</span>=<span class=\"string\">'network'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">mac</span> <span class=\"attr\">address</span>=<span class=\"string\">'52:54:00:c0:6f:eb'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">network</span>=<span class=\"string\">'vbridge0'</span> <span class=\"attr\">bridge</span>=<span class=\"string\">'vbridge0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">dev</span>=<span class=\"string\">'vnet0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'net0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x0a'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">interface</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serial</span> <span class=\"attr\">type</span>=<span class=\"string\">'pty'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">path</span>=<span class=\"string\">'/dev/pts/2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">port</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'serial0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">serial</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">console</span> <span class=\"attr\">type</span>=<span class=\"string\">'pty'</span> <span class=\"attr\">tty</span>=<span class=\"string\">'/dev/pts/2'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">path</span>=<span class=\"string\">'/dev/pts/2'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">type</span>=<span class=\"string\">'serial'</span> <span class=\"attr\">port</span>=<span class=\"string\">'0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'serial0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">console</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">channel</span> <span class=\"attr\">type</span>=<span class=\"string\">'unix'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">mode</span>=<span class=\"string\">'bind'</span> <span class=\"attr\">path</span>=<span class=\"string\">'/var/lib/libvirt/qemu/channel/target/domain-12-openshift1/org.qemu.guest_agent.0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">target</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio'</span> <span class=\"attr\">name</span>=<span class=\"string\">'org.qemu.guest_agent.0'</span> <span class=\"attr\">state</span>=<span class=\"string\">'disconnected'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'channel0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'virtio-serial'</span> <span class=\"attr\">controller</span>=<span class=\"string\">'0'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">port</span>=<span class=\"string\">'1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">channel</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'tablet'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'usb'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'input0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'usb'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0'</span> <span class=\"attr\">port</span>=<span class=\"string\">'1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'mouse'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ps2'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'input1'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">'keyboard'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'ps2'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'input2'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">graphics</span> <span class=\"attr\">type</span>=<span class=\"string\">'spice'</span> <span class=\"attr\">port</span>=<span class=\"string\">'5900'</span> <span class=\"attr\">autoport</span>=<span class=\"string\">'yes'</span> <span class=\"attr\">listen</span>=<span class=\"string\">'0.0.0.0'</span> <span class=\"attr\">defaultMode</span>=<span class=\"string\">'insecure'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">listen</span> <span class=\"attr\">type</span>=<span class=\"string\">'address'</span> <span class=\"attr\">address</span>=<span class=\"string\">'0.0.0.0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">graphics</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">model</span> <span class=\"attr\">type</span>=<span class=\"string\">'qxl'</span> <span class=\"attr\">ram</span>=<span class=\"string\">'65536'</span> <span class=\"attr\">vram</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">vgamem</span>=<span class=\"string\">'16384'</span> <span class=\"attr\">heads</span>=<span class=\"string\">'1'</span> <span class=\"attr\">primary</span>=<span class=\"string\">'yes'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'video0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x02'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">memballoon</span> <span class=\"attr\">model</span>=<span class=\"string\">'virtio'</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">alias</span> <span class=\"attr\">name</span>=<span class=\"string\">'balloon0'</span>/&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">address</span> <span class=\"attr\">type</span>=<span class=\"string\">'pci'</span> <span class=\"attr\">domain</span>=<span class=\"string\">'0x0000'</span> <span class=\"attr\">bus</span>=<span class=\"string\">'0x00'</span> <span class=\"attr\">slot</span>=<span class=\"string\">'0x07'</span> <span class=\"attr\">function</span>=<span class=\"string\">'0x0'</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">memballoon</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">devices</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">seclabel</span> <span class=\"attr\">type</span>=<span class=\"string\">'dynamic'</span> <span class=\"attr\">model</span>=<span class=\"string\">'selinux'</span> <span class=\"attr\">relabel</span>=<span class=\"string\">'yes'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span>system_u:system_r:svirt_t:s0:c13,c1021<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">imagelabel</span>&gt;</span>system_u:object_r:svirt_image_t:s0:c13,c1021<span class=\"tag\">&lt;/<span class=\"name\">imagelabel</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">seclabel</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">seclabel</span> <span class=\"attr\">type</span>=<span class=\"string\">'dynamic'</span> <span class=\"attr\">model</span>=<span class=\"string\">'dac'</span> <span class=\"attr\">relabel</span>=<span class=\"string\">'yes'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span>+107:+107<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">imagelabel</span>&gt;</span>+107:+107<span class=\"tag\">&lt;/<span class=\"name\">imagelabel</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">seclabel</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">domain</span>&gt;</span></div></pre></td></tr></table></figure><p></p><h1 id=\"OpenShift-Bash-Completion\"><a href=\"#OpenShift-Bash-Completion\" class=\"headerlink\" title=\"OpenShift Bash Completion\"></a>OpenShift Bash Completion</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /etc/bash_completion.d</div><div class=\"line\">wget https://raw.githubusercontent.com/openshift/origin/master/contrib/completions/bash/oadm</div><div class=\"line\">wget https://raw.githubusercontent.com/openshift/origin/master/contrib/completions/bash/oc</div><div class=\"line\">wget https://raw.githubusercontent.com/openshift/origin/master/contrib/completions/bash/openshift</div></pre></td></tr></table></figure><h1 id=\"Configure-OpenShift’s-Internal-Registry\"><a href=\"#Configure-OpenShift’s-Internal-Registry\" class=\"headerlink\" title=\"Configure OpenShift’s Internal-Registry\"></a>Configure OpenShift’s Internal-Registry</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oadm registry --config=openshift1.kvm.hochguertel.local.config/master/admin.kubeconfig --service-account=registry</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oadm registry --config=openshift1.kvm.hochguertel.local.config/master/admin.kubeconfig --service-account=registry</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Creating registry registry ...</span></div><div class=\"line\">    serviceaccount \"registry\" created</div><div class=\"line\">    clusterrolebinding \"registry-registry-role\" created</div><div class=\"line\">    deploymentconfig \"docker-registry\" created</div><div class=\"line\">    service \"docker-registry\" created</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Success</span></div></pre></td></tr></table></figure><p></p><img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host4.png\" alt=\"Added Docker registry in 'project/default/overview'\" title=\"Added Docker registry in 'project/default/overview'\"><p><a href=\"https://github.com/openshift/origin/issues/10973\" target=\"_blank\" rel=\"external\">https://github.com/openshift/origin/issues/10973</a><br><br><img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host5.png\" alt=\"OpenShift-Host5.png\"><br><a href=\"http://appagile.io/2017/03/29/how-to-push-a-docker-image-from-docker-registry-to-openshift-registry/\" target=\"_blank\" rel=\"external\">http://appagile.io/2017/03/29/how-to-push-a-docker-image-from-docker-registry-to-openshift-registry/</a><br><a href=\"https://stackoverflow.com/questions/36655281/openshift-origin-run-app-against-insecure-registry-yields-stuck-pod-with-error\" target=\"_blank\" rel=\"external\">https://stackoverflow.com/questions/36655281/openshift-origin-run-app-against-insecure-registry-yields-stuck-pod-with-error</a></p><h1 id=\"RedHat-Reposync-Local-RedHat-Repositories\"><a href=\"#RedHat-Reposync-Local-RedHat-Repositories\" class=\"headerlink\" title=\"RedHat Reposync - Local RedHat Repositories:\"></a>RedHat Reposync - Local RedHat Repositories:</h1><ul><li><a href=\"https://www.cyberciti.biz/faq/redhat-centos-linux-yum-update-exclude-packages/\" target=\"_blank\" rel=\"external\">How to Exclude Packages from Reposync</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"exclude=firefox*\" &gt;&gt; /etc/yum.conf</div></pre></td></tr></table></figure><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[main]</span></div><div class=\"line\"><span class=\"attr\">cachedir</span>=/var/cache/yum/<span class=\"variable\">$basearch</span>/<span class=\"variable\">$releasever</span></div><div class=\"line\"><span class=\"attr\">keepcache</span>=<span class=\"number\">0</span></div><div class=\"line\"><span class=\"attr\">debuglevel</span>=<span class=\"number\">2</span></div><div class=\"line\"><span class=\"attr\">logfile</span>=/var/log/yum.log</div><div class=\"line\"><span class=\"attr\">exactarch</span>=<span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">obsoletes</span>=<span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">gpgcheck</span>=<span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">plugins</span>=<span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">installonly_limit</span>=<span class=\"number\">3</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#  This is the default, if you make this bigger yum won't see if the metadata</span></div><div class=\"line\"><span class=\"comment\"># is newer on the remote and so you'll \"gain\" the bandwidth of not having to</span></div><div class=\"line\"><span class=\"comment\"># download the new metadata and \"pay\" for it by yum not having correct</span></div><div class=\"line\"><span class=\"comment\"># information.</span></div><div class=\"line\"><span class=\"comment\">#  It is esp. important, to have correct metadata, for distributions like</span></div><div class=\"line\"><span class=\"comment\"># Fedora which don't keep old packages around. If you don't like this checking</span></div><div class=\"line\"><span class=\"comment\"># interupting your command line usage, it's much better to have something</span></div><div class=\"line\"><span class=\"comment\"># manually check the metadata once an hour (yum-updatesd will do this).</span></div><div class=\"line\"><span class=\"comment\"># metadata_expire=90m</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># PUT YOUR REPOS HERE OR IN separate files named file.repo</span></div><div class=\"line\"><span class=\"comment\"># in /etc/yum.repos.d</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">exclude</span>=firefox* *i686* gimp* *kde* *gnome* *xfce* *openjdk* *X11* *kate* *kdevelop* *gedit* *gstreamer* *gtk* *gutenprint* *gwenview* *isdn* *k3b* *kaccessible* *kactivities* *kamera* *kwin* *kwallet* *libre<span class=\"literal\">off</span>ice* *open<span class=\"literal\">off</span>ice* *libre* *mesa* *libGL* *mp3* *nautilus* *nepomuk* *widget* *icon* *theme* *okular* *pcp* *pidgin* *plexus* *plymouth* *audio* *qt* *rhythmbox* *sane* *desktop* *sip* *sopra<span class=\"literal\">no</span>* *sox* *telepathy* *texlive* *tigervnc* *thai* *totem* *wireshark* *wav* *xchat* *xcb* *xorg* *xulrunner*</div></pre></td></tr></table></figure><h1 id=\"Fix-Docker-Firewalld-and-NetworkManager-Conflict\"><a href=\"#Fix-Docker-Firewalld-and-NetworkManager-Conflict\" class=\"headerlink\" title=\"Fix Docker, Firewalld and NetworkManager Conflict:\"></a>Fix Docker, Firewalld and NetworkManager Conflict:</h1><img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host6.png\" alt=\"https://github.com/moby/moby/issues/16137\" title=\"https://github.com/moby/moby/issues/16137\"> <img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host8.png\" alt=\"https://unix.stackexchange.com/questions/199966/how-to-configure-centos-7-firewalld-to-allow-docker-containers-free-access-to-th\" title=\"https://unix.stackexchange.com/questions/199966/how-to-configure-centos-7-firewalld-to-allow-docker-containers-free-access-to-th\"> <img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host9.png\" alt=\"https://github.com/moby/moby/issues/16137\" title=\"https://github.com/moby/moby/issues/16137\"> <img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host10.png\" alt=\"Fix is in Upstream available, time for `yum update` ?!?\" title=\"Fix is in Upstream available, time for `yum update` ?!?\"> <img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host7.png\" alt=\"OpenShift-Host7.png\"><ul><li><a href=\"https://github.com/t-woerner/firewalld/issues/195\" target=\"_blank\" rel=\"external\">FirewallD not using NetworkManager interface zones on boot (only changes made after booting), this affects e.g. Docker</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">nmcli connection modify docker0 connection.zone trusted</div><div class=\"line\">systemctl stop NetworkManager.service</div><div class=\"line\">firewall-cmd --permanent --zone=trusted --change-interface=docker0</div><div class=\"line\">systemctl start NetworkManager.service</div><div class=\"line\">nmcli connection modify docker0 connection.zone trusted</div><div class=\"line\">systemctl restart docker.service</div></pre></td></tr></table></figure><p><em>Without this, Docker Container’s can’t access the external network! No github.com or docker.io and even no hochguertel.local, without adding docker0 to the trusted zones.</em></p><h1 id=\"PUSHING-APPLICATION-IMAGES-TO-AN-EXTERNAL-REGISTRY\"><a href=\"#PUSHING-APPLICATION-IMAGES-TO-AN-EXTERNAL-REGISTRY\" class=\"headerlink\" title=\"PUSHING APPLICATION IMAGES TO AN EXTERNAL REGISTRY\"></a>PUSHING APPLICATION IMAGES TO AN EXTERNAL REGISTRY</h1><ul><li>Tutorial: <a href=\"https://blog.openshift.com/pushing-application-images-to-an-external-registry/\" target=\"_blank\" rel=\"external\">Blog.Openshift.com - Pushing application images to an external registry</a></li><li>Zugangsdaten für Docker-Registry im OpenShift Service hinterlegen. (<code>oc get secret</code>)</li><li>Zugangsdaten dem Builder bekannt machen. (<code>oc edit sa builder</code>)</li><li>Zugangsdaten in einer Build Konfiguration (Build Vorgang) verwenden. (<code>oc edit bc time</code>)<ul><li>z.b. pushen des Container Artefakt’s zur entfernten Docker-Registry (<code>internal</code> o. <code>docker.io</code>).</li></ul></li></ul><h2 id=\"Step-1-create-a-new-project\"><a href=\"#Step-1-create-a-new-project\" class=\"headerlink\" title=\"Step 1: create a new project:\"></a>Step 1: create a new project:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc new-project ext-image-push</div></pre></td></tr></table></figure><h2 id=\"Step-2-setup-docker-credentials-as-a-secret\"><a href=\"#Step-2-setup-docker-credentials-as-a-secret\" class=\"headerlink\" title=\"Step 2: setup docker credentials as a secret:\"></a>Step 2: setup docker credentials as a secret:</h2><ul><li><strong>Alternative way, without json/yaml docker configuration file: Use the Prefered way of creating secret crediantials, instead of read-in <code>~/.docker/config.json</code>…!!</strong></li><li>Use the (this) Alternative way to create new docker secrets, not only that the type will be <code>kubernetes.io/dockercfg</code>, even the publishing will work fine to our internal privat nexus3 registry with https and insecure!</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> new-dockercfg hochguertel-dockercfg-httpslocal \\</div><div class=\"line\"> --docker-server=https://internal-registry.hochguertel.local/hochguertel-local/ \\</div><div class=\"line\"> --docker-username=admin  \\</div><div class=\"line\"> --docker-password=&lt;SECRET&gt; \\</div><div class=\"line\"> --docker-email=tobias.hochguertel@googlemail.com</div></pre></td></tr></table></figure><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> new-dockercfg dockerhub \\</div><div class=\"line\"> --docker-server=DOCKER_REGISTRY_SERVER \\</div><div class=\"line\"> --docker-username=DOCKER_USER \\</div><div class=\"line\"> --docker-password=DOCKER_PASSWORD \\</div><div class=\"line\"> --docker-email=DOCKER_EMAIL</div></pre></td></tr></table></figure><p>z.B.<br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> new-dockercfg hochguertel-dockercfg-dockerio \\</div><div class=\"line\"> --docker-server=https://index.docker.io/v1/ \\</div><div class=\"line\"> --docker-username=tobiashochguertel \\</div><div class=\"line\"> --docker-password=&lt;SECRET&gt; \\</div><div class=\"line\"> --docker-email=tobias.hochguertel@googlemail.com</div></pre></td></tr></table></figure><p></p><p>z.B.<br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc \\</div><div class=\"line\"> secrets \\</div><div class=\"line\"> new-dockercfg hochguertel-dockercfg-httpslocal \\</div><div class=\"line\"> --docker-server=https://internal-registry.hochguertel.local/hochguertel-local/ \\</div><div class=\"line\"> --docker-username=admin \\</div><div class=\"line\"> --docker-password=&lt;SECRET&gt; \\</div><div class=\"line\"> --docker-email=tobias.hochguertel@googlemail.com</div></pre></td></tr></table></figure><p></p><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 ~]# oc get secret</div><div class=\"line\">NAME                                  TYPE                                  DATA      AGE</div><div class=\"line\">builder-dockercfg-j25vp               kubernetes.io/dockercfg               1         2h</div><div class=\"line\">builder-token-9983v                   kubernetes.io/service-account-token   4         2h</div><div class=\"line\">builder-token-dm8kl                   kubernetes.io/service-account-token   4         2h</div><div class=\"line\">default-dockercfg-wpotu               kubernetes.io/dockercfg               1         2h</div><div class=\"line\">default-token-n7xup                   kubernetes.io/service-account-token   4         2h</div><div class=\"line\">default-token-w2c5q                   kubernetes.io/service-account-token   4         2h</div><div class=\"line\">deployer-dockercfg-0ig26              kubernetes.io/dockercfg               1         2h</div><div class=\"line\">deployer-token-6s4vx                  kubernetes.io/service-account-token   4         2h</div><div class=\"line\">deployer-token-tcd7u                  kubernetes.io/service-account-token   4         2h</div><div class=\"line\">hochguertel-dockercfg-dockerio        kubernetes.io/dockercfg               1         2m</div><div class=\"line\">hochguertel-dockercfg-httpslocal      kubernetes.io/dockercfg               1         2m</div></pre></td></tr></table></figure><p></p><h2 id=\"Step-3-add-secret-to-your-builder-service-account\"><a href=\"#Step-3-add-secret-to-your-builder-service-account\" class=\"headerlink\" title=\"Step 3: add secret to your builder service account:\"></a>Step 3: add secret to your builder service account:</h2><ul><li>Each build in your project runs with using the builder service account.</li></ul><p><strong>Get a List of Service Accounts</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc get sa</div></pre></td></tr></table></figure><p></p><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oc get sa</div><div class=\"line\">NAME       SECRETS   AGE</div><div class=\"line\">builder    2         22m</div><div class=\"line\">default    2         22m</div><div class=\"line\">deployer   2         22m</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc edit sa builder</div></pre></td></tr></table></figure><p><strong>File: <code>/tmp/oc-edit-fze0u.yaml</code></strong><br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Please edit the object below. Lines beginning with a '#' will be ignored,</span></div><div class=\"line\"><span class=\"comment\"># and an empty file will abort the edit. If an error occurs while saving this file will be</span></div><div class=\"line\"><span class=\"comment\"># reopened with the relevant failures.</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">imagePullSecrets:</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">builder-dockercfg-j25vp</span></div><div class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ServiceAccount</span></div><div class=\"line\"><span class=\"attr\">metadata:</span></div><div class=\"line\"><span class=\"attr\">  creationTimestamp:</span> <span class=\"number\">2017</span><span class=\"bullet\">-06</span><span class=\"bullet\">-05</span><span class=\"attr\">T05:47:59Z</span></div><div class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">builder</span></div><div class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">ext-image-push</span></div><div class=\"line\"><span class=\"attr\">  resourceVersion:</span> <span class=\"string\">\"9843\"</span></div><div class=\"line\"><span class=\"attr\">  selfLink:</span> <span class=\"string\">/api/v1/namespaces/ext-image-push/serviceaccounts/builder</span></div><div class=\"line\"><span class=\"attr\">  uid:</span> <span class=\"number\">881</span><span class=\"string\">bbe83-49b2-11e7-976a-525400c06feb</span></div><div class=\"line\"><span class=\"attr\">secrets:</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">builder-token-dm8kl</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">builder-dockercfg-j25vp</span></div></pre></td></tr></table></figure><p></p><p>Add the previously created secret…<br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">secrets:</span></div><div class=\"line\"><span class=\"string\">...</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">hochguertel-dockercfg-dockerio</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">hochguertel-dockercfg-httpslocal</span></div><div class=\"line\"><span class=\"string\">...</span></div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/tmp/oc-edit-fze0u.yaml</code></strong> (modified)<br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Please edit the object below. Lines beginning with a '#' will be ignored,</span></div><div class=\"line\"><span class=\"comment\"># and an empty file will abort the edit. If an error occurs while saving this file will be</span></div><div class=\"line\"><span class=\"comment\"># reopened with the relevant failures.</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">imagePullSecrets:</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">builder-dockercfg-j25vp</span></div><div class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ServiceAccount</span></div><div class=\"line\"><span class=\"attr\">metadata:</span></div><div class=\"line\"><span class=\"attr\">  creationTimestamp:</span> <span class=\"number\">2017</span><span class=\"bullet\">-06</span><span class=\"bullet\">-05</span><span class=\"attr\">T05:47:59Z</span></div><div class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">builder</span></div><div class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">ext-image-push</span></div><div class=\"line\"><span class=\"attr\">  resourceVersion:</span> <span class=\"string\">\"9843\"</span></div><div class=\"line\"><span class=\"attr\">  selfLink:</span> <span class=\"string\">/api/v1/namespaces/ext-image-push/serviceaccounts/builder</span></div><div class=\"line\"><span class=\"attr\">  uid:</span> <span class=\"number\">881</span><span class=\"string\">bbe83-49b2-11e7-976a-525400c06feb</span></div><div class=\"line\"><span class=\"attr\">secrets:</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">builder-token-dm8kl</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">builder-dockercfg-j25vp</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">hochguertel-dockercfg-dockerio</span></div><div class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">hochguertel-dockercfg-httpslocal</span></div></pre></td></tr></table></figure><p></p><p><em>Log:</em><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oc edit sa builder</div><div class=\"line\">serviceaccount &quot;builder&quot; edited</div></pre></td></tr></table></figure><p></p><h2 id=\"Step-4-create-a-new-build-in-your-project\"><a href=\"#Step-4-create-a-new-build-in-your-project\" class=\"headerlink\" title=\"Step 4: create a new build in your project:\"></a>Step 4: create a new build in your project:</h2><ul><li>I am using a Dockerfile in a git repository as an example here. Since I am pushing to DockerHub in this example, I am using a non-RHEL base image (busybox).</li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc new-build https://github.com/VeerMuchandi/time --context-dir=busybox</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oc new-build https://github.com/VeerMuchandi/time --context-dir=busybox</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Found Docker image c75bebc (2 weeks old) from Docker Hub <span class=\"keyword\">for</span> <span class=\"string\">\"busybox\"</span></span></div><div class=\"line\"></div><div class=\"line\">    * An image stream will be created as \"busybox:latest\" that will track the source image</div><div class=\"line\">    * A Docker build using source code from https://github.com/VeerMuchandi/time will be created</div><div class=\"line\">      * The resulting image will be pushed to image stream \"time:latest\"</div><div class=\"line\">      * Every time \"busybox:latest\" changes a new build will be triggered</div><div class=\"line\"><span class=\"meta\"></span></div><div class=\"line\">--&gt;<span class=\"bash\"> Creating resources with label build=time ...</span></div><div class=\"line\">    imagestream \"busybox\" created</div><div class=\"line\">    imagestream \"time\" created</div><div class=\"line\">    buildconfig \"time\" created</div><div class=\"line\"><span class=\"meta\">--&gt;</span><span class=\"bash\"> Success</span></div><div class=\"line\">    Build configuration \"time\" created and build triggered.</div><div class=\"line\">    Run 'oc logs -f bc/time' to stream the build progress.</div></pre></td></tr></table></figure><p></p><p><strong>What happens:</strong></p><ul><li>Kubernetes creates an ImageStream for <code>busybox</code> within this project and downloads the <code>busybox</code> container image (from DockerHub in this case, as I am using it from DockerHub).</li><li>It also creates an ImageStream <code>time</code> to push the resultant application image to, once the build is complete.</li><li>We also have a BuildConfiguration with name <code>time</code> that has specification on how the build is done.</li></ul><p><strong>Get all buildconfigs in your project:</strong></p><ul><li>Note: <code>bc</code> is the short form for <strong>b</strong>uild<strong>c</strong>onfig.<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc get bc</div></pre></td></tr></table></figure></li></ul><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oc get bc</div><div class=\"line\">NAME      TYPE      FROM      LATEST</div><div class=\"line\">time      Docker    Git       1</div></pre></td></tr></table></figure><p></p><h2 id=\"Step-5-edit-buildconfig-to-push-to-your-docker-registry\"><a href=\"#Step-5-edit-buildconfig-to-push-to-your-docker-registry\" class=\"headerlink\" title=\"Step 5: edit buildconfig to push to your docker registry\"></a>Step 5: edit buildconfig to push to your docker registry</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc edit bc time</div></pre></td></tr></table></figure><p><strong>File: <code>/tmp/oc-edit-6sm5w.yaml</code></strong><br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Please edit the object below. Lines beginning with a '#' will be ignored,</span></div><div class=\"line\"><span class=\"comment\"># and an empty file will abort the edit. If an error occurs while saving this file will be</span></div><div class=\"line\"><span class=\"comment\"># reopened with the relevant failures.</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">BuildConfig</span></div><div class=\"line\"><span class=\"attr\">metadata:</span></div><div class=\"line\"><span class=\"attr\">  annotations:</span></div><div class=\"line\">    <span class=\"string\">openshift.io/generated-by:</span> <span class=\"string\">OpenShiftNewBuild</span></div><div class=\"line\"><span class=\"attr\">  creationTimestamp:</span> <span class=\"number\">2017</span><span class=\"bullet\">-06</span><span class=\"bullet\">-05</span><span class=\"attr\">T06:19:36Z</span></div><div class=\"line\"><span class=\"attr\">  labels:</span></div><div class=\"line\"><span class=\"attr\">    build:</span> <span class=\"string\">time</span></div><div class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">time</span></div><div class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">ext-image-push</span></div><div class=\"line\"><span class=\"attr\">  resourceVersion:</span> <span class=\"string\">\"10229\"</span></div><div class=\"line\"><span class=\"attr\">  selfLink:</span> <span class=\"string\">/oapi/v1/namespaces/ext-image-push/buildconfigs/time</span></div><div class=\"line\"><span class=\"attr\">  uid:</span> <span class=\"string\">f2a3a2c3-49b6-11e7-976a-525400c06feb</span></div><div class=\"line\"><span class=\"attr\">spec:</span></div><div class=\"line\"><span class=\"attr\">  output:</span></div><div class=\"line\"><span class=\"attr\">    to:</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">ImageStreamTag</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"attr\">time:latest</span></div><div class=\"line\"><span class=\"attr\">  postCommit:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  resources:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  runPolicy:</span> <span class=\"string\">Serial</span></div><div class=\"line\"><span class=\"attr\">  source:</span></div><div class=\"line\"><span class=\"attr\">    contextDir:</span> <span class=\"string\">busybox</span></div><div class=\"line\"><span class=\"attr\">    git:</span></div><div class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">https://github.com/VeerMuchandi/time</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Git</span></div><div class=\"line\"><span class=\"attr\">  strategy:</span></div><div class=\"line\"><span class=\"attr\">    dockerStrategy:</span></div><div class=\"line\"><span class=\"attr\">      from:</span></div><div class=\"line\"><span class=\"attr\">        kind:</span> <span class=\"string\">ImageStreamTag</span></div><div class=\"line\"><span class=\"attr\">        name:</span> <span class=\"attr\">busybox:latest</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Docker</span></div><div class=\"line\"><span class=\"attr\">  triggers:</span></div><div class=\"line\"><span class=\"attr\">  - github:</span></div><div class=\"line\"><span class=\"attr\">      secret:</span> <span class=\"string\">xm2RnmxPVklO6N98wO7B</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">GitHub</span></div><div class=\"line\"><span class=\"attr\">  - generic:</span></div><div class=\"line\"><span class=\"attr\">      secret:</span> <span class=\"string\">iqniCG_5u6csu9baMw5P</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Generic</span></div><div class=\"line\"><span class=\"attr\">  - type:</span> <span class=\"string\">ConfigChange</span></div><div class=\"line\"><span class=\"attr\">  - imageChange:</span></div><div class=\"line\"><span class=\"attr\">      lastTriggeredImageID:</span> <span class=\"string\">busybox@sha256:c79345819a6882c31b41bc771d9a94fc52872fa651b36771fbe0c8461d7ee558</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">ImageChange</span></div><div class=\"line\"><span class=\"attr\">status:</span></div><div class=\"line\"><span class=\"attr\">  lastVersion:</span> <span class=\"number\">1</span></div></pre></td></tr></table></figure><p></p><p>Locate the following lines in your editor:<br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">spec:</span></div><div class=\"line\"><span class=\"attr\">  output:</span></div><div class=\"line\"><span class=\"attr\">    to:</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">ImageStreamTag</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"attr\">time:latest</span></div></pre></td></tr></table></figure><p></p><ul><li>Note: this tells the builder: to push the output, to the <em>ImageStream <code>time</code></em> with with <em>ImageStreamTag of <code>time:latest</code></em></li></ul><p>Change it to push to your external docker registry <code>internal-registry.hochguertel.local</code><br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">spec:</span></div><div class=\"line\"><span class=\"attr\">  output:</span></div><div class=\"line\"><span class=\"attr\">    to:</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">DockerImage</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">internal-registry.hochguertel.local/hochguertel-local/mytime:latest</span></div><div class=\"line\"><span class=\"attr\">    pushSecret:</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">hochguertel-dockercfg-httpslocal</span></div></pre></td></tr></table></figure><p></p><ul><li>Note: we have to add also the <code>pushSecret</code> to tell the builder which particular secret he has to use while pushing into this registry.</li></ul><p>Or change it to push to <code>docker.io</code> registry:<br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">spec:</span></div><div class=\"line\"><span class=\"attr\">  output:</span></div><div class=\"line\"><span class=\"attr\">    to:</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">DockerImage</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">docker.io/veermuchandi/mytime:latest</span></div><div class=\"line\"><span class=\"attr\">    pushSecret:</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">dockerhub</span></div></pre></td></tr></table></figure><p></p><ul><li>Note: we have to add also the <code>pushSecret</code> to tell the builder which particular secret he has to use while pushing into this registry.</li></ul><p><strong>Für <code>internal-registry.hochguertel.local</code>:</strong></p><p><strong>File: <code>/tmp/oc-edit-6sm5w.yaml</code></strong> (modified)<br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Please edit the object below. Lines beginning with a '#' will be ignored,</span></div><div class=\"line\"><span class=\"comment\"># and an empty file will abort the edit. If an error occurs while saving this file will be</span></div><div class=\"line\"><span class=\"comment\"># reopened with the relevant failures.</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">BuildConfig</span></div><div class=\"line\"><span class=\"attr\">metadata:</span></div><div class=\"line\"><span class=\"attr\">  annotations:</span></div><div class=\"line\">    <span class=\"string\">openshift.io/generated-by:</span> <span class=\"string\">OpenShiftNewBuild</span></div><div class=\"line\"><span class=\"attr\">  creationTimestamp:</span> <span class=\"number\">2017</span><span class=\"bullet\">-06</span><span class=\"bullet\">-05</span><span class=\"attr\">T06:19:36Z</span></div><div class=\"line\"><span class=\"attr\">  labels:</span></div><div class=\"line\"><span class=\"attr\">    build:</span> <span class=\"string\">time</span></div><div class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">time</span></div><div class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">ext-image-push</span></div><div class=\"line\"><span class=\"attr\">  resourceVersion:</span> <span class=\"string\">\"10229\"</span></div><div class=\"line\"><span class=\"attr\">  selfLink:</span> <span class=\"string\">/oapi/v1/namespaces/ext-image-push/buildconfigs/time</span></div><div class=\"line\"><span class=\"attr\">  uid:</span> <span class=\"string\">f2a3a2c3-49b6-11e7-976a-525400c06feb</span></div><div class=\"line\"><span class=\"attr\">spec:</span></div><div class=\"line\"><span class=\"attr\">  output:</span></div><div class=\"line\"><span class=\"attr\">    to:</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">DockerImage</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">internal-registry.hochguertel.local/hochguertel-local/mytime:latest</span></div><div class=\"line\"><span class=\"attr\">    pushSecret:</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">hochguertel-dockercfg-httpslocal</span></div><div class=\"line\"><span class=\"attr\">  postCommit:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  resources:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  runPolicy:</span> <span class=\"string\">Serial</span></div><div class=\"line\"><span class=\"attr\">  source:</span></div><div class=\"line\"><span class=\"attr\">    contextDir:</span> <span class=\"string\">busybox</span></div><div class=\"line\"><span class=\"attr\">    git:</span></div><div class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">https://github.com/VeerMuchandi/time</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Git</span></div><div class=\"line\"><span class=\"attr\">  strategy:</span></div><div class=\"line\"><span class=\"attr\">    dockerStrategy:</span></div><div class=\"line\"><span class=\"attr\">      from:</span></div><div class=\"line\"><span class=\"attr\">        kind:</span> <span class=\"string\">ImageStreamTag</span></div><div class=\"line\"><span class=\"attr\">        name:</span> <span class=\"attr\">busybox:latest</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Docker</span></div><div class=\"line\"><span class=\"attr\">  triggers:</span></div><div class=\"line\"><span class=\"attr\">  - github:</span></div><div class=\"line\"><span class=\"attr\">      secret:</span> <span class=\"string\">xm2RnmxPVklO6N98wO7B</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">GitHub</span></div><div class=\"line\"><span class=\"attr\">  - generic:</span></div><div class=\"line\"><span class=\"attr\">      secret:</span> <span class=\"string\">iqniCG_5u6csu9baMw5P</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Generic</span></div><div class=\"line\"><span class=\"attr\">  - type:</span> <span class=\"string\">ConfigChange</span></div><div class=\"line\"><span class=\"attr\">  - imageChange:</span></div><div class=\"line\"><span class=\"attr\">      lastTriggeredImageID:</span> <span class=\"string\">busybox@sha256:c79345819a6882c31b41bc771d9a94fc52872fa651b36771fbe0c8461d7ee558</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">ImageChange</span></div><div class=\"line\"><span class=\"attr\">status:</span></div><div class=\"line\"><span class=\"attr\">  lastVersion:</span> <span class=\"number\">1</span></div></pre></td></tr></table></figure><p></p><p><strong>Für <code>hub.docker.io</code>:</strong></p><p><strong>File: <code>/tmp/oc-edit-6sm5w.yaml</code></strong> (modified)<br></p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Please edit the object below. Lines beginning with a '#' will be ignored,</span></div><div class=\"line\"><span class=\"comment\"># and an empty file will abort the edit. If an error occurs while saving this file will be</span></div><div class=\"line\"><span class=\"comment\"># reopened with the relevant failures.</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></div><div class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">BuildConfig</span></div><div class=\"line\"><span class=\"attr\">metadata:</span></div><div class=\"line\"><span class=\"attr\">  annotations:</span></div><div class=\"line\">    <span class=\"string\">openshift.io/generated-by:</span> <span class=\"string\">OpenShiftNewBuild</span></div><div class=\"line\"><span class=\"attr\">  creationTimestamp:</span> <span class=\"number\">2017</span><span class=\"bullet\">-06</span><span class=\"bullet\">-05</span><span class=\"attr\">T06:19:36Z</span></div><div class=\"line\"><span class=\"attr\">  labels:</span></div><div class=\"line\"><span class=\"attr\">    build:</span> <span class=\"string\">time</span></div><div class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">time</span></div><div class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">ext-image-push</span></div><div class=\"line\"><span class=\"attr\">  resourceVersion:</span> <span class=\"string\">\"10229\"</span></div><div class=\"line\"><span class=\"attr\">  selfLink:</span> <span class=\"string\">/oapi/v1/namespaces/ext-image-push/buildconfigs/time</span></div><div class=\"line\"><span class=\"attr\">  uid:</span> <span class=\"string\">f2a3a2c3-49b6-11e7-976a-525400c06feb</span></div><div class=\"line\"><span class=\"attr\">spec:</span></div><div class=\"line\"><span class=\"attr\">  output:</span></div><div class=\"line\"><span class=\"attr\">    to:</span></div><div class=\"line\"><span class=\"attr\">      kind:</span> <span class=\"string\">DockerImage</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">docker.io/hochguertel/mytime:latest</span></div><div class=\"line\"><span class=\"attr\">    pushSecret:</span></div><div class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">hochguertel-dockercfg-dockerio</span></div><div class=\"line\"><span class=\"attr\">  postCommit:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  resources:</span> <span class=\"string\">&#123;&#125;</span></div><div class=\"line\"><span class=\"attr\">  runPolicy:</span> <span class=\"string\">Serial</span></div><div class=\"line\"><span class=\"attr\">  source:</span></div><div class=\"line\"><span class=\"attr\">    contextDir:</span> <span class=\"string\">busybox</span></div><div class=\"line\"><span class=\"attr\">    git:</span></div><div class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">https://github.com/VeerMuchandi/time</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Git</span></div><div class=\"line\"><span class=\"attr\">  strategy:</span></div><div class=\"line\"><span class=\"attr\">    dockerStrategy:</span></div><div class=\"line\"><span class=\"attr\">      from:</span></div><div class=\"line\"><span class=\"attr\">        kind:</span> <span class=\"string\">DockerImage</span></div><div class=\"line\"><span class=\"attr\">        name:</span> <span class=\"attr\">busybox:latest</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Docker</span></div><div class=\"line\"><span class=\"attr\">  triggers:</span></div><div class=\"line\"><span class=\"attr\">  - github:</span></div><div class=\"line\"><span class=\"attr\">      secret:</span> <span class=\"string\">xm2RnmxPVklO6N98wO7B</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">GitHub</span></div><div class=\"line\"><span class=\"attr\">  - generic:</span></div><div class=\"line\"><span class=\"attr\">      secret:</span> <span class=\"string\">iqniCG_5u6csu9baMw5P</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">Generic</span></div><div class=\"line\"><span class=\"attr\">  - type:</span> <span class=\"string\">ConfigChange</span></div><div class=\"line\"><span class=\"attr\">  - imageChange:</span></div><div class=\"line\"><span class=\"attr\">      lastTriggeredImageID:</span> <span class=\"string\">busybox@sha256:c79345819a6882c31b41bc771d9a94fc52872fa651b36771fbe0c8461d7ee558</span></div><div class=\"line\"><span class=\"attr\">    type:</span> <span class=\"string\">ImageChange</span></div><div class=\"line\"><span class=\"attr\">status:</span></div><div class=\"line\"><span class=\"attr\">  lastVersion:</span> <span class=\"number\">1</span></div></pre></td></tr></table></figure><p></p><h2 id=\"Step-6-run-build\"><a href=\"#Step-6-run-build\" class=\"headerlink\" title=\"Step 6: run build:\"></a>Step 6: run build:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc start-build time</div></pre></td></tr></table></figure><ul><li>This invokes dockerbuild within OpenShift and pushes the resultant image to external docker registry.</li><li>This started a new build with name <code>time-2</code> and spins up a pod with name <code>time-2-build</code>.</li></ul><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oc start-build time</div><div class=\"line\">build \"time-2\" started</div></pre></td></tr></table></figure><p></p><p><strong>Show a list of running pods:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc get pods</div></pre></td></tr></table></figure><p></p><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 openshift-origin-server-v1.3.2-ac1d579-linux-64bit]# oc get pods</div><div class=\"line\">NAME           READY     STATUS    RESTARTS   AGE</div><div class=\"line\">time-1-build   0/1       Error     0          24m</div></pre></td></tr></table></figure><p></p><p><strong>Show Build log:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc logs time-2-build -f</div></pre></td></tr></table></figure><p></p><p><strong>Works!!</strong></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 ~]# oc logs time-29-build -f</div><div class=\"line\">Cloning \"https://github.com/VeerMuchandi/time\" ...</div><div class=\"line\">        Commit: 39a16e6b59ad96b0a15714e54d6eaebbaa1fb164 (Update init.sh)</div><div class=\"line\">        Author: VeerMuchandi &lt;veer.muchandi@gmail.com&gt;</div><div class=\"line\">        Date:   Wed Sep 14 20:45:02 2016 -0400</div><div class=\"line\">Checking for Docker config file for PULL_DOCKERCFG_PATH in path /var/run/secrets/openshift.io/pull</div><div class=\"line\">Using Docker config file /var/run/secrets/openshift.io/pull/.dockercfg</div><div class=\"line\">Step 1 : FROM busybox</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> c75bebcdd211</span></div><div class=\"line\">Step 2 : MAINTAINER Veer Muchandi veer@redhat.com</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 9834e1d284e9</span></div><div class=\"line\">Step 3 : ADD ./init.sh ./</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 103abd209f2a</span></div><div class=\"line\">Step 4 : EXPOSE 8080</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 3b73736fca7e</span></div><div class=\"line\">Step 5 : CMD ./init.sh</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 06e0c5e04da6</span></div><div class=\"line\">Step 6 : ENV \"OPENSHIFT_BUILD_NAME\" \"time-29\" \"OPENSHIFT_BUILD_NAMESPACE\" \"ext-image-push\" \"OPENSHIFT_BUILD_SOURCE\" \"https://github.com/VeerMuchandi/time\" \"OPENSHIFT_BUILD_COMMIT\" \"39a16e6b59ad96b0a15714e54d6eaebbaa1fb164\"</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> b11dc4099c44</span></div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> bb13ddd4414f</span></div><div class=\"line\">Removing intermediate container b11dc4099c44</div><div class=\"line\">Step 7 : LABEL \"io.openshift.build.commit.ref\" \"master\" \"io.openshift.build.commit.message\" \"Update init.sh\" \"io.openshift.build.source-location\" \"https://github.com/VeerMuchandi/time\" \"io.openshift.build.source-context-dir\" \"busybox\" \"io.openshift.build.commit.author\" \"VeerMuchandi \\u003cveer.muchandi@gmail.com\\u003e\" \"io.openshift.build.commit.date\" \"Wed Sep 14 20:45:02 2016 -0400\" \"io.openshift.build.commit.id\" \"39a16e6b59ad96b0a15714e54d6eaebbaa1fb164\"</div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> 2b7201e0da89</span></div><div class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 4516242fe53a</span></div><div class=\"line\">Removing intermediate container 2b7201e0da89</div><div class=\"line\">Successfully built 4516242fe53a</div><div class=\"line\">Pushing image internal-registry.hochguertel.local/hochguertel-local/mytime:latest ...</div><div class=\"line\">Pushed 0/2 layers, 16% complete</div><div class=\"line\">Pushed 1/2 layers, 100% complete</div><div class=\"line\">Pushed 2/2 layers, 100% complete</div><div class=\"line\">Push successful</div></pre></td></tr></table></figure><h2 id=\"Step-7-test-builded-container-artifact\"><a href=\"#Step-7-test-builded-container-artifact\" class=\"headerlink\" title=\"Step 7: test builded container artifact:\"></a>Step 7: test builded container artifact:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -p 8080:8080 -d registry.hochguertel.local/hochguertel-local/mytime:latest</div><div class=\"line\">curl http://localhost:8080</div></pre></td></tr></table></figure><p><em>Log:</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@openshift1 ~]# docker run -p 8080:8080 -d registry.hochguertel.local/hochguertel-local/mytime:latest</div><div class=\"line\">dead6136b726ad128aade1e8dd7f405a67d0e0234336664c64e5df3d03f07c2f</div><div class=\"line\">[root@openshift1 ~]# curl http://localhost:8080</div><div class=\"line\">Mon Jun  5 11:47:58 UTC 2017</div></pre></td></tr></table></figure><p></p><ul><li><img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host16.png\" alt=\"http://localhost:8080\" title=\"http://localhost:8080\"></li></ul><h2 id=\"Some-Notes-and-Hints\"><a href=\"#Some-Notes-and-Hints\" class=\"headerlink\" title=\"Some Notes and Hints:\"></a>Some Notes and Hints:</h2><ul><li><a href=\"https://blog.openshift.com/remotely-push-pull-container-images-openshift/\" target=\"_blank\" rel=\"external\">Remotely Push and Pull Container Images to OpenShift</a></li></ul><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">oc expose service docker-registry -n default</div></pre></td></tr></table></figure><img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host11.png\" alt=\"Docker Machine on Windows, with insecure-registry!\" title=\"Docker Machine on Windows, with insecure-registry!\"> <img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host12.png\" alt=\"https://docs.openshift.com/container-platform/3.3/dev_guide/managing_images.html#insecure-registries\" title=\"https://docs.openshift.com/container-platform/3.3/dev_guide/managing_images.html#insecure-registries\"> <img src=\"/blog/2017/06/14/OpenShift-Host/OpenShift-Host13.png\" alt=\"https://docs.openshift.com/container-platform/3.3/dev_guide/managing_images.html#insecure-registries\" title=\"https://docs.openshift.com/container-platform/3.3/dev_guide/managing_images.html#insecure-registries\">"},{"title":"KVM HOST CentOS 7 Virtualization Host","path":"2017/06/13/KVM-HOST-CentOS-7-Virtualization-Host/","permalink":"https://tobiashochguertel.github.io/blog/2017/06/13/KVM-HOST-CentOS-7-Virtualization-Host/","content":"<h1 id=\"CENTOS-7-VIRTUALIZATION-HOST\"><a href=\"#CENTOS-7-VIRTUALIZATION-HOST\" class=\"headerlink\" title=\"CENTOS 7 VIRTUALIZATION HOST\"></a>CENTOS 7 VIRTUALIZATION HOST</h1><a id=\"more\"></a><ul><li><a href=\"http://jensd.be/207/linux/install-and-use-centos-7-as-kvm-virtualization-host\" target=\"_blank\" rel=\"external\">install-and-use-centos-7-as-kvm-virtualization-host</a></li><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/chap-Virtualization_Host_Configuration_and_Guest_Installation_Guide-Guest_Installation.html\" target=\"_blank\" rel=\"external\">Chapter 6. Guest virtual machine installation overview</a></li><li><a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/chap-Virtualization_Host_Configuration_and_Guest_Installation_Guide-RHEL6_Install.html\" target=\"_blank\" rel=\"external\">Chapter 7. Installing a Red Hat Enterprise Linux 6 guest virtual machine on a Red Hat Enterprise Linux 6 host</a></li></ul><p><strong>Host:</strong> the machine that host other systems, KVM will be installed on this machine.<br><strong>Guest:</strong> the system running in the host, also refered to as VM, Virtual Machine or domain.<br><strong>Hypervisor:</strong> the piece of software that enables virtualization on the host. For example KVM, ESXi, Xen, …</p><p><strong>File: <code>host</code></strong><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">192.168.2.22 kvmhost kvmhost.hochguertel.biz</div></pre></td></tr></table></figure><p></p><p><strong>SSH-Key austauschen:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssh root@kvmhost</div><div class=\"line\">mkdir .ssh</div><div class=\"line\">chmod 600 .ssh</div><div class=\"line\">exit</div><div class=\"line\">cat ~/.ssh/*.pub | ssh root@kvmhost \"cat &gt;&gt; ~/.ssh/authorized_keys\"</div></pre></td></tr></table></figure><p></p><h2 id=\"KVM-hypervisor-and-VM-extensions\"><a href=\"#KVM-hypervisor-and-VM-extensions\" class=\"headerlink\" title=\"KVM hypervisor and VM-extensions\"></a>KVM hypervisor and VM-extensions</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">egrep -c '(vmx|svm)' /proc/cpuinfo</div></pre></td></tr></table></figure><p><em>Log: <code>egrep -c &#39;(vmx|svm)&#39; /proc/cpuinfo</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost ~]# egrep -c '(vmx|svm)' /proc/cpuinfo</div><div class=\"line\">4</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>cat /proc/cpuinfo</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost ~]# cat /proc/cpuinfo</div><div class=\"line\">processor       : 0</div><div class=\"line\">vendor_id       : GenuineIntel</div><div class=\"line\">cpu family      : 6</div><div class=\"line\">model           : 42</div><div class=\"line\">model name      : Intel(R) Core(TM) i5-2467M CPU @ 1.60GHz</div><div class=\"line\">stepping        : 7</div><div class=\"line\">microcode       : 0x29</div><div class=\"line\">cpu MHz         : 799.937</div><div class=\"line\">cache size      : 3072 KB</div><div class=\"line\">physical id     : 0</div><div class=\"line\">siblings        : 4</div><div class=\"line\">core id         : 0</div><div class=\"line\">cpu cores       : 2</div><div class=\"line\">apicid          : 0</div><div class=\"line\">initial apicid  : 0</div><div class=\"line\">fpu             : yes</div><div class=\"line\">fpu_exception   : yes</div><div class=\"line\">cpuid level     : 13</div><div class=\"line\">wp              : yes</div><div class=\"line\">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb xsaveopt pln pts dtherm tpr_shadow vnmi flexpriority ept vpid</div><div class=\"line\">bogomips        : 3192.69</div><div class=\"line\">clflush size    : 64</div><div class=\"line\">cache_alignment : 64</div><div class=\"line\">address sizes   : 36 bits physical, 48 bits virtual</div><div class=\"line\">power management:</div><div class=\"line\"></div><div class=\"line\">processor       : 1</div><div class=\"line\">vendor_id       : GenuineIntel</div><div class=\"line\">cpu family      : 6</div><div class=\"line\">model           : 42</div><div class=\"line\">model name      : Intel(R) Core(TM) i5-2467M CPU @ 1.60GHz</div><div class=\"line\">stepping        : 7</div><div class=\"line\">microcode       : 0x29</div><div class=\"line\">cpu MHz         : 804.625</div><div class=\"line\">cache size      : 3072 KB</div><div class=\"line\">physical id     : 0</div><div class=\"line\">siblings        : 4</div><div class=\"line\">core id         : 0</div><div class=\"line\">cpu cores       : 2</div><div class=\"line\">apicid          : 1</div><div class=\"line\">initial apicid  : 1</div><div class=\"line\">fpu             : yes</div><div class=\"line\">fpu_exception   : yes</div><div class=\"line\">cpuid level     : 13</div><div class=\"line\">wp              : yes</div><div class=\"line\">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb xsaveopt pln pts dtherm tpr_shadow vnmi flexpriority ept vpid</div><div class=\"line\">bogomips        : 3192.69</div><div class=\"line\">clflush size    : 64</div><div class=\"line\">cache_alignment : 64</div><div class=\"line\">address sizes   : 36 bits physical, 48 bits virtual</div><div class=\"line\">power management:</div><div class=\"line\"></div><div class=\"line\">processor       : 2</div><div class=\"line\">vendor_id       : GenuineIntel</div><div class=\"line\">cpu family      : 6</div><div class=\"line\">model           : 42</div><div class=\"line\">model name      : Intel(R) Core(TM) i5-2467M CPU @ 1.60GHz</div><div class=\"line\">stepping        : 7</div><div class=\"line\">microcode       : 0x29</div><div class=\"line\">cpu MHz         : 800.000</div><div class=\"line\">cache size      : 3072 KB</div><div class=\"line\">physical id     : 0</div><div class=\"line\">siblings        : 4</div><div class=\"line\">core id         : 1</div><div class=\"line\">cpu cores       : 2</div><div class=\"line\">apicid          : 2</div><div class=\"line\">initial apicid  : 2</div><div class=\"line\">fpu             : yes</div><div class=\"line\">fpu_exception   : yes</div><div class=\"line\">cpuid level     : 13</div><div class=\"line\">wp              : yes</div><div class=\"line\">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb xsaveopt pln pts dtherm tpr_shadow vnmi flexpriority ept vpid</div><div class=\"line\">bogomips        : 3192.69</div><div class=\"line\">clflush size    : 64</div><div class=\"line\">cache_alignment : 64</div><div class=\"line\">address sizes   : 36 bits physical, 48 bits virtual</div><div class=\"line\">power management:</div><div class=\"line\"></div><div class=\"line\">processor       : 3</div><div class=\"line\">vendor_id       : GenuineIntel</div><div class=\"line\">cpu family      : 6</div><div class=\"line\">model           : 42</div><div class=\"line\">model name      : Intel(R) Core(TM) i5-2467M CPU @ 1.60GHz</div><div class=\"line\">stepping        : 7</div><div class=\"line\">microcode       : 0x29</div><div class=\"line\">cpu MHz         : 800.000</div><div class=\"line\">cache size      : 3072 KB</div><div class=\"line\">physical id     : 0</div><div class=\"line\">siblings        : 4</div><div class=\"line\">core id         : 1</div><div class=\"line\">cpu cores       : 2</div><div class=\"line\">apicid          : 3</div><div class=\"line\">initial apicid  : 3</div><div class=\"line\">fpu             : yes</div><div class=\"line\">fpu_exception   : yes</div><div class=\"line\">cpuid level     : 13</div><div class=\"line\">wp              : yes</div><div class=\"line\">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb xsaveopt pln pts dtherm tpr_shadow vnmi flexpriority ept vpid</div><div class=\"line\">bogomips        : 3192.69</div><div class=\"line\">clflush size    : 64</div><div class=\"line\">cache_alignment : 64</div><div class=\"line\">address sizes   : 36 bits physical, 48 bits virtual</div><div class=\"line\">power management:</div></pre></td></tr></table></figure><p></p><h3 id=\"KVM-installation\"><a href=\"#KVM-installation\" class=\"headerlink\" title=\"KVM installation\"></a>KVM installation</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install kvm virt-manager libvirt virt-install qemu policycoreutils-python</div><div class=\"line\">yum -y install @virt* dejavu-lgc-* xorg-x11-xauth tigervnc libguestfs-tools policycoreutils-python bridge-utils</div></pre></td></tr></table></figure><h3 id=\"Networking\"><a href=\"#Networking\" class=\"headerlink\" title=\"Networking\"></a>Networking</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">echo \"net.ipv4.ip_forward = 1\"|sudo tee /etc/sysctl.d/99-ipforward.conf</div><div class=\"line\">sysctl -p /etc/sysctl.d/99-ipforward.conf</div><div class=\"line\">ifconfig -a</div></pre></td></tr></table></figure><p><em>Log: <code>ifconfig -a</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost ~]# ifconfig -a</div><div class=\"line\">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</div><div class=\"line\">        inet 127.0.0.1  netmask 255.0.0.0</div><div class=\"line\">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</div><div class=\"line\">        loop  txqueuelen 0  (Lokale Schleife)</div><div class=\"line\">        RX packets 132  bytes 11824 (11.5 KiB)</div><div class=\"line\">        RX errors 0  dropped 0  overruns 0  frame 0</div><div class=\"line\">        TX packets 132  bytes 11824 (11.5 KiB)</div><div class=\"line\">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div><div class=\"line\"></div><div class=\"line\">virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</div><div class=\"line\">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</div><div class=\"line\">        ether 52:54:00:9e:f3:99  txqueuelen 0  (Ethernet)</div><div class=\"line\">        RX packets 0  bytes 0 (0.0 B)</div><div class=\"line\">        RX errors 0  dropped 0  overruns 0  frame 0</div><div class=\"line\">        TX packets 0  bytes 0 (0.0 B)</div><div class=\"line\">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div><div class=\"line\"></div><div class=\"line\">virbr0-nic: flags=4098&lt;BROADCAST,MULTICAST&gt;  mtu 1500</div><div class=\"line\">        ether 52:54:00:9e:f3:99  txqueuelen 500  (Ethernet)</div><div class=\"line\">        RX packets 0  bytes 0 (0.0 B)</div><div class=\"line\">        RX errors 0  dropped 0  overruns 0  frame 0</div><div class=\"line\">        TX packets 0  bytes 0 (0.0 B)</div><div class=\"line\">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div><div class=\"line\"></div><div class=\"line\">wlp2s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</div><div class=\"line\">        inet 192.168.2.22  netmask 255.255.0.0  broadcast 192.168.255.255</div><div class=\"line\">        inet6 2003:46:762:a900:76de:2bff:fe6a:fa2e  prefixlen 64  scopeid 0x0&lt;global&gt;</div><div class=\"line\">        inet6 fe80::76de:2bff:fe6a:fa2e  prefixlen 64  scopeid 0x20&lt;link&gt;</div><div class=\"line\">        ether 74:de:2b:6a:fa:2e  txqueuelen 1000  (Ethernet)</div><div class=\"line\">        RX packets 37309  bytes 46095805 (43.9 MiB)</div><div class=\"line\">        RX errors 0  dropped 0  overruns 0  frame 0</div><div class=\"line\">        TX packets 20606  bytes 2591387 (2.4 MiB)</div><div class=\"line\">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div></pre></td></tr></table></figure><p></p><ul><li><a href=\"http://grokbase.com/t/centos/centos/147wwsaaz8/wireless-inteface-configure-as-bridge#201407289vhyxwcr2xt65947721pf6wh90\" target=\"_blank\" rel=\"external\">Wifi Devices can’t be bridged!</a><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">How did you come to this conclusion? Based on which reading?</div><div class=\"line\"></div><div class=\"line\">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/</div><div class=\"line\"></div><div class=\"line\">Is there any utility or tool to use to scan wireless device in network and</div><div class=\"line\">connect them as i want to stop to use Networkmanager to use laptop wireless</div><div class=\"line\">interface as bridge for my guest vm.</div><div class=\"line\"></div><div class=\"line\">You cannot do what you want</div><div class=\"line\"></div><div class=\"line\">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/ch-Configure_Network_Bridging.html</div><div class=\"line\"></div><div class=\"line\">&quot;Note that a bridge cannot be established over Wi-Fi networks operating</div><div class=\"line\">in Ad-Hoc or Infrastructure modes. This is due to the IEEE 802.11</div><div class=\"line\">standard that specifies the use of 3-address frames in Wi-Fi for the</div><div class=\"line\">efficient use of airtime.&quot;</div><div class=\"line\"></div><div class=\"line\">Thx</div><div class=\"line\">Ben</div><div class=\"line\"></div><div class=\"line\">Alexander</div></pre></td></tr></table></figure></li></ul><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-enp0226u1u2</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=enp0s26u1u2</div><div class=\"line\"><span class=\"attr\">HWADDR</span>=F4:F9:<span class=\"number\">51</span>:F2:<span class=\"number\">82</span>:<span class=\"number\">7</span>F</div><div class=\"line\"><span class=\"attr\">TYPE</span>=Ethernet</div><div class=\"line\"><span class=\"comment\">#BOOTPROTO=dhcp</span></div><div class=\"line\"><span class=\"attr\">DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV4_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6INIT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_AUTOCONF</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_DEFROUTE</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">NAME</span>=enp0s26u1u2</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">BRIDGE</span>=virbr0</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-virbr0-enp0226u1u2</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=virbr0</div><div class=\"line\"><span class=\"attr\">TYPE</span>=BRIDGE</div><div class=\"line\"><span class=\"attr\">BOOTPROTO</span>=static</div><div class=\"line\"><span class=\"comment\">#DEFROUTE=yes</span></div><div class=\"line\"><span class=\"attr\">IPV4_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">IPV6INIT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_AUTOCONF</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"comment\">#IPV6_DEFROUTE=yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_FAILURE_FATAL</span>=<span class=\"literal\">no</span></div><div class=\"line\"><span class=\"attr\">NAME</span>=enp0s26u1u2</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERDNS</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPV6_PEERROUTES</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPADDR</span>=<span class=\"string\">\"192.168.3.101\"</span></div><div class=\"line\"><span class=\"attr\">NETMASK</span>=<span class=\"string\">\"255.255.0.0\"</span></div><div class=\"line\"><span class=\"attr\">GATEWAY</span>=<span class=\"string\">\"192.168.3.1\"</span></div><div class=\"line\"><span class=\"attr\">DNS1</span>=<span class=\"string\">\"192.168.3.1\"</span></div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-enp0226u1u2</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=enp0s26u1u2</div><div class=\"line\"><span class=\"attr\">HWADDR</span>=F4:F9:<span class=\"number\">51</span>:F2:<span class=\"number\">82</span>:<span class=\"number\">7</span>F</div><div class=\"line\"><span class=\"attr\">TYPE</span>=Ethernet</div><div class=\"line\"><span class=\"attr\">NAME</span>=enp0s26u1u2</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">BRIDGE</span>=virbr0</div></pre></td></tr></table></figure><p></p><p><strong>File: <code>/etc/sysconfig/network-scripts/ifcfg-virbr0-enp0226u1u2</code></strong><br></p><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DEVICE</span>=virbr0</div><div class=\"line\"><span class=\"attr\">TYPE</span>=BRIDGE</div><div class=\"line\"><span class=\"attr\">BOOTPROTO</span>=static</div><div class=\"line\"><span class=\"attr\">NAME</span>=enp0s26u1u2</div><div class=\"line\"><span class=\"attr\">ONBOOT</span>=<span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"attr\">IPADDR</span>=<span class=\"string\">\"192.168.3.101\"</span></div><div class=\"line\"><span class=\"attr\">NETMASK</span>=<span class=\"string\">\"255.255.0.0\"</span></div></pre></td></tr></table></figure><p></p><h3 id=\"Finish-and-check-the-KVM-installation\"><a href=\"#Finish-and-check-the-KVM-installation\" class=\"headerlink\" title=\"Finish and check the KVM installation\"></a>Finish and check the KVM installation</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsmod | grep kvm</div><div class=\"line\">ip a show virbr0</div><div class=\"line\">virsh -c qemu:///system list</div></pre></td></tr></table></figure><p><em>Log: <code>lsmod | grep kvm</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost /]# lsmod | grep kvm</div><div class=\"line\">kvm_intel             148081  0</div><div class=\"line\">kvm                   461126  1 kvm_intel</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>ip a show virbr0</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost /]# ip a show virbr0</div><div class=\"line\">4: virbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP</div><div class=\"line\">    link/ether f4:f9:51:f2:82:7f brd ff:ff:ff:ff:ff:ff</div><div class=\"line\">    inet 192.168.3.101/16 brd 192.168.255.255 scope global virbr0</div><div class=\"line\">       valid_lft forever preferred_lft forever</div><div class=\"line\">    inet6 fdaa:fabb:cbd7:1:f6f9:51ff:fef2:827f/64 scope global dynamic</div><div class=\"line\">       valid_lft 1814391sec preferred_lft 604791sec</div><div class=\"line\">    inet6 fe80::f6f9:51ff:fef2:827f/64 scope link</div><div class=\"line\">       valid_lft forever preferred_lft forever</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>virsh -c qemu:///system list</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost /]# virsh -c qemu:///system list</div><div class=\"line\"> Id    Name                           Status</div><div class=\"line\">----------------------------------------------------</div></pre></td></tr></table></figure><p></p><h2 id=\"Using-KVM-with-the-CLI\"><a href=\"#Using-KVM-with-the-CLI\" class=\"headerlink\" title=\"Using KVM with the CLI\"></a>Using KVM with the CLI</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost /]# virt-install --help</div><div class=\"line\">usage: virt-install --name NAME --ram RAM STORAGE INSTALL [options]</div><div class=\"line\"></div><div class=\"line\">Neue virtuelle Maschine von festgelegten Installations-Medien erstellen.</div><div class=\"line\"></div><div class=\"line\">optional arguments:</div><div class=\"line\">  -h, --help            show this help message and exit</div><div class=\"line\">  --version             show program's version number and exit</div><div class=\"line\">  --connect URI         Verbindung zum Hypervisor mit libvirt URI</div><div class=\"line\"></div><div class=\"line\">Allgemeine Optionen:</div><div class=\"line\">  -n NAME, --name NAME  Name der Gastinstanz</div><div class=\"line\">  --memory MEMORY       Configure guest memory allocation. Ex:</div><div class=\"line\">                        --memory 1024 (in MiB)</div><div class=\"line\">                        --memory 512,maxmemory=1024</div><div class=\"line\">  --vcpus VCPUS         Number of vcpus to configure for your guest. Ex:</div><div class=\"line\">                        --vcpus 5</div><div class=\"line\">                        --vcpus 5,maxcpus=10,cpuset=1-4,6,8</div><div class=\"line\">                        --vcpus sockets=2,cores=4,threads=2,</div><div class=\"line\">  --cpu CPU             CPU model and features. Ex:</div><div class=\"line\">                        --cpu coreduo,+x2apic</div><div class=\"line\">                        --cpu host</div><div class=\"line\">  --metadata METADATA   Configure guest metadata. Ex:</div><div class=\"line\">                        --metadata name=foo,title=\"My pretty title\",uuid=...</div><div class=\"line\">                        --metadata description=\"My nice long description\"</div><div class=\"line\">  --security SECURITY   Erstellen Sie die Domänen-Sicherheit Treiber-</div><div class=\"line\">                        Konfiguration.</div><div class=\"line\">  --numatune NUMATUNE   Stimmen Sie die NUMA Richtlinie auf die Domänen</div><div class=\"line\">                        Verarbeitung ab.</div><div class=\"line\">  --memtune MEMTUNE     Tune memory policy for the domain process.</div><div class=\"line\">  --blkiotune BLKIOTUNE</div><div class=\"line\">                        Tune blkio policy for the domain process.</div><div class=\"line\">  --memorybacking MEMORYBACKING</div><div class=\"line\">                        Set memory backing policy for the domain process. Ex:</div><div class=\"line\">                        --memorybacking hugepages=on</div><div class=\"line\">  --features FEATURES   Set domain &lt;features&gt; XML. Ex:</div><div class=\"line\">                        --features acpi=off</div><div class=\"line\">                        --features apic=on,eoi=on</div><div class=\"line\">  --clock CLOCK         Set domain &lt;clock&gt; XML. Ex:</div><div class=\"line\">                        --clock offset=localtime,rtc_tickpolicy=catchup</div><div class=\"line\">  --pm PM               Configure VM power management features</div><div class=\"line\">  --events EVENTS       Configure VM lifecycle management policy</div><div class=\"line\">  --resource RESOURCE   Configure VM resource partitioning (cgroups)</div><div class=\"line\"></div><div class=\"line\">Installations-Verfahren Optionen:</div><div class=\"line\">  --cdrom CDROM         CD-ROM-Installationsmedium</div><div class=\"line\">  -l LOCATION, --location LOCATION</div><div class=\"line\">                        Installationsquelle (z.B. nfs:host:/pfad,</div><div class=\"line\">                        http://host/pfad, ftp://host/pfad)</div><div class=\"line\">  --pxe                 Vom Netzwerk booten mittels PXE-Protokoll</div><div class=\"line\">  --import              Gast um vorhandenes Festplattenimage herum erstellen</div><div class=\"line\">  --livecd              CD-ROM-Medium wie Live-CD behandeln</div><div class=\"line\">  -x EXTRA_ARGS, --extra-args EXTRA_ARGS</div><div class=\"line\">                        Zusätzliche Argumente, die an den Installations</div><div class=\"line\">                        Kernel, der von --location gestartet wird,</div><div class=\"line\">                        weitergegeben werden</div><div class=\"line\">  --initrd-inject INITRD_INJECT</div><div class=\"line\">                        Fügen Sie die angegebene Datei zur Wurzel des initrd</div><div class=\"line\">                        von --location hinzu</div><div class=\"line\">  --os-variant DISTRO_VARIANT</div><div class=\"line\">                        Die zu installierende Betriebssystemvariante für den</div><div class=\"line\">                        Gast, z.B. 'fedora18', 'rhel6', 'winxp', etc.</div><div class=\"line\">  --boot BOOT           Configure guest boot settings. Ex:</div><div class=\"line\">                        --boot hd,cdrom,menu=on</div><div class=\"line\">                        --boot init=/sbin/init (for containers)</div><div class=\"line\">  --idmap IDMAP         Enable user namespace for LXC container. Ex:</div><div class=\"line\">                        --idmap uid_start=0,uid_target=1000,uid_count=10</div><div class=\"line\"></div><div class=\"line\">Speicherkonfiguration:</div><div class=\"line\">  --disk DISK           Specify storage with various options. Ex.</div><div class=\"line\">                        --disk size=10 (new 10GiB image in default location)</div><div class=\"line\">                        --disk path=/my/existing/disk,cache=none</div><div class=\"line\">                        --disk device=cdrom,bus=scsi</div><div class=\"line\">                        --disk=?</div><div class=\"line\">  --nodisks             Keine Festplatten für den Gast einrichten.</div><div class=\"line\">  --filesystem FILESYSTEM</div><div class=\"line\">                        Host-Verzeichnis an Gast übergeben. Beispiel:</div><div class=\"line\">                        --filesystem /my/source/dir,/dir/in/guest</div><div class=\"line\">                        --filesystem template_name,/,type=template</div><div class=\"line\"></div><div class=\"line\">Netzwerke Konfiguration:</div><div class=\"line\">  -w NETWORK, --network NETWORK</div><div class=\"line\">                        Configure a guest network interface. Ex:</div><div class=\"line\">                        --network bridge=mybr0</div><div class=\"line\">                        --network network=my_libvirt_virtual_net</div><div class=\"line\">                        --network network=mynet,model=virtio,mac=00:11...</div><div class=\"line\">                        --network network=mynet,filterref=clean-traffic</div><div class=\"line\">                        --network help</div><div class=\"line\">  --nonetworks          Keine Netzwerkschnittstellen für den Gast erstellen.</div><div class=\"line\"></div><div class=\"line\">Grafikkonfiguration:</div><div class=\"line\">  --graphics GRAPHICS   Konfigurieren Sie Gast-Anzeigeeigenschaften. Beispiel:</div><div class=\"line\">                        --graphics vnc</div><div class=\"line\">                        --graphics spice,port=5901,tlsport=5902</div><div class=\"line\">                        --graphics none</div><div class=\"line\">                        --graphics vnc,password=foobar,port=5910,keymap=ja</div><div class=\"line\"></div><div class=\"line\">Geräteoptionen:</div><div class=\"line\">  --controller CONTROLLER</div><div class=\"line\">                        Konfigurieren Sie ein Gast-Controllergerät. Beispiel:</div><div class=\"line\">                        --controller type=usb,model=ich9-ehci1</div><div class=\"line\">  --serial SERIAL       Konfigurieren Sie ein serielles Gerät für den Gast</div><div class=\"line\">  --parallel PARALLEL   Konfigurieren Sie ein paralleles Gerät für den Gast</div><div class=\"line\">  --channel CHANNEL     Konfigurieren Sie einen Gast-Kommunikationskanal</div><div class=\"line\">  --console CONSOLE     Konfigurieren Sie eine Textkonsolenverbindung zwischen</div><div class=\"line\">                        dem Gast und dem Host</div><div class=\"line\">  --host-device HOST_DEVICE</div><div class=\"line\">                        Konfigurieren Sie physische Host-Geräte verknüpft</div><div class=\"line\">                        mit dem Gast</div><div class=\"line\">  --sound [SOUND]       Konfigurieren Sie Gast-Audiogerät-Emulation</div><div class=\"line\">  --watchdog WATCHDOG   Konfigurieren Sie ein Gast-Watchdog-Gerät</div><div class=\"line\">  --video VIDEO         Konfigurieren Sie Gast-Grafikhardware.</div><div class=\"line\">  --smartcard SMARTCARD</div><div class=\"line\">                        Konfigurieren Sie ein Gast-Smartcard-Gerät. Beispiel:</div><div class=\"line\">                        --smartcard mode=passthrough</div><div class=\"line\">  --redirdev REDIRDEV   Konfigurieren Sie ein Gast-Umleitungsgerät. Beispiel:</div><div class=\"line\">                        --redirdev usb,type=tcp,server=192.168.1.1:4000</div><div class=\"line\">  --memballoon MEMBALLOON</div><div class=\"line\">                        Konfigurieren Sie ein Gast-Memballoon-Gerät. Beispiel:</div><div class=\"line\">                        --memballoon model=virtio</div><div class=\"line\">  --tpm TPM             Configure a guest TPM device. Ex:</div><div class=\"line\">                        --tpm /dev/tpm</div><div class=\"line\">  --rng RNG             Configure a guest RNG device. Ex:</div><div class=\"line\">                        --rng /dev/random</div><div class=\"line\">  --panic PANIC         Configure a guest panic device. Ex:</div><div class=\"line\">                        --panic default</div><div class=\"line\"></div><div class=\"line\">Virtualisierungsplattform-Optionen:</div><div class=\"line\">  -v, --hvm             Dieser Gast soll ein voll virtualisierter Gast sein</div><div class=\"line\">  -p, --paravirt        Dieser Gast soll ein paravirtualisierter Gast sein</div><div class=\"line\">  --container           Dieser Gast soll ein Container-Gast sein</div><div class=\"line\">  --virt-type HV_TYPE   Zu verwendender Hypervisor-Name (kvm, qemu, xen, ...)</div><div class=\"line\">  --arch ARCH           Die zu simulierende CPU-Architektur</div><div class=\"line\">  --machine MACHINE     Der zu emulierende Rechertyp</div><div class=\"line\"></div><div class=\"line\">Sonstige Optionen:</div><div class=\"line\">  --autostart           Domäne soll automatisch nach dem Systemstart des</div><div class=\"line\">                        Hosts starten.</div><div class=\"line\">  --wait WAIT           Minutes to wait for install to complete.</div><div class=\"line\">  --noautoconsole       Nicht automatisch mit der Gastkonsole zu verbinden</div><div class=\"line\">                        versuchen</div><div class=\"line\">  --noreboot            Gast nach abgeschlossener Installation nicht starten.</div><div class=\"line\">  --print-xml           Print the generated domain XML rather than create the</div><div class=\"line\">                        guest.</div><div class=\"line\">  --print-step XMLSTEP  Drucken XML eines bestimmten Installations-Schrittes</div><div class=\"line\">                        (1, 2, 3, alle) anstatt den Gast zu definieren.</div><div class=\"line\">  --dry-run             Führen Sie den Installationsprozess durch, aber ohne</div><div class=\"line\">                        Geräte zu erstellen oder den Gast zu definieren.</div><div class=\"line\">  -q, --quiet           Unterdrücken Fehlerfreie Ausgabe</div><div class=\"line\">  -d, --debug           Debugging-Informationen anzeigen</div><div class=\"line\"></div><div class=\"line\">Use '--option=?' or '--option help' to see available suboptions</div><div class=\"line\">Siehe die man-Seite für Beispiele und kompletter Options-Syntax.</div><div class=\"line\">[root@kvmhost /]#</div></pre></td></tr></table></figure><p><strong>SELinux Virtualbox Image Storage Directory Change:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir /vm</div><div class=\"line\">semanage fcontext -a -t virt_image_t \"/vm(/.*)?\"</div><div class=\"line\">restorecon -R /vm</div></pre></td></tr></table></figure><p></p><p><strong>Überprüfen ob Libvirt Daemon korrekt gestartet werden konnte:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl status libvirtd</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>systemctl status libvirtd</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost vm]# systemctl status libvirtd</div><div class=\"line\">libvirtd.service - Virtualization daemon</div><div class=\"line\">   Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled)</div><div class=\"line\">   Active: active (running) since So 2015-10-04 17:00:27 CEST; 8min ago</div><div class=\"line\">     Docs: man:libvirtd(8)</div><div class=\"line\">           http://libvirt.org</div><div class=\"line\"> Main PID: 1603 (libvirtd)</div><div class=\"line\">   CGroup: /system.slice/libvirtd.service</div><div class=\"line\">           └─1603 /usr/sbin/libvirtd</div><div class=\"line\"></div><div class=\"line\">Okt 04 17:00:27 kvmhost.hochguertel.biz systemd[1]: Starting Virtualization daemon...</div><div class=\"line\">Okt 04 17:00:27 kvmhost.hochguertel.biz systemd[1]: Started Virtualization daemon.</div><div class=\"line\">Okt 04 17:00:28 kvmhost.hochguertel.biz libvirtd[1603]: libvirt version: 1.2.8, package: 16.el7_1.4 (CentOS BuildSystem &lt;http://bugs.cent...os.org)</div><div class=\"line\">Okt 04 17:00:28 kvmhost.hochguertel.biz libvirtd[1603]: Kann Bridge virbr0 nicht erstellen: Die Datei existiert bereits</div><div class=\"line\">Hint: Some lines were ellipsized, use -l to show in full.</div></pre></td></tr></table></figure><p></p><p><strong><code>Active: active (running) since So 2015-10-04 17:00:27 CEST; 8min ago</code></strong></p><h3 id=\"Example-to-add-a-windows-guest\"><a href=\"#Example-to-add-a-windows-guest\" class=\"headerlink\" title=\"Example to add a windows-guest\"></a>Example to add a windows-guest</h3><p><strong>List of Operation Systems:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">osinfo-query os</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>osinfo-query os</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost vm]# osinfo-query os</div><div class=\"line\"> Short ID             | Name                                               | Version  | ID</div><div class=\"line\">----------------------+----------------------------------------------------+----------+-----------------------------------------</div><div class=\"line\"> altlinux1.0          | Mandrake RE Spring 2001                            | 1.0      | http://altlinux.org/altlinux/1.0</div><div class=\"line\"> altlinux2.0          | ALT Linux 2.0                                      | 2.0      | http://altlinux.org/altlinux/2.0</div><div class=\"line\"> altlinux2.2          | ALT Linux 2.2                                      | 2.2      | http://altlinux.org/altlinux/2.2</div><div class=\"line\"> altlinux2.4          | ALT Linux 2.4                                      | 2.4      | http://altlinux.org/altlinux/2.4</div><div class=\"line\"> altlinux3.0          | ALT Linux 3.0                                      | 3.0      | http://altlinux.org/altlinux/3.0</div><div class=\"line\"> altlinux4.0          | ALT Linux 4.0                                      | 4.0      | http://altlinux.org/altlinux/4.0</div><div class=\"line\"> altlinux4.1          | ALT Linux 4.1                                      | 4.1      | http://altlinux.org/altlinux/4.1</div><div class=\"line\"> altlinux5            | ALT Linux 5.0.0 Ark                                | 5.0      | http://altlinux.org/altlinux/5</div><div class=\"line\"> altlinux6            | ALT Linux 6.0.0 Centaurus                          | 6.0      | http://altlinux.org/altlinux/6</div><div class=\"line\">....</div></pre></td></tr></table></figure><p></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install --connect qemu:///system \\</div><div class=\"line\"> -n vmwin7 \\</div><div class=\"line\"> -r 512 \\</div><div class=\"line\"> --vcpus=1 \\</div><div class=\"line\"> --disk path=/vm/vmwin7.img,size=10 \\</div><div class=\"line\"> --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --os-type windows \\</div><div class=\"line\"> --os-variant win7 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --network=bridge:virbr0 \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --cdrom /vm/03_Installation-Medium/X17-58997.iso</div></pre></td></tr></table></figure><p><code>–connect qemu:///system</code> : connect to KVM on the local system, we could also connect to another KVM-host and define our new VM there<br><code>-n vmwin7</code> : name of the new VM: vmwin7<br><code>-r 512</code> : amount of memory for the VM: 1GB<br><code>–vcpus=1</code> : amount of virtual CPU’s for the VM: 2<br><code>–disk path=/var/lib/libvirt/images/vmwin7.img,size=10</code> : where to store the virtual disk image of the VM and the size: 10GB<br><code>–graphics vnc,listen=0.0.0.0</code> : how to display the VM’s console: via VNC accessible from outside<br><code>–noautoconsole</code> : do not automatically connect to the console<br><code>–os-type windows –os-variant win7</code> : type of guest OS (from the list given above)<br><code>–accelerate</code> : use KVM HW-acceleration<br><code>–network=bridge:virbr0</code> : network bridge to use<br><code>–hvm</code> : full virtualisation<br><code>–cdrom /vm/03_Installation-Medium/X17-58997.iso</code> : location of the installation ISO</p><p><em>Log: ``</em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost vm]# virt-install --connect qemu:///system \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  -n vmwin7 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  -r 512 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --vcpus=1 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --disk path=/vm/vmwin7.img,size=10 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --noautoconsole \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --os-type windows \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --os-variant win7 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --accelerate \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --network=bridge:virbr0 \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --hvm \\</div><div class=\"line\"><span class=\"meta\">&gt;</span>  --cdrom /vm/03_Installation-Medium/X17-58997.iso</div><div class=\"line\"></div><div class=\"line\">Installation wird gestartet...</div><div class=\"line\">Zuweisen von 'vmwin7.img'                                                                                                             |  10 GB  00:00:00</div><div class=\"line\">Domain wird erstellt...                                                                                                               |    0 B  00:00:00</div><div class=\"line\">Domain-Installation ist noch in Arbeit. Warten  für die Installation fertigzustellen.</div></pre></td></tr></table></figure><p></p><h3 id=\"Exmaple-of-adding-KVM-Guests\"><a href=\"#Exmaple-of-adding-KVM-Guests\" class=\"headerlink\" title=\"Exmaple of adding KVM Guests\"></a>Exmaple of adding KVM Guests</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install --connect qemu:///system \\</div><div class=\"line\"> -n vm001 \\</div><div class=\"line\"> -r 512 \\</div><div class=\"line\"> --vcpus=1 \\</div><div class=\"line\"> --disk path=/vm/vm001.img,size=10 \\</div><div class=\"line\"> --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --os-type linux \\</div><div class=\"line\"> --os-variant centos7.0 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --network=bridge:virbr0 \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --cdrom /vm/03_Installation-Medium/CentOS-7-x86_64-DVD-1503-01.iso</div></pre></td></tr></table></figure><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install --connect qemu:///system \\</div><div class=\"line\"> -n vm002 \\</div><div class=\"line\"> -r 512 \\</div><div class=\"line\"> --vcpus=1 \\</div><div class=\"line\"> --disk path=/vm/vm002.img,size=10 \\</div><div class=\"line\"> --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --os-type linux \\</div><div class=\"line\"> --os-variant centos7.0 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --network=bridge:virbr0 \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --cdrom /vm/03_Installation-Medium/CentOS-7-x86_64-DVD-1503-01.iso</div></pre></td></tr></table></figure><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install --connect qemu:///system \\</div><div class=\"line\"> -n vm003 \\</div><div class=\"line\"> -r 512 \\</div><div class=\"line\"> --vcpus=1 \\</div><div class=\"line\"> --disk path=/vm/vm003.img,size=10 \\</div><div class=\"line\"> --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --os-type linux \\</div><div class=\"line\"> --os-variant centos7.0 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --network=bridge:virbr0 \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --cdrom /vm/03_Installation-Medium/CentOS-7-x86_64-DVD-1503-01.iso</div></pre></td></tr></table></figure><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install --connect qemu:///system \\</div><div class=\"line\"> -n vm004 \\</div><div class=\"line\"> -r 512 \\</div><div class=\"line\"> --vcpus=1 \\</div><div class=\"line\"> --disk path=/vm/vm004.img,size=10 \\</div><div class=\"line\"> --graphics vnc,listen=0.0.0.0 \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --os-type linux \\</div><div class=\"line\"> --os-variant centos7.0 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --network=bridge:virbr0 \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --cdrom /vm/03_Installation-Medium/CentOS-7-x86_64-DVD-1503-01.iso</div></pre></td></tr></table></figure><h3 id=\"Open-VNC-Ports-in-Firewall\"><a href=\"#Open-VNC-Ports-in-Firewall\" class=\"headerlink\" title=\"Open VNC Ports in Firewall\"></a>Open VNC Ports in Firewall</h3><ul><li><a href=\"http://www.certdepot.net/rhel7-get-started-firewalld/\" target=\"_blank\" rel=\"external\">rhel7-get-started-firewalld</a></li></ul><p><strong>To add a source (here 192.168.2.0/24) to a zone (here trusted) permanently, type:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">firewall-cmd --permanent --zone=trusted --add-source=192.168.2.0/24</div><div class=\"line\">firewall-cmd --reload</div></pre></td></tr></table></figure><p></p><h3 id=\"Connect-via-VNC-to-Virtual-Machine\"><a href=\"#Connect-via-VNC-to-Virtual-Machine\" class=\"headerlink\" title=\"Connect via VNC to Virtual Machine:\"></a>Connect via VNC to Virtual Machine:</h3><p><strong>Getting the Screen-Number:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh vncdisplay vmwin7</div><div class=\"line\">netstat -tln|grep :59</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>virsh vncdisplay vmwin7</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost ~]# virsh vncdisplay vmwin7</div><div class=\"line\">:0</div><div class=\"line\"></div><div class=\"line\">[root@kvmhost ~]#</div></pre></td></tr></table></figure><p></p><p><em>Log: <code>netstat -tln|grep :59</code></em><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@kvmhost ~]# netstat -tln|grep :59</div><div class=\"line\">tcp        0      0 0.0.0.0:5900            0.0.0.0:*               LISTEN</div><div class=\"line\">[root@kvmhost ~]#</div></pre></td></tr></table></figure><p></p><img src=\"/blog/2017/06/13/KVM-HOST-CentOS-7-Virtualization-Host/KVM-HOST-CentOS-7-Virtualization-Host0.png\" alt=\"Figure: Connect to the screen of KVM VM\" title=\"Figure: Connect to the screen of KVM VM\"><p>192.168.2.22:5900<br>kvmhost:5900<br>spice://kvmhost:5900</p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">virt-install --connect qemu:///system \\</div><div class=\"line\"> -n vmwin7 \\</div><div class=\"line\"> -r 512 \\</div><div class=\"line\"> --vcpus=1 \\</div><div class=\"line\"> --disk path=/vm/vmwin7.img,size=10 \\</div><div class=\"line\"> --graphics spice,listen=0.0.0.0 \\</div><div class=\"line\"> --noautoconsole \\</div><div class=\"line\"> --os-type windows \\</div><div class=\"line\"> --os-variant win7 \\</div><div class=\"line\"> --accelerate \\</div><div class=\"line\"> --network=bridge:virbr0 \\</div><div class=\"line\"> --hvm \\</div><div class=\"line\"> --cdrom /vm/03_Installation-Medium/X17-58997.iso</div></pre></td></tr></table></figure><p><strong>Remove Virtual Machine from Virtual Manager and Harddisk:</strong><br></p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">virsh destroy vmwin7</div><div class=\"line\">virsh undefine vmwin7</div><div class=\"line\">rm -rf /vm/vmwin7.img</div></pre></td></tr></table></figure><p></p><ul><li><a href=\"https://raymii.org/s/articles/virt-install_introduction_and_copy_paste_distro_install_commands.html\" target=\"_blank\" rel=\"external\">Installing Virtual Machines with virt-install, plus copy pastable distro install one-liners</a></li></ul>"}]}